function de(e,t,n){return(t=Nv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vv(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nv(e){var t=Vv(e,"string");return typeof t=="symbol"?t:t+""}var Nr,Rr,Da;(function(e,t){typeof process>"u"&&(e.process={argv:[],cwd:function(){return""},browser:!0,env:{NODE_ENV:"development"},version:"",platform:e.navigator&&e.navigator.userAgent&&/Windows/.test(e.navigator.userAgent)?"win":""})})(typeof self=="object"&&self.Object==Object?self:typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"?global:window);var Kt,M={};if(typeof Symbol<"u"&&typeof Symbol.for=="function"&&typeof Symbol("a symbol for testing symbols")=="symbol")Kt=Symbol;else{var Rv=0,zu={},Hu={};(Kt=function(e){var t="@@symbol"+Rv+++e,n={};return Object.defineProperties(n,{toString:{value:function(){return t}}}),n}).for=function(e){var t=zu[e];return t||(t=zu[e]=Kt(e),Hu[t]=e),t},Kt.keyFor=function(e){return Hu[e]},["hasInstance","isConcatSpreadable","iterator","match","prototype","replace","search","species","split","toPrimitive","toStringTag","unscopables"].forEach(function(e){Kt[e]=Kt("Symbol."+e)})}["isMapLike","isListLike","isValueLike","isFunctionLike","isScopeLike","getOwnKeys","getOwnKeyDescriptor","proto","getOwnEnumerableKeys","hasOwnKey","hasKey","size","getName","getIdentity","assignDeep","updateDeep","getValue","setValue","getKeyValue","setKeyValue","updateValues","addValue","removeValues","apply","new","onValue","offValue","onKeyValue","offKeyValue","getKeyDependencies","getValueDependencies","keyHasDependencies","valueHasDependencies","onKeys","onKeysAdded","onKeysRemoved","onPatches"].forEach(function(e){Kt.for("can."+e)});var x=M.Symbol=Kt,Td=function(e){var t=e.map(function(r){return x.for(r)}),n=t.length;return function(r){for(var a=-1;++a<n;)if(r[t[a]]!==void 0)return r[t[a]]}},Ld=function(e){var t=typeof e;if(t==="string"||Array.isArray(e))return!0;var n=e&&t!=="boolean"&&t!=="number"&&"length"in e&&e.length;return typeof e!="function"&&(n===0||typeof n=="number"&&n>0&&n-1 in e)},Uu=Object.getOwnPropertyNames(function(){}.prototype),qv=Object.getPrototypeOf(function(){}.prototype),jv=Td(["can.new","can.apply"]);function Gt(e){var t=typeof e;return e==null||t!=="function"&&t!=="object"}var Kv=Object.prototype.hasOwnProperty,Id=Function.prototype.toString,Bv=Id.call(Object);function Fu(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null)return!0;var n=Kv.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Id.call(n)===Bv}var Fs,zv=x.for("can.onValue"),Hv=x.for("can.onKeyValue"),Uv=x.for("can.onPatches");if(typeof Symbol<"u"&&typeof Symbol.for=="function"&&typeof Symbol("a symbol for testing symbols")=="symbol")Fs=function(e){return typeof e=="symbol"};else{var Fv="@@symbol";Fs=function(e){return typeof e=="object"&&!Array.isArray(e)&&e.toString().substr(0,8)===Fv}}var Wv=["get","set","peek","computeData","add","getScope","getHelperOrPartial","getTemplateContext","cloneFromRef"],U={isConstructorLike:function(e){var t=e[x.for("can.new")];if(t!==void 0)return t;if(typeof e!="function")return!1;var n=e.prototype;if(!n)return!1;if(qv!==Object.getPrototypeOf(n))return!0;var r=Object.getOwnPropertyNames(n);if(r.length===Uu.length){for(var a=0,o=r.length;a<o;a++)if(r[a]!==Uu[a])return!0;return!1}return!0},isFunctionLike:function(e){var t,n=!!e&&e[x.for("can.isFunctionLike")];return n!==void 0?n:(t=jv(e))!==void 0?!!t:typeof e=="function"},isListLike:function(e){var t;if(typeof e=="string")return!0;if(Gt(e))return!1;if((t=e[x.for("can.isListLike")])!==void 0)return t;var n=e[x.iterator];return n!==void 0?!!n:!!Array.isArray(e)||Ld(e)},isMapLike:function(e){if(Gt(e))return!1;var t=e[x.for("can.isMapLike")];if(t!==void 0)return!!t;var n=e[x.for("can.getKeyValue")];return n===void 0||!!n},isObservableLike:function(e){return!Gt(e)&&!!(e[zv]||e[Hv]||e[Uv])},isScopeLike:function(e){if(Gt(e))return!1;var t=e[x.for("can.isScopeLike")];return t!==void 0?!!t:Wv.every(function(n){return typeof e[n]=="function"})&&"_context"in e&&e._meta&&typeof e._meta=="object"},isPrimitive:Gt,isBuiltIn:function(e){return!!(Gt(e)||Array.isArray(e)||Fu(e)||Object.prototype.toString.call(e)!=="[object Object]"&&Object.prototype.toString.call(e).indexOf("[object ")!==-1)},isValueLike:function(e){var t;if(Gt(e))return!0;if((t=e[x.for("can.isValueLike")])!==void 0)return t;var n=e[x.for("can.getValue")];return n!==void 0?!!n:void 0},isSymbolLike:Fs,isMoreListLikeThanMapLike:function(e){if(Array.isArray(e)||e instanceof Array)return!0;if(e==null)return!1;var t=e[x.for("can.isMoreListLikeThanMapLike")];if(t!==void 0)return t;var n=this.isListLike(e),r=this.isMapLike(e);return!(!n||r)||!(!n&&r)&&void 0},isIteratorLike:function(e){return e&&typeof e=="object"&&typeof e.next=="function"&&e.next.length===0},isPromise:function(e){return e instanceof Promise||Object.prototype.toString.call(e)==="[object Promise]"},isPlainObject:Fu},$v={call:function(e,t){var n=[].slice.call(arguments,2),r=e[x.for("can.apply")];return r?r.call(e,t,n):e.apply(t,n)},apply:function(e,t,n){var r=e[x.for("can.apply")];return r?r.call(e,t,n):e.apply(t,n)},new:function(e){var t=[].slice.call(arguments,1),n=e[x.for("can.new")];if(n)return n.apply(e,t);var r=Object.create(e.prototype),a=e.apply(r,t);return U.isPrimitive(a)?r:a}},Qv=x.for("can.setKeyValue"),Gv=x.for("can.getKeyValue"),Yv=x.for("can.getValue"),Jv=x.for("can.setValue"),xt={setKeyValue:function(e,t,n){if(U.isSymbolLike(t))typeof t=="symbol"?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:n,writable:!0});else{var r=e[Qv];if(r!==void 0)return r.call(e,t,n);e[t]=n}},getKeyValue:function(e,t){var n=e[Gv];return n?n.call(e,t):e[t]},deleteKeyValue:function(e,t){var n=e[x.for("can.deleteKeyValue")];if(n)return n.call(e,t);delete e[t]},getValue:function(e){if(U.isPrimitive(e))return e;var t=e[Yv];return t?t.call(e):e},setValue:function(e,t){var n=e&&e[Jv];if(n)return n.call(e,t);throw new Error("can-reflect.setValue - Can not set value.")},splice:function(e,t,n,r){var a;if(typeof n!="number"){var o=e[x.for("can.updateValues")];if(o)return o.call(e,t,n,r);a=n.length}else a=n;arguments.length<=3&&(r=[]);var i=e[x.for("can.splice")];return i?i.call(e,t,a,r):[].splice.apply(e,[t,a].concat(r))},addValues:function(e,t,n){var r=e[x.for("can.addValues")];return r?r.call(e,t,n):Array.isArray(e)&&n===void 0?e.push.apply(e,t):xt.splice(e,n,[],t)},removeValues:function(e,t,n){var r=e[x.for("can.removeValues")];return r?r.call(e,t,n):Array.isArray(e)&&n===void 0?void t.forEach(function(a){var o=e.indexOf(a);o>=0&&e.splice(o,1)}):xt.splice(e,n,t,[])}};xt.get=xt.getKeyValue,xt.set=xt.setKeyValue,xt.delete=xt.deleteKeyValue;var Pe=xt,Xv=[].slice;function Wu(e,t){return function(n,r,a,o){var i=n[x.for(e)];return i!==void 0?i.call(n,r,a,o):this[t].apply(this,arguments)}}function we(e,t){return function(n){var r=n[x.for(e)];if(r!==void 0){var a=Xv.call(arguments,1);return r.apply(n,a)}throw new Error(t)}}var Ws,Zv={onKeyValue:Wu("can.onKeyValue","onEvent"),offKeyValue:Wu("can.offKeyValue","offEvent"),onKeys:we("can.onKeys","can-reflect: can not observe an onKeys event"),onKeysAdded:we("can.onKeysAdded","can-reflect: can not observe an onKeysAdded event"),onKeysRemoved:we("can.onKeysRemoved","can-reflect: can not unobserve an onKeysRemoved event"),getKeyDependencies:we("can.getKeyDependencies","can-reflect: can not determine dependencies"),getWhatIChange:we("can.getWhatIChange","can-reflect: can not determine dependencies"),getChangesDependencyRecord:function(e){var t=e[x.for("can.getChangesDependencyRecord")];if(typeof t=="function")return t()},keyHasDependencies:we("can.keyHasDependencies","can-reflect: can not determine if this has key dependencies"),onValue:we("can.onValue","can-reflect: can not observe value change"),offValue:we("can.offValue","can-reflect: can not unobserve value change"),getValueDependencies:we("can.getValueDependencies","can-reflect: can not determine dependencies"),valueHasDependencies:we("can.valueHasDependencies","can-reflect: can not determine if value has dependencies"),onPatches:we("can.onPatches","can-reflect: can not observe patches on object"),offPatches:we("can.offPatches","can-reflect: can not unobserve patches on object"),onInstancePatches:we("can.onInstancePatches","can-reflect: can not observe onInstancePatches on Type"),offInstancePatches:we("can.offInstancePatches","can-reflect: can not unobserve onInstancePatches on Type"),onInstanceBoundChange:we("can.onInstanceBoundChange","can-reflect: can not observe bound state change in instances."),offInstanceBoundChange:we("can.offInstanceBoundChange","can-reflect: can not unobserve bound state change"),isBound:we("can.isBound","can-reflect: cannot determine if object is bound"),onEvent:function(e,t,n,r){if(e){var a=e[x.for("can.onEvent")];if(a!==void 0)return a.call(e,t,n,r);e.addEventListener&&e.addEventListener(t,n,r)}},offEvent:function(e,t,n,r){if(e){var a=e[x.for("can.offEvent")];if(a!==void 0)return a.call(e,t,n,r);e.removeEventListener&&e.removeEventListener(t,n,r)}},setPriority:function(e,t){if(e){var n=e[x.for("can.setPriority")];if(n!==void 0)return n.call(e,t),!0}return!1},getPriority:function(e){if(e){var t=e[x.for("can.getPriority")];if(t!==void 0)return t.call(e)}}};typeof Map=="function"?Ws=Map:(Ws=function(){this.contents=[]}).prototype={_getIndex:function(e){var t;do t=this.contents.indexOf(e,t);while(t!==-1&&t%2!=0);return t},has:function(e){return this._getIndex(e)!==-1},get:function(e){var t=this._getIndex(e);if(t!==-1)return this.contents[t+1]},set:function(e,t){var n=this._getIndex(e);n!==-1?this.contents[n+1]=t:(this.contents.push(e),this.contents.push(t))},delete:function(e){var t=this._getIndex(e);t!==-1&&this.contents.splice(t,2)}};var z,$s,Ui,$u=Object.prototype.hasOwnProperty,Cd=function(e){return function(){var t=[this];return t.push.apply(t,arguments),e.apply(null,t)}},Un=x.for("can.getKeyValue"),Fn=Cd(Pe.getKeyValue),qr=x.for("can.setKeyValue"),jr=Cd(Pe.setKeyValue),Qu=x.for("can.size"),Od=Td(["can.updateDeep","can.assignDeep","can.setKeyValue"]),Qs=function(e){return U.isPlainObject(e)||Array.isArray(e)||!!Od(e)};function Pd(e){return!!U.isPrimitive(e)||!Od(e)&&U.isBuiltIn(e)&&!U.isPlainObject(e)&&!Array.isArray(e)&&!U.isObservableLike(e)}try{$s=Object.keys}catch{$s=function(t){return U.isPrimitive(t)?[]:Object.keys(t)}}function Gu(e,t){var n=null;function r(a){this.first=!n,this.first&&(n=function(o){var i=o||Ws;return{unwrap:new i,serialize:new i,isSerializing:{unwrap:new i,serialize:new i},circularReferenceIsSerializing:{unwrap:new i,serialize:new i}}}(a)),this.map=n,this.result=null}return r.prototype.end=function(){return this.first&&(n=null),this.result},function(a,o){if(Pd(a))return a;var i=new r(o);if(U.isValueLike(a))i.result=this[e](Pe.getValue(a));else{var s=U.isIteratorLike(a)||U.isMoreListLikeThanMapLike(a);if(i.result=s?[]:{},i.map[e].has(a))return i.map.isSerializing[e].has(a)&&i.map.circularReferenceIsSerializing[e].set(a,!0),i.map[e].get(a);i.map[e].set(a,i.result);for(var u=0,c=t.length;u<c;u++){var l=a[t[u]];if(l){i.map.isSerializing[e].set(a,!0);var f=i.result;if(i.result=l.call(a,f),i.map.isSerializing[e].delete(a),i.result!==f){if(i.map.circularReferenceIsSerializing[e].has(a))throw i.end(),new Error("Cannot serialize cirular reference!");i.map[e].set(a,i.result)}return i.end()}}typeof obj=="function"?(i.map[e].set(a,a),i.result=a):s?this.eachIndex(a,function(p,v){i.result[v]=this[e](p)},this):this.eachKey(a,function(p,v){i.result[v]=this[e](p)},this)}return i.end()}}Ui=typeof Map<"u"?function(e){var t=new Map;return z.eachIndex(e,function(n){t.set(n,!0)}),t}:function(e){var t={};return e.forEach(function(n){t[n]=!0}),{get:function(n){return t[n]},set:function(n,r){t[n]=r},keys:function(){return e}}};var Yu=function(e){var t=e[x.for("can.hasOwnKey")];if(t)return t.bind(e);var n=Ui(z.getOwnEnumerableKeys(e));return function(r){return n.get(r)}};function Sa(e,t){var n=e[e.length-1];if(n&&n.deleteCount===n.insert.length&&t.index-n.index===n.deleteCount)return n.insert.push.apply(n.insert,t.insert),void(n.deleteCount+=t.deleteCount);e.push(t)}function Ju(e,t,n){var r=this.toArray(t),a=[],o=-1;this.eachIndex(e,function(c,l){if(o=l,l>=r.length)return n||Sa(a,{index:l,deleteCount:e.length-l+1,insert:[]}),!1;var f=r[l];U.isPrimitive(c)||U.isPrimitive(f)||Qs(c)===!1?Sa(a,{index:l,deleteCount:1,insert:[f]}):n===!0?this.assignDeep(c,f):this.updateDeep(c,f)},this),r.length>o&&Sa(a,{index:o+1,deleteCount:0,insert:r.slice(o+1)});for(var i=0,s=a.length;i<s;i++){var u=a[i];Pe.splice(e,u.index,u.deleteCount,u.insert)}return e}z={each:function(e,t,n){return U.isIteratorLike(e)||U.isMoreListLikeThanMapLike(e)?z.eachIndex(e,t,n):z.eachKey(e,t,n)},eachIndex:function(e,t,n){if(Array.isArray(e))return z.eachListLike(e,t,n);var r,a=e[x.iterator];if(U.isIteratorLike(e)?r=e:a&&(r=a.call(e)),r)for(var o,i=0;!(o=r.next()).done&&t.call(n||e,o.value,i++,e)!==!1;);else z.eachListLike(e,t,n);return e},eachListLike:function(e,t,n){var r=-1,a=e.length;if(a===void 0){var o=e[Qu];if(!o)throw new Error("can-reflect: unable to iterate.");a=o.call(e)}for(;++r<a;){var i=e[r];if(t.call(n||i,i,r,e)===!1)break}return e},toArray:function(e){var t=[];return z.each(e,function(n){t.push(n)}),t},eachKey:function(e,t,n){if(e){var r=z.getOwnEnumerableKeys(e),a=e[Un]||Fn;return z.eachIndex(r,function(o){var i=a.call(e,o);return t.call(n||e,i,o,e)})}return e},hasOwnKey:function(e,t){var n=e[x.for("can.hasOwnKey")];if(n)return n.call(e,t);var r=e[x.for("can.getOwnKeys")];if(r){var a=!1;return z.eachIndex(r.call(e),function(o){if(o===t)return a=!0,!1}),a}return $u.call(e,t)},getOwnEnumerableKeys:function(e){var t=e[x.for("can.getOwnEnumerableKeys")];if(t)return t.call(e);if(e[x.for("can.getOwnKeys")]&&e[x.for("can.getOwnKeyDescriptor")]){var n=[];return z.eachIndex(z.getOwnKeys(e),function(r){z.getOwnKeyDescriptor(e,r).enumerable&&n.push(r)},this),n}return $s(e)},getOwnKeys:function(e){var t=e[x.for("can.getOwnKeys")];return t?t.call(e):Object.getOwnPropertyNames(e)},getOwnKeyDescriptor:function(e,t){var n=e[x.for("can.getOwnKeyDescriptor")];return n?n.call(e,t):Object.getOwnPropertyDescriptor(e,t)},unwrap:Gu("unwrap",[x.for("can.unwrap")]),serialize:Gu("serialize",[x.for("can.serialize"),x.for("can.unwrap")]),assignMap:function(e,t){var n=Yu(e),r=e[Un]||Fn,a=e[qr]||jr;return z.eachKey(t,function(o,i){n(i)&&r.call(e,i)===o||a.call(e,i,o)}),e},assignList:function(e,t){var n=z.toArray(t);return Pe.splice(e,0,n,n),e},assign:function(e,t){return U.isIteratorLike(t)||U.isMoreListLikeThanMapLike(t)?z.assignList(e,t):z.assignMap(e,t),e},assignDeepMap:function(e,t){var n=Yu(e),r=e[Un]||Fn,a=e[qr]||jr;return z.eachKey(t,function(o,i){if(n(i)){var s=r.call(e,i);o===s||(U.isPrimitive(s)||U.isPrimitive(o)||Qs(s)===!1?a.call(e,i,o):z.assignDeep(s,o))}else Pe.setKeyValue(e,i,o)},this),e},assignDeepList:function(e,t){return Ju.call(this,e,t,!0)},assignDeep:function(e,t){var n=e[x.for("can.assignDeep")];return n?n.call(e,t):U.isMoreListLikeThanMapLike(t)?z.assignDeepList(e,t):z.assignDeepMap(e,t),e},updateMap:function(e,t){var n=Ui(z.getOwnEnumerableKeys(t)),r=t[Un]||Fn,a=e[qr]||jr;return z.eachKey(e,function(o,i){if(n.get(i)){n.set(i,!1);var s=r.call(t,i);s!==o&&a.call(e,i,s)}else Pe.deleteKeyValue(e,i)},this),z.eachIndex(n.keys(),function(o){n.get(o)&&a.call(e,o,r.call(t,o))}),e},updateList:function(e,t){var n=z.toArray(t);return Pe.splice(e,0,e,n),e},update:function(e,t){return U.isIteratorLike(t)||U.isMoreListLikeThanMapLike(t)?z.updateList(e,t):z.updateMap(e,t),e},updateDeepMap:function(e,t){var n=Ui(z.getOwnEnumerableKeys(t)),r=t[Un]||Fn,a=e[qr]||jr;return z.eachKey(e,function(o,i){if(n.get(i)){n.set(i,!1);var s=r.call(t,i);U.isPrimitive(o)||U.isPrimitive(s)||Qs(o)===!1?a.call(e,i,s):z.updateDeep(o,s)}else Pe.deleteKeyValue(e,i)},this),z.eachIndex(n.keys(),function(o){n.get(o)&&a.call(e,o,r.call(t,o))}),e},updateDeepList:function(e,t){return Ju.call(this,e,t)},updateDeep:function(e,t){var n=e[x.for("can.updateDeep")];return n?n.call(e,t):U.isMoreListLikeThanMapLike(t)?z.updateDeepList(e,t):z.updateDeepMap(e,t),e},hasKey:function(e,t){if(e==null)return!1;var n;if(U.isPrimitive(e))return!!$u.call(e,t)||((n=Object.getPrototypeOf(e))!==void 0?t in n:e[t]!==void 0);var r=e[x.for("can.hasKey")];return r?r.call(e,t):z.hasOwnKey(e,t)||t in e},getAllEnumerableKeys:function(){},getAllKeys:function(){},assignSymbols:function(e,t){return z.eachKey(t,function(n,r){var a=U.isSymbolLike(x[r])?x[r]:x.for(r);Pe.setKeyValue(e,a,n)}),e},isSerialized:Pd,size:function(e){if(e==null)return 0;var t=e[Qu],n=0;return t?t.call(e):Ld(e)?e.length:U.isListLike(e)?(z.eachIndex(e,function(){n++}),n):e?z.getOwnEnumerableKeys(e).length:void 0},defineInstanceKey:function(e,t,n){var r=e[x.for("can.defineInstanceKey")];if(r)return r.call(e,t,n);var a=e.prototype;(r=a[x.for("can.defineInstanceKey")])?r.call(a,t,n):Object.defineProperty(a,t,z.assign({configurable:!0,enumerable:!U.isSymbolLike(t),writable:!0},n))}},z.isSerializable=z.isSerialized,z.keys=z.getOwnEnumerableKeys;var Qe=z,Xu=x.for("can.getSchema"),eg=x.for("can.isMember"),tg=x.for("can.new");function ng(e,t){return e.localeCompare(t)}function Gs(e){return U.isPrimitive(e)||e instanceof Date?e:U.isListLike(e)?(t=[],Qe.eachKey(e,function(n){t.push(Gs(n))}),t):U.isMapLike(e)?(t={},Qe.getOwnKeys(e).sort(ng).forEach(function(n){t[n]=Gs(Pe.getKeyValue(e,n))}),t):e;var t}var Ys={getSchema:function(e){if(e==null)return e;var t=e[Xu];return t===void 0&&(t=(e=e.constructor)&&e[Xu]),t!==void 0?t.call(e):void 0},getIdentity:function(e,t){if((t=t||Ys.getSchema(e))===void 0)throw new Error("can-reflect.getIdentity - Unable to find a schema for the given value.");var n=t.identity;if(n&&n.length!==0){if(n.length===1)return Pe.getKeyValue(e,n[0]);var r={};return n.forEach(function(a){r[a]=Pe.getKeyValue(e,a)}),JSON.stringify(Ys.cloneKeySort(r))}throw new Error("can-reflect.getIdentity - Provided schema lacks an identity property.")},cloneKeySort:function(e){return Gs(e)},convert:function(e,t){if(function(i){return i===Number||i===String||i===Boolean}(t))return t(e);var n=t[eg],r=!1,a=typeof t,o=t[tg];if(n!==void 0?r=n.call(t,e):a==="function"&&U.isConstructorLike(t)&&(r=e instanceof t),r)return e;if(o!==void 0)return o.call(t,e);if(a==="function")return U.isConstructorLike(t)?new t(e):t(e);throw new Error("can-reflect: Can not convert values into type. Type must provide `can.new` symbol.")}},rg=Ys,Zu=x.for("can.getName"),ig=0,ag={setName:function(e,t){if(typeof t!="function"){var n=t;t=function(){return n}}Object.defineProperty(e,Zu,{value:t})},getName:function e(t){var n=typeof t;if(t===null||n!=="object"&&n!=="function")return""+t;var r=t[Zu];if(r)return r.call(t);if(n==="function")return"name"in t||(t.name="functionIE"+ig++),t.name;if(t.constructor&&t!==t.constructor){var a=e(t.constructor);if(a){if(U.isValueLike(t))return a+"<>";if(U.isMoreListLikeThanMapLike(t))return a+"[]";if(U.isMapLike(t))return a+"{}"}}}};typeof Map<"u"&&(Qe.assignSymbols(Map.prototype,{"can.getOwnEnumerableKeys":Map.prototype.keys,"can.setKeyValue":Map.prototype.set,"can.getKeyValue":Map.prototype.get,"can.deleteKeyValue":Map.prototype.delete,"can.hasOwnKey":Map.prototype.has}),typeof Map.prototype.keys!="function"&&(Map.prototype.keys=Map.prototype[x.for("can.getOwnEnumerableKeys")]=function(){var e=[],t=0;return this.forEach(function(n,r){e.push(r)}),{next:function(){return{value:e[t],done:t++===e.length}}}})),typeof WeakMap<"u"&&Qe.assignSymbols(WeakMap.prototype,{"can.getOwnEnumerableKeys":function(){throw new Error("can-reflect: WeakMaps do not have enumerable keys.")},"can.setKeyValue":WeakMap.prototype.set,"can.getKeyValue":WeakMap.prototype.get,"can.deleteKeyValue":WeakMap.prototype.delete,"can.hasOwnKey":WeakMap.prototype.has}),typeof Set<"u"&&(Qe.assignSymbols(Set.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,n){t!==n&&Qe.each(t,function(r){this.delete(r)},this),Qe.each(n,function(r){this.add(r)},this)},"can.size":function(){return this.size}}),typeof Set.prototype[x.iterator]!="function"&&(Set.prototype[x.iterator]=function(){var e=[],t=0;return this.forEach(function(n){e.push(n)}),{next:function(){return{value:e[t],done:t++===e.length}}}})),typeof WeakSet<"u"&&Qe.assignSymbols(WeakSet.prototype,{"can.isListLike":!0,"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,n){t!==n&&Qe.each(t,function(r){this.delete(r)},this),Qe.each(n,function(r){this.add(r)},this)},"can.size":function(){throw new Error("can-reflect: WeakSets do not have enumerable keys.")}});var _d={};[$v,Pe,Zv,Qe,U,ag,rg].forEach(function(e){for(var t in e)_d[t]=e[t];//!steal-remove-end
});var d=M.Reflect=_d,sg={isContainer:function(e){var t=typeof e;return e&&(t==="object"||t==="function")},strReplacer:/\{([^\}]+)\}/g,parts:function(e){return Array.isArray(e)?e:e!==void 0?(e+"").replace(/\[/g,".").replace(/]/g,"").split("."):[]}},Ue=sg,Md=function(e,t){for(var n=Ue.parts(t),r=e,a=0;a<n.length-1;a++)r&&(r=d.getKeyValue(r,n[a]));r&&d.deleteKeyValue(r,n[n.length-1])},fn=function(e,t){var n,r,a,o=Ue.parts(t),i=o.length;if(!i)return e;for(n=e,r=0;r<i&&Ue.isContainer(n)&&n!==null;r++)a=n,n=d.getKeyValue(a,o[r]);return n},Ad=function(e,t,n,r){return e.replace(Ue.strReplacer,function(a,o){var i=fn(t,o);return r&&Md(t,o),n?n(o,i):i})};x.for("can.setValue");var og=function(e,t,n){for(var r=Ue.parts(t),a=e,o=r.length,i=0;i<o-1&&Ue.isContainer(a);i++)a=d.getKeyValue(a,r[i]);if(!a)throw new TypeError("Cannot set value at key path '"+t+"'");return d.setKeyValue(a,r[i],n),e},Ta=function(e,t,n){var r,a,o,i,s=Ue.parts(t),u=s.length;if(u)for(r=e,a=0;a<u;a++){var c=n({parent:o=r,key:i=s[a],value:r=Ue.isContainer(o)&&d.getKeyValue(o,i)},a);c!==void 0&&(r=c)}},Js=M.key={deleteKey:Md,get:fn,replaceWith:Ad,set:og,transform:function(e,t){var n=d.serialize(e);return d.eachKey(t,function(r,a){var o=Ue.parts(a),i=Ue.parts(r),s=[];Ta(n,o,function(c){s.push(c)});var u=s[s.length-1].value;u!==void 0&&(Ta(n,i,function(c,l){if(l<i.length-1&&!c.value)return c.parent[c.key]={};l===i.length-1&&(c.parent[c.key]=u)}),function(c){for(var l=c.length-1;l>=0;l--){var f=c[l];if(delete f.parent[f.key],d.size(f.parent)!==0)return}}(s))}),n},walk:Ta},Xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vd(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function ye(e,t){return e(t={exports:{}},t.exports),t.exports}var dn={warnTimeout:5e3,logLevel:0,warn:function(){this.logLevel<2&&(typeof console<"u"&&console.warn?this._logger("warn",Array.prototype.slice.call(arguments)):typeof console<"u"&&console.log&&this._logger("log",Array.prototype.slice.call(arguments)))},log:function(){this.logLevel<1&&typeof console<"u"&&console.log&&this._logger("log",Array.prototype.slice.call(arguments))},error:function(){this.logLevel<1&&typeof console<"u"&&console.error&&this._logger("error",Array.prototype.slice.call(arguments))},_logger:function(e,t){try{console[e].apply(console,t)}catch{console[e](t)}}},ft={warnTimeout:5e3,logLevel:0,stringify:function(e){return JSON.stringify(e,function(t,n){return n===void 0?"/* void(undefined) */":n},"  ").replace(/"\/\* void\(undefined\) \*\/"/g,"undefined")},warn:function(){//!steal-remove-start
//!steal-remove-end
},log:function(){//!steal-remove-start
//!steal-remove-end
},error:function(){//!steal-remove-start
//!steal-remove-end
},_logger:dn._logger},gi={lastTask:null},q=M.assign=function(e,t){for(var n in t){var r=Object.getOwnPropertyDescriptor(e,n);r&&r.writable===!1||(e[n]=t[n])}return e};function Nd(){}var en=function(e,t){this.callbacks=q({onFirstTask:Nd,onComplete:function(){gi.lastTask=null}},t||{}),this.name=e,this.index=0,this.tasks=[],this._log=!1};en.prototype.constructor=en,en.noop=Nd,en.prototype.enqueue=function(e,t,n,r){var a=this.tasks.push({fn:e,context:t,args:n,meta:r||{}});//!steal-remove-start
a===1&&this.callbacks.onFirstTask(this)},en.prototype.flush=function(){for(;this.index<this.tasks.length;){var e=this.tasks[this.index++];//!steal-remove-start
e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.callbacks.onComplete(this)},en.prototype.log=function(){this._log=!arguments.length||arguments[0]};//!steal-remove-end
var Tt=en,it=function(){Tt.apply(this,arguments),this.taskMap=new Map,this.taskContainersByPriority=[],this.curPriorityIndex=1/0,this.curPriorityMax=0,this.isFlushing=!1,this.tasksRemaining=0};(it.prototype=Object.create(Tt.prototype)).constructor=it,it.prototype.enqueue=function(e,t,n,r){if(!this.taskMap.has(e)){this.tasksRemaining++;var a=this.taskContainersByPriority.length===0,o={fn:e,context:t,args:n,meta:r||{}};this.getTaskContainerAndUpdateRange(o).tasks.push(o),this.taskMap.set(e,o),a&&this.callbacks.onFirstTask(this)}},it.prototype.getTaskContainerAndUpdateRange=function(e){var t=e.meta.priority||0;t<this.curPriorityIndex&&(this.curPriorityIndex=t),t>this.curPriorityMax&&(this.curPriorityMax=t);var n=this.taskContainersByPriority,r=n[t];return r||(r=n[t]={tasks:[],index:0}),r},it.prototype.flush=function(){if(!this.isFlushing)for(this.isFlushing=!0;;){if(!(this.curPriorityIndex<=this.curPriorityMax))return this.taskMap=new Map,this.curPriorityIndex=1/0,this.curPriorityMax=0,this.taskContainersByPriority=[],this.isFlushing=!1,void this.callbacks.onComplete(this);var e=this.taskContainersByPriority[this.curPriorityIndex];if(e&&e.tasks.length>e.index){var t=e.tasks[e.index++];//!steal-remove-start
this.tasksRemaining--,this.taskMap.delete(t.fn),t.fn.apply(t.context,t.args)}else this.curPriorityIndex++}},it.prototype.isEnqueued=function(e){return this.taskMap.has(e)},it.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},it.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var n=t.meta.priority||0,r=this.taskContainersByPriority[n],a=r.tasks.indexOf(t,r.index);if(a>=0)return r.tasks.splice(a,1),this.tasksRemaining--,this.taskMap.delete(t.fn),t;console.warn("Task",e,"has already run")}},it.prototype.tasksRemainingCount=function(){return this.tasksRemaining};var ec=it,mi=function(){Tt.apply(this,arguments),this.flushCount=0};(mi.prototype=Object.create(Tt.prototype)).constructor=mi,mi.prototype.flush=function(){if(this.flushCount===0){for(this.flushCount++;this.index<this.tasks.length;){var e=this.tasks[this.index++];//!steal-remove-start
e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.flushCount--,this.callbacks.onComplete(this)}};var Zs,or,tc=mi,nc=Array.prototype.indexOf;function rc(e,t){if(e===t)return Zs=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)?e===document||e.ownerDocument===document&&document.documentElement.contains(e)?-1:t===document||t.ownerDocument===document&&document.documentElement.contains(t)?1:or?nc.call(or,e)-nc.call(or,t):0:4&n?-1:1)}var ug={uniqueSort:function(e){var t,n=[],r=0,a=0;if(Zs=!1,or=!1,e.sort(rc),Zs){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return or=null,e},sortOrder:rc},ic=x.for("can.element");function cg(e,t){return ug.sortOrder(e.meta.element,t.meta.element)}var mt=function(){Tt.apply(this,arguments),this.taskMap=new Map,this.unsortable=[],this.isFlushing=!1};(mt.prototype=Object.create(Tt.prototype)).constructor=mt,mt.prototype.enqueue=function(e,t,n,r){var a;if(this.taskMap.has(e))(a=this.taskMap.get(e)).context=t,a.args=n,r||(r={}),r.element||(r.element=e[ic]),a.meta=r;else{//!steal-remove-start
r||(r={}),r.element||(r.element=e[ic]),a={fn:e,context:t,args:n,meta:r};//!steal-remove-end
this.taskMap.set(e,a);var o=function(i,s,u){if(s&&s.length){if(i(u,s[0])===-1)return 0;if(i(u,s[s.length-1])===1)return s.length;for(var c=0,l=s.length;c<l;){var f=c+l>>>1;i(u,s[f])===-1?l=f:c=f+1}return l}}(cg,this.tasks,a);this.tasks.splice(o,0,a),this.tasks.length===1&&this.callbacks.onFirstTask(this)}},mt.prototype.flush=function(){if(!this.isFlushing){for(this.isFlushing=!0;this.tasks.length;){var e=this.tasks.shift();//!steal-remove-start
this.taskMap.delete(e.fn),e.fn.apply(e.context,e.args)}this.isFlushing=!1,this.callbacks.onComplete(this)}},mt.prototype.isEnqueued=function(e){return this.taskMap.has(e)},mt.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},mt.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var n=this.tasks.indexOf(t);if(n>=0)return this.tasks.splice(n,1),this.taskMap.delete(t.fn),t;console.warn("Task",e,"has already run")}},mt.prototype.tasksRemainingCount=function(){return this.tasks.length};var ac=mt,T=ye(function(e){var t,n,r,a,o,i,s=0,u=!1,c=0,l=["notify","derive","domUI","dom","mutate"];n=new Tt("NOTIFY",{onComplete:function(){r.flush()},onFirstTask:function(){s?u=!0:n.flush()}}),r=new ec("DERIVE",{onComplete:function(){o.flush()},onFirstTask:function(){u=!0}}),o=new ac("DOM   ",{onComplete:function(){a.flush()},onFirstTask:function(){u=!0}}),a=new tc("DOM_UI",{onComplete:function(){i.flush()},onFirstTask:function(){u=!0}}),i=new Tt("MUTATE",{onComplete:function(){gi.lastTask=null},onFirstTask:function(){u=!0}});var f={Queue:Tt,PriorityQueue:ec,CompletionQueue:tc,DomOrderQueue:ac,notifyQueue:n,deriveQueue:r,domQueue:o,domUIQueue:a,mutateQueue:i,batch:{start:function(){++s===1&&(c++,t={number:c})},stop:function(){--s===0&&u&&(u=!1,n.flush())},isCollecting:function(){return s>0},number:function(){return c},data:function(){return t}},runAsTask:function(p,v){//!steal-remove-start
return p;//!steal-remove-end
},enqueueByQueue:function(p,v,g,h,m){p&&(f.batch.start(),l.forEach(function(w){var y=f[w+"Queue"],k=p[w];k!==void 0&&k.forEach(function(E){var S=h!=null?h(E,v,g):{};S.reasonLog=m,y.enqueue(E,v,g,S)})}),f.batch.stop())},lastTask:function(){return gi.lastTask},stack:function(p){for(var v=p||gi.lastTask,g=[];v;)g.unshift(v),v=v.meta.parentTask;return g},logStack:function(p){this.stack(p).forEach(function(v,g){var h=v.meta;g===0&&h&&h.reasonLog&&ft.log.apply(ft,h.reasonLog);var m=h&&h.log?h.log:[v.fn.name,v];ft.log.apply(ft,[v.meta.stack.name+" ran task:"].concat(m))})},taskCount:function(){return n.tasks.length+r.tasks.length+a.tasks.length+i.tasks.length},flush:function(){n.flush()},log:function(){n.log.apply(n,arguments),r.log.apply(r,arguments),a.log.apply(a,arguments),o.log.apply(o,arguments),i.log.apply(i,arguments)}};if(M.queues)throw new Error("You can't have two versions of can-queues, check your dependencies");e.exports=M.queues=f}),P=ye(function(e){var t=[],n=x.for("can.addParent"),r=x.for("can.getValue"),a={stack:t,start:function(o){var i={keyDependencies:new Map,valueDependencies:new Set,childDependencies:new Set,traps:null,ignore:0,name:o};return t.push(i),i},stop:function(){return t.pop()},add:function(o,i){var s=t[t.length-1];if(s&&s.ignore===0)if(s.traps)s.traps.push([o,i]);else if(i===void 0)s.valueDependencies.add(o);else{var u=s.keyDependencies.get(o);u||(u=new Set,s.keyDependencies.set(o,u)),u.add(i)}},addMany:function(o){var i=t[t.length-1];if(i)if(i.traps)i.traps.push.apply(i.traps,o);else for(var s=0,u=o.length;s<u;s++)this.add(o[s][0],o[s][1])},created:function(o){var i=t[t.length-1];i&&(i.childDependencies.add(o),o[n]&&o[n](i))},ignore:function(o){return function(){if(t.length){var i=t[t.length-1];i.ignore++;var s=o.apply(this,arguments);return i.ignore--,s}return o.apply(this,arguments)}},peekValue:function(o){if(!o||!o[r])return o;if(t.length){var i=t[t.length-1];i.ignore++;var s=o[r]();return i.ignore--,s}return o[r]()},isRecording:function(){var o=t.length,i=o&&t[o-1];return i&&i.ignore===0&&i},makeDependenciesRecord:function(o){return{traps:null,keyDependencies:new Map,valueDependencies:new Set,ignore:0,name:o}},makeDependenciesRecorder:function(){return a.makeDependenciesRecord()},trap:function(){if(t.length){var o=t[t.length-1],i=o.traps,s=o.traps=[];return function(){return o.traps=i,s}}return function(){return[]}},trapsCount:function(){return t.length?t[t.length-1].traps.length:0}};if(M.ObservationRecorder)throw new Error("You can't have two versions of can-observation-recorder, check your dependencies");e.exports=M.ObservationRecorder=a});function lg(e){if(e===Object.prototype)return!0;var t=Object.prototype.toString.call(e),n=t!=="[object Object]",r=t.indexOf("[object ")!==-1;return n&&r}function Rd(e,t){if(t===0)return d.size(e);if(d.size(e)===0)return 0;var n=0;return d.each(e,function(r){n+=Rd(r,t-1)}),n}function qd(e,t,n,r){if(e)if(r===n){if(!d.isMoreListLikeThanMapLike(e))throw new Error("can-key-tree: Map-type leaf containers are not supported yet.");d.addValues(t,d.toArray(e))}else d.each(e,function(a){qd(a,t,n+1,r)})}function eo(e,t,n,r){if(n===t.length){if(!d.isMoreListLikeThanMapLike(e))throw new Error("can-key-tree: Map-type leaf containers are not supported yet.");var a=d.toArray(e);r&&a.forEach(function(o){r.apply(null,t.concat(o))}),d.removeValues(e,a)}else d.each(e,function(o,i){eo(o,t.concat(i),n,r),d.deleteKeyValue(e,i)})}var jd=function(e,t){var n=e[0];d.isConstructorLike(n)?this.root=new n:this.root=n,this.callbacks=t||{},this.treeStructure=e,this.empty=!0};d.assign(jd.prototype,{add:function(e){if(e.length>this.treeStructure.length)throw new Error("can-key-tree: Can not add path deeper than tree.");for(var t=this.root,n=this.empty===!0,r=0;r<e.length-1;r++){var a=e[r],o=d.getKeyValue(t,a);if(!o){var i=this.treeStructure[r+1];o=lg(i.prototype)?new i:new i(a),d.setKeyValue(t,a,o)}t=o}if(!d.isMoreListLikeThanMapLike(t))throw new Error("can-key-tree: Map types are not supported yet.");return d.addValues(t,[e[e.length-1]]),n&&(this.empty=!1,this.callbacks.onFirst&&this.callbacks.onFirst.call(this)),this},getNode:function(e){for(var t=this.root,n=0;n<e.length;n++){var r=e[n];if(!(t=d.getKeyValue(t,r)))return}return t},get:function(e){var t=this.getNode(e);if(this.treeStructure.length===e.length)return t;var n=new this.treeStructure[this.treeStructure.length-1];return qd(t,n,e.length,this.treeStructure.length-1),n},delete:function(e,t){for(var n=this.root,r=[this.root],a=e[e.length-1],o=0;o<e.length-1;o++){var i=e[o],s=d.getKeyValue(n,i);if(s===void 0)return!1;r.push(s),n=s}if(e.length)if(e.length===this.treeStructure.length){if(!d.isMoreListLikeThanMapLike(n))throw new Error("can-key-tree: Map types are not supported yet.");t&&t.apply(null,e.concat(a)),d.removeValues(n,[a])}else{var u=d.getKeyValue(n,a);if(u===void 0)return!1;eo(u,e,this.treeStructure.length-1,t),d.deleteKeyValue(n,a)}else eo(n,[],this.treeStructure.length-1,t);for(o=r.length-2;o>=0&&d.size(n)===0;o--)n=r[o],d.deleteKeyValue(n,e[o]);return d.size(this.root)===0&&(this.empty=!0,this.callbacks.onEmpty&&this.callbacks.onEmpty.call(this)),!0},size:function(){return Rd(this.root,this.treeStructure.length-1)},isEmpty:function(){return this.empty}});var ht=jd,he=function(e,t,n,r){Object.defineProperty(e,t,{configurable:!0,get:function(){Object.defineProperty(this,t,{value:void 0,writable:!0});var a=n.call(this,e,t);return Object.defineProperty(this,t,{value:a,writable:!!r}),a},set:function(a){return Object.defineProperty(this,t,{value:a,writable:!!r}),a}})},to={on:function(e,t){this.handlers.add([t||"mutate",e])},off:function(e,t){e===void 0?t===void 0?this.handlers.delete([]):this.handlers.delete([t]):this.handlers.delete([t||"mutate",e])}},fg={"can.onValue":to.on,"can.offValue":to.off,"can.dispatch":function(e,t){var n=[];n=[this.handlers.getNode([]),this,[e,t]],T.enqueueByQueue.apply(T,n)},"can.getWhatIChange":function(){//!steal-remove-start
},"can.isBound":function(){return!this.handlers.isEmpty()}};function dg(){return new ht([Object,Array],{onFirst:this.onBound!==void 0&&this.onBound.bind(this),onEmpty:this.onUnbound!==void 0&&this.onUnbound.bind(this)})}var Kd=function(e){return d.assign(e,to),d.assignSymbols(e,fg),he(e,"handlers",dg,!0),e};Kd.addHandlers=function(e,t){return console.warn("can-event-queue/value: Avoid using addHandlers. Add onBound and onUnbound methods instead."),e.handlers=new ht([Object,Array],t),e};var ha=Kd;function pg(e){this.oldEventSet!==void 0&&this.oldEventSet.delete(e)!==!1||d.onKeyValue(this.observable,e,this.onDependencyChange,"notify")}function hg(e,t){e.forEach(pg,{onDependencyChange:this.onDependencyChange,observable:t,oldEventSet:this.oldDependencies.keyDependencies.get(t)})}function vg(e){d.offKeyValue(this.observable,e,this.onDependencyChange,"notify")}function Bd(e,t){e.forEach(vg,{onDependencyChange:this.onDependencyChange,observable:t})}function gg(e){this.oldDependencies.valueDependencies.delete(e)===!1&&d.onValue(e,this.onDependencyChange,"notify")}function zd(e){d.offValue(e,this.onDependencyChange,"notify")}var _n,mg=function(e){e.newDependencies.keyDependencies.forEach(hg,e),e.oldDependencies.keyDependencies.forEach(Bd,e),e.newDependencies.valueDependencies.forEach(gg,e),e.oldDependencies.valueDependencies.forEach(zd,e)},yg=function(e,t){e.keyDependencies.forEach(Bd,{onDependencyChange:t}),e.valueDependencies.forEach(zd,{onDependencyChange:t})},Hd=function(){},bg=function(){for(var e=0,t=_n.length;e<t;e++)d.offValue(_n[e],Hd);_n=null},wg=function(e){var t=e.computeInstance||e;d.onValue(t,Hd),_n||(_n=[],setTimeout(bg,10)),_n.push(t)},kg=x.for("can.dispatch");x.for("can.getChangesDependencyRecord");var sc=x.for("can.getValueDependencies");function Ie(e,t,n){this.deriveQueue=T.deriveQueue,this.func=e,this.context=t,this.options=n||{priority:0,isObservable:!0},this.bound=!1,this._value=void 0,this.newDependencies=P.makeDependenciesRecord(),this.oldDependencies=null;var r=this;this.onDependencyChange=function(a){r.dependencyChange(this,a)},this.update=this.update.bind(this)}ha(Ie.prototype),d.assign(Ie.prototype,{onBound:function(){this.bound=!0,this.oldDependencies=this.newDependencies,P.start(this._name),this._value=this.func.call(this.context),this.newDependencies=P.stop(),mg(this)},dependencyChange:function(e,t){if(this.bound===!0){var n=[];n=[this.update,this,[],{priority:this.options.priority,element:this.options.element}],this.deriveQueue.enqueue.apply(this.deriveQueue,n)}},update:function(){if(this.bound===!0){var e=this._value;this.oldValue=null,this.onBound(),e!==this._value&&this[kg](this._value,e)}},onUnbound:function(){this.bound=!1,yg(this.newDependencies,this.onDependencyChange),this.newDependencies=P.makeDependenciesRecord()},get:function(){return this.options.isObservable&&P.isRecording()&&(P.add(this),this.bound===!1&&Ie.temporarilyBind(this)),this.bound===!0?(this.deriveQueue.tasksRemainingCount()>0&&Ie.updateChildrenAndSelf(this),this._value):this.func.call(this.context)},hasDependencies:function(){var e=this.newDependencies;return this.bound?e.valueDependencies.size+e.keyDependencies.size>0:void 0},log:function(){//!steal-remove-start
}}),Object.defineProperty(Ie.prototype,"value",{get:function(){return this.get()}});var xg={"can.getValue":Ie.prototype.get,"can.isValueLike":!0,"can.isMapLike":!1,"can.isListLike":!1,"can.valueHasDependencies":Ie.prototype.hasDependencies,"can.getValueDependencies":function(){if(this.bound===!0){var e=this.newDependencies,t={};return e.keyDependencies.size&&(t.keyDependencies=e.keyDependencies),e.valueDependencies.size&&(t.valueDependencies=e.valueDependencies),t}},"can.getPriority":function(){return this.options.priority},"can.setPriority":function(e){this.options.priority=e},"can.setElement":function(e){this.options.element=e,this.deriveQueue=T.domQueue||T.deriveQueue}};//!steal-remove-start
d.assignSymbols(Ie.prototype,xg),Ie.updateChildrenAndSelf=function(e){if(e.update!==void 0&&e.deriveQueue.isEnqueued(e.update)===!0)return e.deriveQueue.flushQueuedTask(e.update),!0;if(e[sc]){var t=!1;return(e[sc]().valueDependencies||[]).forEach(function(n){Ie.updateChildrenAndSelf(n)===!0&&(t=!0)}),t}return!1};var oc={addAll:"addMany"};["add","addAll","ignore","trap","trapsCount","isRecording"].forEach(function(e){Ie[e]=function(){var t=oc[e]?oc[e]:e;return console.warn("can-observation: Call "+t+"() on can-observation-recorder."),P[t].apply(this,arguments)}}),Ie.prototype.start=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onBound()},Ie.prototype.stop=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onUnbound()},Ie.temporarilyBind=wg;var Z=M.Observation=Ie,uc=function(){return{keyDependencies:new Map,valueDependencies:new Set}},no=function(e){return typeof e=="function"},Eg=x.for("can.getWhatIChange"),Dg=x.for("can.getKeyDependencies"),Sg=x.for("can.getValueDependencies"),cc=function(e,t){if(no(e[Eg]))return arguments.length===2?d.getWhatIChange(e,t):d.getWhatIChange(e)},lc=function(e){return e==null||!Object.keys(e).length||e.keyDependencies&&!e.keyDependencies.size&&e.valueDependencies&&!e.valueDependencies.size},fc=function(e,t,n){var r=arguments.length===3,a=r?function(i,s,u){var c,l=i.get(s);return l&&l.mutateDependenciesForKey.has(u)&&(c=l.mutateDependenciesForKey.get(u)),c}(e,t,n):function(i,s){var u,c=i.get(s);if(c){var l=c.mutateDependenciesForValue;l.keyDependencies.size&&((u=u||{}).keyDependencies=l.keyDependencies),l.valueDependencies.size&&((u=u||{}).valueDependencies=l.valueDependencies)}return u}(e,t),o=r?function(i,s){if(no(i[Dg]))return d.getKeyDependencies(i,s)}(t,n):function(i){if(no(i[Sg]))return d.getValueDependencies(i)}(t);if(!lc(a)||!lc(o))return q(q({},a?{mutate:a}:null),o?{derive:o}:null)},La=new WeakMap,Tg={addMutatedBy:function(e){return function(t,n,r){var a=arguments.length===3;if(arguments.length===2&&(r=n,n=void 0),!r.keyDependencies&&!r.valueDependencies){var o=new Set;o.add(r),r={valueDependencies:o}}var i=e.get(t);i||(i={mutateDependenciesForKey:new Map,mutateDependenciesForValue:uc()},e.set(t,i)),a&&!i.mutateDependenciesForKey.get(n)&&i.mutateDependenciesForKey.set(n,uc());var s=a?i.mutateDependenciesForKey.get(n):i.mutateDependenciesForValue;r.valueDependencies&&d.addValues(s.valueDependencies,r.valueDependencies),r.keyDependencies&&d.each(r.keyDependencies,function(u,c){var l=s.keyDependencies.get(c);l||(l=new Set,s.keyDependencies.set(c,l)),d.addValues(l,u)})}}(La),deleteMutatedBy:function(e){return function(t,n,r){var a=arguments.length===3,o=e.get(t);if(arguments.length===2&&(r=n,n=void 0),!r.keyDependencies&&!r.valueDependencies){var i=new Set;i.add(r),r={valueDependencies:i}}var s=a?o.mutateDependenciesForKey.get(n):o.mutateDependenciesForValue;r.valueDependencies&&d.removeValues(s.valueDependencies,r.valueDependencies),r.keyDependencies&&d.each(r.keyDependencies,function(u,c){var l=s.keyDependencies.get(c);l&&(d.removeValues(l,u),l.size||s.keyDependencies.delete(c))})}}(La),getDependencyDataOf:function(e){return function(t,n){var r=arguments.length===2,a=r?fc(e,t,n):fc(e,t),o=r?cc(t,n):cc(t);if(a||o)return q(q({},o?{whatIChange:o}:null),a?{whatChangesMe:a}:null)}}(La)};//!steal-remove-start
var ro=function(e,t){var n=Ue.parts(t),r=n.length-1;//!steal-remove-start
var a=new Z(function(){var s;return Js.walk(e,n,function(u,c){c===r&&(s=u.value)}),s}),o=function(s){Js.set(e,n,s)};Object.defineProperty(a,"value",{get:a.get,set:o});var i={"can.setValue":o};//!steal-remove-start
//!steal-remove-end
return d.assignSymbols(a,i)},Ud=function(){//!steal-remove-start
//!steal-remove-end
},Lg=x.for("can.dispatch");function cn(e){this._value=e}ha(cn.prototype),d.assignMap(cn.prototype,{log:Ud,get:function(){return P.add(this),this._value},set:function(e){var t=this._value;this._value=e,this[Lg](e,t)}}),Object.defineProperty(cn.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}});var Ig={"can.getValue":cn.prototype.get,"can.setValue":cn.prototype.set,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}};//!steal-remove-start
d.assignSymbols(cn.prototype,Ig);var _e=M.SimpleObservable=cn,Cg=P.ignore(d.getValue.bind(d));function at(e,t,n){function r(){return e.call(t,this.lastSetValue.get())}this.lastSetValue=new _e(n),this.handler=this.handler.bind(this),this.observation=new Z(r,this)}ha(at.prototype),d.assignMap(at.prototype,{log:Ud,constructor:at,handler:function(e){var t,n=this._value;this._value=e,T.enqueueByQueue(this.handlers.getNode([]),this,[e,n],null,t)},onBound:function(){this.bound||(this.bound=!0,this.activate())},activate:function(){d.onValue(this.observation,this.handler,"notify"),this._value=Cg(this.observation)},onUnbound:function(){this.bound=!1,d.offValue(this.observation,this.handler,"notify")},set:function(e){var t=this.lastSetValue.get();d.isObservableLike(t)&&d.isValueLike(t)&&!d.isObservableLike(e)?d.setValue(t,e):e!==t&&this.lastSetValue.set(e)},get:function(){return P.isRecording()&&(P.add(this),this.bound||this.onBound()),this.bound===!0?this._value:this.observation.get()},hasDependencies:function(){return d.valueHasDependencies(this.observation)},getValueDependencies:function(){return d.getValueDependencies(this.observation)}}),Object.defineProperty(at.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}}),d.assignSymbols(at.prototype,{"can.getValue":at.prototype.get,"can.setValue":at.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return d.getPriority(this.observation)},"can.setPriority":function(e){d.setPriority(this.observation,e)},"can.valueHasDependencies":at.prototype.hasDependencies,"can.getValueDependencies":at.prototype.getValueDependencies});var vt=at,Rt=M.value={bind:function(e,t){return ro(e,t)},from:function(e,t){var n=function(){return Js.get(e,t)};//!steal-remove-start
return new Z(n)},returnedBy:function(e,t,n){return e.length===1?new vt(e,t,n):new Z(e,t)},to:function(e,t){var n=ro(e,t);//!steal-remove-start
//!steal-remove-end
var r={"can.getValue":null};//!steal-remove-start
//!steal-remove-end
return d.assignSymbols(n,r)},with:function(e){return new _e(e)}},Og=/\=\=/,Pg=/([A-Z]+)([A-Z][a-z])/g,_g=/([a-z\d])([A-Z])/g,Mg=/([a-z\d])([A-Z])/g,Ag=/"/g,Vg=/'/g,Ng=/-+(.)?/g,Rg=/[a-z][A-Z]/g,Ia=function(e){return""+(e==null||isNaN(e)&&""+e=="NaN"?"":e)},io={esc:function(e){return Ia(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(Ag,"&#34;").replace(Vg,"&#39;")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return Ia(e).replace(Ng,function(t,n){return n?n.toUpperCase():""})},hyphenate:function(e){return Ia(e).replace(Rg,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()})},pascalize:function(e){return io.capitalize(io.camelize(e))},underscore:function(e){return e.replace(Og,"/").replace(Pg,"$1_$2").replace(_g,"$1_$2").replace(Mg,"_").toLowerCase()},undHash:/_|-/},Fd=io,dc=x.for("can.initializing");//!steal-remove-start
var qg;//!steal-remove-end
var Ca=0;//!steal-remove-start
var pc;//!steal-remove-end
var ao,Be=function(){if(arguments.length)return Be.extend.apply(Be,arguments)};try{ao=!0}catch{ao=!1}var jg=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return n&&(n.get||n.set)?n:null},Oa=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,writable:!0,enumerable:!1,value:n})};d.assignMap(Be,{constructorExtends:!0,_created:function(){},newInstance:function(){var e,t=this.instance();if(t.setup){if(Object.defineProperty(t,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),Object.defineProperty(t,dc,{configurable:!0,enumerable:!1,value:!0,writable:!0}),(e=t.setup.apply(t,arguments))instanceof Be.ReturnValue)return e.value;t.__inSetup=!1,t[dc]=!1}return t.init&&t.init.apply(t,e||arguments),t},_inherit:ao?function(e,t,n){var r;for(var a in n=n||e,e)(r=jg(e,a))?this._defineProperty(n,t,a,r):Be._overwrite(n,t,a,e[a])}:function(e,t,n){for(var r in n=n||e,e)Be._overwrite(n,t,r,e[r])},_defineProperty:function(e,t,n,r){Object.defineProperty(e,n,r)},_overwrite:function(e,t,n,r){Object.defineProperty(e,n,{value:r,configurable:!0,enumerable:!0,writable:!0})},setup:function(e){var t=e.defaults?d.serialize(e.defaults):{};this.defaults=d.assignDeepMap(t,this.defaults)},instance:function(){Ca=1;var e=new this;return Ca=0,e},extend:function(e,t,n){var r=e,a=t,o=n;typeof r!="string"&&(o=a,a=r,e=r=null),o||(o=a,a=null),o=o||{};var i,s,u=this,c=this.prototype;s=this.instance(),Be._inherit(o,c,s),r||(a&&a.shortName?r=a.shortName:this.shortName&&(r=this.shortName));//!steal-remove-start
var l=r?r.replace(qg,"_"):"Constructor";//!steal-remove-end
function f(){if(!Ca)return this&&this.constructor===i||!arguments.length||!i.constructorExtends?i.newInstance.apply(i,arguments):i.extend.apply(i,arguments)}for(var p in i=typeof pc=="function"?pc(l,f):function(){return f.apply(this,arguments)},u)u.hasOwnProperty(p)&&(i[p]=u[p]);if(Be._inherit(a,u,i),d.assignMap(i,{constructor:i,prototype:s}),r!==void 0){if(Object.getOwnPropertyDescriptor){var v=Object.getOwnPropertyDescriptor(i,"name");v&&!v.configurable||Object.defineProperty(i,"name",{writable:!0,value:r,configurable:!0})}i.shortName=r}Oa(i.prototype,"constructor",i),Be._created(e,i);var g=[u].concat(Array.prototype.slice.call(arguments)),h=i.setup.apply(i,g);return i.init&&i.init.apply(i,h||g),i},ReturnValue:function(e){this.value=e}}),Oa(Be.prototype,"setup",function(){}),Oa(Be.prototype,"init",function(){});var Kg=M.Construct=Be;function Pa(e){var t=this.eventHandlers[e];if(t)for(var n=t.slice(),r=this.getKeyValue(e),a=0;a<n.length;a++)n[a](r)}function Le(){this.eventHandlers={},this.properties={}}Le.prototype.define=function(e,t,n){return n===void 0&&(n=!0),this.properties[e]||(this.properties[e]={default:t,value:t,enableCache:n}),this},Le.prototype.getKeyValue=function(e){var t=this.properties[e];if(t)return typeof t.value=="function"?t.cachedValue?t.cachedValue:t.enableCache?(t.cachedValue=t.value(),t.cachedValue):t.value():t.value},Le.prototype.makeExport=function(e){return function(t){return arguments.length===0?this.getKeyValue(e):t!=null?(typeof t=="function"?this.setKeyValue(e,function(){return t}):this.setKeyValue(e,t),t):void this.deleteKeyValue(e)}.bind(this)},Le.prototype.offKeyValue=function(e,t){if(this.properties[e]){var n=this.eventHandlers[e];if(n){var r=n.indexOf(t);n.splice(r,1)}}return this},Le.prototype.onKeyValue=function(e,t){return this.properties[e]&&(this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)),this},Le.prototype.deleteKeyValue=function(e){var t=this.properties[e];return t!==void 0&&(t.value=t.default,t.cachedValue=void 0,Pa.call(this,e)),this},Le.prototype.setKeyValue=function(e,t){if(!this.properties[e])return this.define(e,t);var n=this.properties[e];return n.value=t,n.cachedValue=void 0,Pa.call(this,e),this},Le.prototype.reset=function(){for(var e in this.properties)this.properties.hasOwnProperty(e)&&(this.properties[e].value=this.properties[e].default,this.properties[e].cachedValue=void 0,Pa.call(this,e));return this},d.assignSymbols(Le.prototype,{"can.getKeyValue":Le.prototype.getKeyValue,"can.setKeyValue":Le.prototype.setKeyValue,"can.deleteKeyValue":Le.prototype.deleteKeyValue,"can.onKeyValue":Le.prototype.onKeyValue,"can.offKeyValue":Le.prototype.offKeyValue});var Bg=Le,ce=ye(function(e){var t=new Bg;if(M.globals)throw new Error("You can't have two versions of can-globals, check your dependencies");e.exports=M.globals=t});ce.define("global",function(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof process=="object"&&{}.toString.call(process)==="[object process]"?Xs:window});var et=ce.makeExport("global");ce.define("document",function(){return ce.getKeyValue("global").document});var ie=ce.makeExport("document");ce.define("isNode",function(){return typeof process=="object"&&{}.toString.call(process)==="[object process]"});var so=ce.makeExport("isNode");ce.define("isBrowserWindow",function(){var e=ce.getKeyValue("isNode");return typeof window<"u"&&typeof document<"u"&&e===!1});var Wd=ce.makeExport("isBrowserWindow");function hc(e){return e.ownerDocument||ie()}function _a(e){if(!e||!e.nodeName)return e===window;var t=e.nodeType;return t===1||t===9||t===11}var oo=!1;(function(){if(Wd()){var e="fix_synthetic_events_on_disabled_test",t=document.createElement("input");t.disabled=!0;var n=setTimeout(function(){oo=!0},50),r=function o(){clearTimeout(n),t.removeEventListener(e,o)};t.addEventListener(e,r);try{var a=document.create("HTMLEvents");a.initEvent(e,!1),t.dispatchEvent(a)}catch{r(),oo=!0}}})();var Fi={createEvent:function(e,t,n,r){var a,o=hc(e).createEvent("HTMLEvents");if(typeof t=="string")a=t;else for(var i in a=t.type,t)o[i]===void 0&&(o[i]=t[i]);return n===void 0&&(n=!0),o.initEvent(a,n,r),o},addDomContext:function(e,t){return _a(e)&&(t=Array.prototype.slice.call(t,0)).unshift(e),t},removeDomContext:function(e,t){return _a(e)||(e=(t=Array.prototype.slice.call(t,0)).shift()),{context:e,args:t}},isDomEventTarget:_a,getTargetDocument:hc,forceEnabledForDispatch:function(e,t){return oo&&function(n,r){var a=r.type,o=a==="inserted"||a==="removed",i=!!n.disabled;return o&&i}(e,t)}};function yi(){this._registry={}}yi.prototype.has=function(e){return!!this._registry[e]},yi.prototype.get=function(e){return this._registry[e]},yi.prototype.add=function(e,t){if(!e)throw new Error("An EventDefinition must be provided");if(typeof e.addEventListener!="function")throw new TypeError("EventDefinition addEventListener must be a function");if(typeof e.removeEventListener!="function")throw new TypeError("EventDefinition removeEventListener must be a function");if(typeof(t=t||e.defaultEventType)!="string")throw new TypeError("Event type must be a string, not "+t);if(this.has(t))throw new Error('Event "'+t+'" is already registered');this._registry[t]=e;var n=this;return function(){n._registry[t]=void 0}};var vc=function(e){return e==="focus"||e==="blur"},Ge={_eventRegistry:new yi,addEvent:function(e,t){return this._eventRegistry.add(e,t)},addEventListener:function(e,t){if(Ge._eventRegistry.has(t))return Ge._eventRegistry.get(t).addEventListener.apply(Ge,arguments);var n=Array.prototype.slice.call(arguments,1);return e.addEventListener.apply(e,n)},removeEventListener:function(e,t){if(Ge._eventRegistry.has(t))return Ge._eventRegistry.get(t).removeEventListener.apply(Ge,arguments);var n=Array.prototype.slice.call(arguments,1);return e.removeEventListener.apply(e,n)},addDelegateListener:function(e,t,n,r){Ge._eventTree.add([e,t,n,r])},removeDelegateListener:function(e,t,n,r){Ge._eventTree.delete([e,t,n,r])},dispatch:function(e,t,n,r){var a=Fi.createEvent(e,t,n,r),o=Fi.forceEnabledForDispatch(e,a);o&&(e.disabled=!1);var i=e.dispatchEvent(a);return o&&(e.disabled=!0),i}};Ge._eventTree=function(e){var t=function(n){var r=function(a){this.element=a,this.events={},this.delegated={}};return d.assignSymbols(r.prototype,{"can.setKeyValue":function(a,o){var i=this.delegated[a]=function(s){var u=s.target,c=!0,l=s.stopPropagation;s.stopPropagation=function(){l.apply(this,arguments),c=!1};var f=s.stopImmediatePropagation;s.stopImmediatePropagation=function(){f.apply(this,arguments),c=!1};do{var p=u===document?document.documentElement:u,v=p.matches||p.msMatchesSelector;d.each(o,function(g,h){v&&v.call(p,h)&&g.forEach(function(m){m.call(p,s)})}),u=u.parentNode}while(u&&u!==s.currentTarget&&c)};this.events[a]=o,n.addEventListener(this.element,a,i,vc(a))},"can.getKeyValue":function(a){return this.events[a]},"can.deleteKeyValue":function(a){n.removeEventListener(this.element,a,this.delegated[a],vc(a)),delete this.delegated[a],delete this.events[a]},"can.getOwnEnumerableKeys":function(){return Object.keys(this.events)}}),r}(e);return new ht([Map,t,Object,Array])}(Ge);var Oe,oe=M.domEvents=Ge,gc=Fi.isDomEventTarget,mc=x.for("can.meta"),Kr=x.for("can.dispatchInstanceBoundChange"),yc=x.for("can.dispatchInstanceOnPatches"),zg=x.for("can.onKeyValue"),Hg=x.for("can.offKeyValue"),bc=x.for("can.onEvent"),wc=x.for("can.offEvent"),Ug=x.for("can.onValue"),Fg=x.for("can.offValue"),Wg=x.for("can.initializing");function $d(e,t){t.handlers||(t.handlers=new ht([Object,Object,Object,Array],{onFirst:function(){e._eventSetup!==void 0&&e._eventSetup();var n=e.constructor;n[Kr]!==void 0&&e instanceof n&&n[Kr](e,!0)},onEmpty:function(){e._eventTeardown!==void 0&&e._eventTeardown();var n=e.constructor;n[Kr]!==void 0&&e instanceof n&&n[Kr](e,!1)}})),t.listenHandlers||(t.listenHandlers=new ht([Map,Map,Object,Array]))}var Ne=function(e){var t=e[mc];return t||(t={},d.setKeyValue(e,mc,t)),$d(e,t),t};function Qd(e,t,n,r){arguments.length&&d.isPrimitive(e)&&(r=n,n=t,t=e,e=this.context),typeof t=="function"&&(r=n,n=t,t=void 0),typeof n=="string"&&(r=n,n=void 0);var a=[];return e&&(a.push(e),(t||n||r)&&(a.push(t),(r||n)&&(a.push(r||this.defaultQueue),n&&a.push(n)))),a}var gn={dispatch:function(e,t){//!steal-remove-end
if(this.__inSetup!==!0&&this[Wg]!==!0){typeof e=="string"&&(e={type:e});var n=Ne(this);//!steal-remove-start
typeof n._log=="function"&&n._log.call(this,e,t);//!steal-remove-end
var r=n.handlers,a=e.type!==void 0&&r.getNode([e.type]),o=e.patches&&this.constructor[yc],i=e.patches!==void 0&&r.getNode(["can.patches","onKeyValue"]),s=e.keyChanged!==void 0&&r.getNode(["can.keys","onKeyValue"]),u=o||a||i||s;if(u&&T.batch.start(),a&&(a.onKeyValue&&T.enqueueByQueue(a.onKeyValue,this,t,e.makeMeta,e.reasonLog),a.event)){e.batchNum=T.batch.number();var c=[e].concat(t);T.enqueueByQueue(a.event,this,c,e.makeMeta,e.reasonLog)}s&&T.enqueueByQueue(s,this,[e.keyChanged],e.makeMeta,e.reasonLog),i&&T.enqueueByQueue(i,this,[e.patches],e.makeMeta,e.reasonLog),o&&this.constructor[yc](this,e.patches),u&&T.batch.stop()}return e},addEventListener:function(e,t,n){return Ne(this).handlers.add([e,"event",n||"mutate",t]),this},removeEventListener:function(e,t,n){if(e===void 0){var r=Ne(this).handlers,a=r.getNode([]);Object.keys(a).forEach(function(o){r.delete([o,"event"])})}else t||n?t?Ne(this).handlers.delete([e,"event",n||"mutate",t]):Ne(this).handlers.delete([e,"event",n||"mutate"]):Ne(this).handlers.delete([e,"event"]);return this},one:function(e,t){var n=function(){return Oe.off.call(this,e,n),t.apply(this,arguments)};return Oe.on.call(this,e,n),this},listenTo:function(e,t,n,r){return d.isPrimitive(e)&&(r=n,n=t,t=e,e=this),typeof t=="function"&&(r=n,n=t,t=void 0),Ne(this).listenHandlers.add([e,t,r||"mutate",n]),Oe.on.call(e,t,n,r||"mutate"),this},stopListening:function(){var e=Qd.apply({context:this,defaultQueue:"mutate"},arguments);return Ne(this).listenHandlers.delete(e,function(t,n,r,a){Oe.off.call(t,n,a,r)}),this},on:function(e,t,n){if(gc(this))typeof t=="string"?oe.addDelegateListener(this,e,t,n):oe.addEventListener(this,e,t,n);else if(this[bc])this[bc](e,t,n);else if("addEventListener"in this)this.addEventListener(e,t,n);else if(this[zg])d.onKeyValue(this,e,t,n);else{if(e||!this[Ug])throw new Error("can-event-queue: Unable to bind "+e);d.onValue(this,t,n)}return this},off:function(e,t,n){if(gc(this))typeof t=="string"?oe.removeDelegateListener(this,e,t,n):oe.removeEventListener(this,e,t,n);else if(this[wc])this[wc](e,t,n);else if("removeEventListener"in this)this.removeEventListener(e,t,n);else if(this[Hg])d.offKeyValue(this,e,t,n);else{if(e||!this[Fg])throw new Error("can-event-queue: Unable to unbind "+e);d.offValue(this,t,n)}return this}},kc={"can.onKeyValue":function(e,t,n){Ne(this).handlers.add([e,"onKeyValue",n||"mutate",t])},"can.offKeyValue":function(e,t,n){Ne(this).handlers.delete([e,"onKeyValue",n||"mutate",t])},"can.isBound":function(){return!Ne(this).handlers.isEmpty()},"can.getWhatIChange":function(e){//!steal-remove-start
},"can.onPatches":function(e,t){Ne(this).handlers.add(["can.patches","onKeyValue",t||"notify",e])},"can.offPatches":function(e,t){Ne(this).handlers.delete(["can.patches","onKeyValue",t||"notify",e])}};function Yt(e,t,n){Object.defineProperty(e,t,{enumerable:!1,value:n})}Yt(Oe=function(e){return d.assignMap(e,gn),d.assignSymbols(e,kc)},"addHandlers",$d),Yt(Oe,"stopListeningArgumentsToKeys",Qd),gn.bind=gn.addEventListener,gn.unbind=gn.removeEventListener,d.assignMap(Oe,gn),d.assignSymbols(Oe,kc),Yt(Oe,"start",function(){console.warn("use can-queues.batch.start()"),T.batch.start()}),Yt(Oe,"stop",function(){console.warn("use can-queues.batch.stop()"),T.batch.stop()}),Yt(Oe,"flush",function(){console.warn("use can-queues.flush()"),T.flush()}),Yt(Oe,"afterPreviousEvents",function(e){console.warn("don't use afterPreviousEvents"),T.mutateQueue.enqueue(function(){T.mutateQueue.enqueue(e)}),T.flush()}),Yt(Oe,"after",function(e){console.warn("don't use after"),T.mutateQueue.enqueue(e),T.flush()});var ee=Oe,yr=Kg.extend("SimpleMap",{setup:function(e){this._data={},e&&typeof e=="object"&&this.attr(e)},attr:function(e,t){var n=this;if(arguments.length===0){P.add(this,"can.keys");var r={};return d.eachKey(this._data,function(s,u){P.add(this,u),r[u]=s},this),r}if(arguments.length>1){var a=this._data.hasOwnProperty(e),o=this._data[e];if(this._data[e]=t,o!==t){//!steal-remove-start
//!steal-remove-end
var i={keyChanged:a?void 0:e,type:e};//!steal-remove-start
this.dispatch(i,[t,o])}}else{if(typeof e!="object")return e!=="constructor"?(P.add(this,e),this._data[e]):this.constructor;T.batch.start(),d.eachKey(e,function(s,u){n.attr(u,s)}),T.batch.stop()}},serialize:function(){return d.serialize(this,Map)},get:function(){return this.attr.apply(this,arguments)},set:function(){return this.attr.apply(this,arguments)},log:function(e){//!steal-remove-start
}});ee(yr.prototype);var $g={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":yr.prototype.get,"can.setKeyValue":yr.prototype.set,"can.deleteKeyValue":function(e){var t;if(this._data.hasOwnProperty(e)){var n=this._data[e];delete this._data[e],t={keyChanged:e,type:e},this.dispatch(t,[void 0,n])}},"can.getOwnEnumerableKeys":function(){return P.add(this,"can.keys"),Object.keys(this._data)},"can.assignDeep":function(e){T.batch.start(),d.assignMap(this,e),T.batch.stop()},"can.updateDeep":function(e){T.batch.start(),d.updateMap(this,e),T.batch.stop()},"can.keyHasDependencies":function(e){return!1},"can.getKeyDependencies":function(e){},"can.hasOwnKey":function(e){return this._data.hasOwnProperty(e)}};//!steal-remove-start
d.assignSymbols(yr.prototype,$g);var an=yr,Qg=function(e,t){function n(){return Reflect.construct(e,arguments,this.constructor)}function r(o,i){n[i]||Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(o,i))}t===void 0&&(t=Object.getPrototypeOf(Object)),n.prototype=Object.create(e.prototype),n.prototype.constructor=n;let a=e;for(;a!==t&&a!==null;)Object.getOwnPropertyNames(a).forEach(function(o){r(a,o)}),Object.getOwnPropertySymbols(a).forEach(function(o){r(a,o)}),a=Object.getPrototypeOf(a);return n};function sn(e,t,n){function r(){this.resolveCalled=!1,this.inGetter=!0;var a=e.call(t,this.lastSetValue.get(),this.bound===!0?this.resolve:void 0);if(this.inGetter=!1,a!==void 0?this.resolve(a):this.resolveCalled&&this.resolve(this._value),this.bound!==!0)return a}//!steal-remove-start
this.resolve=this.resolve.bind(this),this.lastSetValue=new _e(n),this.handler=this.handler.bind(this),this.observation=new Z(r,this)}sn.prototype=Object.create(vt.prototype),sn.prototype.constructor=sn,sn.prototype.handler=function(e){e!==void 0&&vt.prototype.handler.apply(this,arguments)};var Gg=P.ignore(d.getValue.bind(d));sn.prototype.activate=function(){d.onValue(this.observation,this.handler,"notify"),this.resolveCalled||(this._value=Gg(this.observation))},sn.prototype.resolve=function(e){this.resolveCalled=!0;var t=this._value;//!steal-remove-end
if(this._value=e,!this.inGetter){var n=[this.handlers.getNode([]),this,[e,t],null];//!steal-remove-start
T.enqueueByQueue.apply(T,n)}};var Gd=sn,Yg=x.for("can.getChangesDependencyRecord"),uo=x.for("can.meta");function yt(e,t,n,r){this.resolver=P.ignore(e),this.context=t,this._valueOptions={resolve:this.resolve.bind(this),listenTo:this.listenTo.bind(this),stopListening:this.stopListening.bind(this),lastSet:new _e(n)},this.update=this.update.bind(this),this.contextHandlers=new WeakMap,this.teardown=null,this.binder={},this[uo]=d.assignMap({},r)}function Jg(e,t,n,r){ee.off.call(e,t,r,n)}yt.prototype=Object.create(vt.prototype),d.assignMap(yt.prototype,{constructor:yt,listenTo:function(e,t,n,r){d.isPrimitive(e)&&(n=t,t=e,e=this.context),typeof t=="function"&&(n=t,t=void 0);var a=this;//!steal-remove-start
//!steal-remove-end
var o=n.bind(this.context);o[Yg]=function(){var i=new Set;return i.add(a),{valueDependencies:i}},this.contextHandlers.set(n,o),ee.listenTo.call(this.binder,e,t,o,r||"notify")},stopListening:function(){var e=this.binder[x.for("can.meta")],t=e&&e.listenHandlers;if(t){var n=ee.stopListeningArgumentsToKeys.call({context:this.context,defaultQueue:"notify"});t.delete(n,Jg)}return this},resolve:function(e){if(this._value=e,this.isBinding)return this.lastValue=this._value,e;if(this._value!==this.lastValue){var t={};//!steal-remove-start
T.batch.start(),T.deriveQueue.enqueue(this.update,this,[],t),T.batch.stop()}return e},update:function(){if(this.lastValue!==this._value){var e=this.lastValue;this.lastValue=this._value,T.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])}},activate:function(){this.isBinding=!0,this.teardown=this.resolver.call(this.context,this._valueOptions),this.isBinding=!1},onUnbound:function(){this.bound=!1,ee.stopListening.call(this.binder),this.teardown!=null&&(this.teardown(),this.teardown=null)},set:function(e){this._valueOptions.lastSet.set(e)},get:function(){if(P.isRecording()&&(P.add(this),this.bound||this.onBound()),this.bound===!0)return this._value;this[uo].resetUnboundValueInGet&&(this._value=void 0);var e=function(){};this.on(e);var t=this._value;return this.off(e),t},hasDependencies:function(){var e=!1;if(this.bound){var t=this.binder[uo];e=!!(t&&t.listenHandlers).size()}return e},getValueDependencies:function(){if(this.bound){var e=this.binder[x.for("can.meta")],t=e&&e.listenHandlers,n=new Map,r=new Set;if(t&&(d.each(t.root,function(o,i){d.each(o,function(s,u){if(u===void 0)r.add(i);else{var c=n.get(i);c||(c=new Set,n.set(i,c)),c.add(u)}})}),r.size||n.size)){var a={};return n.size&&(a.keyDependencies=n),r.size&&(a.valueDependencies=r),a}}}}),d.assignSymbols(yt.prototype,{"can.getValue":yt.prototype.get,"can.setValue":yt.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return this.priority||0},"can.setPriority":function(e){this.priority=e},"can.valueHasDependencies":yt.prototype.hasDependencies,"can.getValueDependencies":yt.prototype.getValueDependencies});var Yd=yt,xc=x.for("can.meta");function Jd(e,t){t.lifecycleHandlers||(t.lifecycleHandlers=new ht([Object,Array])),t.instancePatchesHandlers||(t.instancePatchesHandlers=new ht([Object,Array]))}function Ma(e){var t=e[xc];return t||(t={},d.setKeyValue(e,xc,t)),Jd(0,t),t}var bi={};function Ec(e,t,n){bi["can.on"+e]=function(r,a){Ma(this)[n].add([a||"mutate",r])},bi["can.off"+e]=function(r,a){Ma(this)[n].delete([a||"mutate",r])},bi["can."+t]=function(r,a){T.enqueueByQueue(Ma(this)[n].getNode([]),this,[r,a])}}function Xd(e){return d.assignSymbols(e,bi)}Ec("InstancePatches","dispatchInstanceOnPatches","instancePatchesHandlers"),Ec("InstanceBoundChange","dispatchInstanceBoundChange","lifecycleHandlers"),Object.defineProperty(Xd,"addHandlers",{enumerable:!1,value:Jd});var fu=Xd,F=ye(function(e,t){var n=x.for("can.isMember"),r=x.for("can.new"),a=x.for("can.getSchema"),o=x.for("can.baseType"),i=x.for("can.strictTypeOf"),s=t;function u(D){return function(){return{type:"Or",values:D}}}function c(D){return this[n](D)?D:d.convert(D,this[o])}function l(D){return this[n](D)?D:function(L,_){var A=Fd.capitalize(typeof _),H=new Error("Type value "+typeof _=="string"?'"'+_+'"':_+" ("+A+") is not of type "+d.getName(L)+".");throw H.type="can-type-error",H}(this[o],D)}function f(D){return D!=="false"&&D!=="0"&&!!D}var p=Object.freeze([null,void 0]);function v(D){var L={};return L[r]=c,L[n]=function(_){return n in _?_[n]:function(A){return A instanceof _}}(D),L[o]=D,L[a]=u([D]),D[i]=L[i]=L,L}function g(D){if(typeof D=="function"){if(d.hasOwnKey(D,i))return D[i]}else if(i in D)return D[i];return v(D)}function h(D){var L=D[n];return function(_){return _==null||L.call(this,_)}}function m(D){return u(d.getSchema(D).values.concat(p))}function w(D,L,_){_ in L&&(D[_]=L[_])}function y(D,L){return"type."+D+"("+d.getName(L)+")"}function k(D){return!d.isPrimitive(D)&&r in D&&n in D}d.each({boolean:Boolean,number:Number,string:String},function(D,L){(function(_,A){var H=v(_);_===Boolean&&(H[r]=f,H[a]=u([!0,!1])),H[n]=function(te){return typeof te===A}})(D,L)});var E=d.assignSymbols({},{"can.new":function(D){return D},"can.isMember":function(){return!0}});function S(D,L){var _=D(L);function A(H){var te=d.getSchema(this).keys,ae={};return d.eachKey(H||{},function(ve,pe){ae[pe]=d.convert(ve,te[pe])}),d.new(L,ae)}return _[a]=function(){var H=d.getSchema(L),te=d.assignMap({},H);return te.keys={},d.eachKey(H.keys,function(ae,ve){te.keys[ve]=D(ae)}),te},d.setName(A,"Converted<"+d.getName(L)+">"),A.prototype=_,A}var I={};function V(D){var L=new WeakMap;return function(_){if(L.has(_))return L.get(_);var A=D.call(this,_);return L.set(_,A),A}}I[r]=function(D){return 0|D},I[n]=function(D){return typeof D=="number"&&isFinite(D)&&Math.floor(D)===D},I[a]=u([Number]),d.setName(I,"Integer"),t.check=V(function(D){var L=Object.create(g(D));return L[r]=l,w(L,D,n),w(L,D,a),d.setName(L,y("check",D)),L}),t.convert=V(function(D){var L=Object.create(g(D));return w(L,D,n),w(L,D,a),d.setName(L,y("convert",D)),L}),t.maybe=V(function(D){var L=g(D),_={};_[r]={value:l},_[n]={value:h(L)},_[a]={value:m(L)};var A=Object.create(L,_);return d.setName(A,y("maybe",D)),A}),t.maybeConvert=V(function(D){var L=g(D),_={};_[n]={value:h(L)},_[a]={value:m(L)};var A=Object.create(L,_);return d.setName(A,y("maybeConvert",D)),A}),t.check=t.convert,t.maybe=t.maybeConvert,t.Any=E,t.Integer=I,t.late=function(D){var L,_=function(){return L=s.normalize(D()),_=function(){return L},L};return d.assignSymbols({},{"can.new":function(A){return d.new(_(),A)},"can.isMember":function(A){return _()[n](A)}})},t.isTypeObject=k,t.normalize=function(D){if(d.isPrimitive(D))throw new Error("can-type: Unable to normalize primitive values.");return k(D)?D:s.check(D)},t.all=S,t.convertAll=S.bind(null,t.convert),M.type=t});let W;F.check,F.convert,F.maybe,F.maybeConvert,F.Any,F.Integer,F.late,F.isTypeObject,F.normalize,F.all,F.convertAll;const Zd=Symbol.for("can.new"),Dc=Symbol.for("can.serialize"),Ht=Symbol.for("can.initializing"),Xg=Symbol.for("can.isMember"),Sc=Symbol.for("can.hasBeenDefined"),wi=Symbol.for("can.meta");let Re,ne,co,ep,ur,tp;function lo(){throw new Error("This is not currently implemented.")}const Zg=function(){try{return tp=async function(){}.constructor,!0}catch{return!1}}(),np=P.ignore(d.getValue.bind(d));let Tc=Object.defineProperty;//!steal-remove-start
//!steal-remove-end
function _r(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}function Lc(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1})}function Aa(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];for(const o of Object.getOwnPropertyNames(e))e.hasOwnProperty(o)&&t.call(e,o,Object.getOwnPropertyDescriptor(e,o),...r)}var pn=W=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a,o=Object.create(n?n.dataInitializers:null),i=Object.create(n?n.computedInitializers:null),s=new Set;const u=ep(t,n,e,r);if(u.dataInitializers=o,u.computedInitializers=i,u.required=s,d.eachKey(u.definitions,function(l,f){l.required===!0&&s.add(f),W.property(e,f,l,o,i,u.defaultDefinition)}),e.hasOwnProperty("_data"))for(a in o)he(e._data,a,o[a].bind(e),!0);else he(e,"_data",function(){const l=this,f={};for(const p in o)he(f,p,o[p].bind(l),!0);return f});if(e.hasOwnProperty("_computed"))for(a in i)he(e._computed,a,i[a].bind(e));else he(e,"_computed",function(){const l=this,f=Object.create(null);for(const p in i)he(f,p,i[p].bind(l));return f});(function(l){const f=Object.getOwnPropertyNames(l),p="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(l):[];return f.concat(p)})(Re).forEach(function(l){Object.defineProperty(e,l,{enumerable:!1,value:Re[l],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:u,configurable:!0,writable:!0});const c=Symbol.iterator||Symbol.for("iterator");return e[c]||_r(e,c,function(){return new W.Iterator(this)}),u};W.extensions=function(){},W.isEnumerable=function(e){return!(typeof e=="object"&&("serialize"in e?!e.serialize:e.get||e.async||e.value))},W.property=function(e,t,n,r,a,o){const i=W.extensions.apply(this,arguments);i&&(n=co(t,i,o||{},e));const s=n.type;//!steal-remove-start
for(let h of["get","set","value"]){const m=n[h]&&typeof n[h];if(m&&m!=="function")return void ft.error(`can-observable-object: "${h}" for property ${d.getName(e)}.${t} is expected to be a function, but it's a ${m}.`)}//!steal-remove-end
if(s&&function(h){for(const m in h)if(m!=="type")return!1;return!0}(n)&&s===s.Any)return void Tc(e,t,{get:ne.get.data(t),set:ne.set.events(t,ne.get.data(t),ne.set.data(t),ne.eventType.data(t)),enumerable:!0,configurable:!0});n.type=s;let u,c=n.get||n.async||n.value?"computed":"data",l=ne.read[c](t),f=ne.get[c](t),p=ne.set[c](t);//!steal-remove-start
//!steal-remove-end
let v=function(h){return h};s&&(v=ne.set.type(t,s,v));const g=ne.set.events(t,l,p,ne.eventType[c](t));n.value?a[t]=ne.resolver(t,n,v):n.default!==void 0&&(u=P.ignore(ne.get.defaultValue(t,n,v,g))),n.get?a[t]=ne.compute(t,n.get,u):n.async?a[t]=ne.compute(t,function(h){return function(m,w){let y=h.call(this,w,m);if(!d.isPromise(y))return y;y.then(w)}}(n.async),u):u&&(r[t]=u),n.get&&n.set?p=ne.set.setter(t,n.set,ne.read.lastSet(t),p,!0):n.set?p=ne.set.setter(t,n.set,l,g,!1):c==="data"?p=g:n.get&&n.get.length<1&&(p=function(){//!steal-remove-start
//!steal-remove-end
}),s&&(p=ne.set.type(t,s,p)),Tc(e,t,{get:f,set:p,enumerable:W.isEnumerable(n),configurable:!0})},W.makeDefineInstanceKey=function(e){e[Symbol.for("can.defineInstanceKey")]=function(t,n){W.hooks.finalizeClass(this);const r=this.prototype._define;n&&n.value!==void 0&&(n.default=n.value,n.type=F.Any,delete n.value);const a=ur(t,n,r.defaultDefinition,this);a&&typeof a=="object"?(W.property(this.prototype,t,a,r.dataInitializers,r.computedInitializers,r.defaultDefinition),r.definitions[t]=a):r.methods[t]=a,this.prototype.dispatch({action:"can.keys",type:"can.keys",target:this.prototype})}},W.Constructor=function(e,t){const n=function(a){Object.defineProperty(this,Ht,{configurable:!0,enumerable:!1,value:!0,writable:!0}),W.setup.call(this,a,t),this[Ht]=!1},r=W(n.prototype,e);return fu(n),W.makeDefineInstanceKey(n,r),n},ne={computeObj:function(e,t,n){const r={oldValue:void 0,compute:n,count:0,handler:function(a){let o=r.oldValue;r.oldValue=a,e.dispatch({action:"prop",key:t,value:a,oldValue:o,type:t,target:e},[a,o])}};return r},resolver:function(e,t,n){const r=ne.get.defaultValue(e,t,n);return function(){const a=r.call(this),o=ne.computeObj(this,e,new Yd(t.value,this,a,{resetUnboundValueInGet:!0}));//!steal-remove-end
//!steal-remove-start
return o}},compute:function(e,t,n){return function(){const r=this,a=n&&n.call(this);let o,i;//!steal-remove-end
return o=t.length===0?new Z(t,r):t.length===1?new vt(t,r,a):new Gd(t,r,a),i=ne.computeObj(r,e,o),i}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){d.setValue(this._computed[e].compute,t)}},events:function(e,t,n){return function(r){if(this[Ht])n.call(this,r);else{const a=t.call(this);if(r!==a){let o;n.call(this,r),o={patches:[{type:"set",key:e,value:r}],action:"prop",key:e,value:r,oldValue:a,type:e,target:this},this.dispatch(o,[r,a])}}}},eventDispatcher:function(e,t,n,r){if(!e[Ht]&&r!==n){const a={patches:[{type:"set",key:t,value:r}],action:"prop",key:t,value:r,oldValue:n,type:t,target:e};//!steal-remove-start
ee.dispatch.call(e,a,[r,n])}},setter:function(e,t,n,r,a){return function(o){//!steal-remove-end
T.batch.start();const i=n.call(this),s=t.call(this,o,i);if(a)if(s!==void 0)i!==s&&r.call(this,s),T.batch.stop();else{if(t.length===0)return r.call(this,o),void T.batch.stop();if(t.length!==1)return void T.batch.stop();T.batch.stop()}else if(s!==void 0)r.call(this,s),T.batch.stop();else{if(t.length===0)return r.call(this,o),void T.batch.stop();if(t.length!==1)return void T.batch.stop();r.call(this,void 0),T.batch.stop()}}},type:function(e,t,n){function r(o){return n.call(this,t.call(this,o,e))}return(a=t)&&(a.canDefineType===!0||a[Zd])?t.canDefineType?r:function(o){//!steal-remove-start
return n.call(this,d.convert(o,t))}:r;var a}},eventType:{data:function(e){return function(t,n){return n!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return d.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){const t=this._computed[e].compute;if(t.lastSetValue)return d.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,n,r){return function(){let a=t.default;if(a!==void 0&&(typeof a=="function"&&a.isAGetter&&(a=a.call(this)),a=n.call(this,a)),t.set){let o,i=!0;return ne.set.setter(e,t.set,function(){},function(u){i?o=u:r.call(this,u)},t.get).call(this,a),i=!1,o}return a}},data:function(e){return function(){return this[Ht]||P.add(this,e),this._data[e]}},computed:function(e){return function(){const t=this._computed[e].compute;return P.isRecording()&&(P.add(this,e),d.isBound(t)||Z.temporarilyBind(t)),np(t)}}}},W.behaviors=["get","set","value","type","serialize"];const em=function(e,t,n,r,a,o){if(t==="enumerable")e.serialize=!!r[t];else if(t==="type"){const i=r[t];i!==void 0&&(e[t]=i)}else{const i=n.get||n.value;n.get&&(i.isAGetter=!0),t==="async"&&i.length===1&&function(s){return!!Zg&&s&&s instanceof tp}(i)&&ft.warn(`${d.getName(o)}: async property [${a}] should not be an async function and also use the resolve() argument. Remove the argument and return a value from the async function instead.`),e[t]=i}};function rp(e,t){const n=e._computed&&e._computed[t];n&&n.compute&&(n.count?n.count++:(n.count=1,d.onValue(n.compute,n.handler,"notify"),n.oldValue=np(n.compute)))}function ip(e,t){const n=e._computed&&e._computed[t];n&&(n.count===1?(n.count=0,d.offValue(n.compute,n.handler,"notify")):n.count--)}co=function(e,t,n,r){let a={};if(Aa(t,function(i,s){em(a,i,s,t,e,r)}),d.eachKey(n,function(i,s){a[s]===void 0&&s!=="type"&&(a[s]=i)}),t.type){const i=t.type,s=i[Dc];s&&(a.serialize=function(u){return s.call(u)}),a.type=F.normalize(i)}const o=!a.type&&(!n.type||n.type&&n.typeSetByDefault);if(a.hasOwnProperty("default")&&(typeof a.default=="function"&&!a.default.isAGetter&&o&&(a.type=F.normalize(Function)),d.isPrimitive(a.default)&&o&&(a.default===null||a.default===void 0?a.type=F.Any:a.type=F.normalize(a.default.constructor))),!a.type){const i=d.assignMap({},n);a=d.assignMap(i,a)}return d.size(a)===0&&(a.type=F.Any,a.typeSetByDefault=!0),a},ur=function(e,t,n,r){let a,o;return d.isPrimitive(t)?(o=t==null?F.Any:n.typeSetByDefault?F.normalize(t.constructor):n.type,a={default:t,type:o}):t&&(t[Dc]||t[Zd])?a=t[Xg]?{type:t}:{type:F.normalize(t)}:typeof t=="function"?a=d.isConstructorLike(t)?{type:F.normalize(t)}:{default:t,type:Function}:Array.isArray(t)?a={type:F.normalize(Array)}:d.isPlainObject(t)&&(a=t),a?co(e,a,n,r):t},ep=function(e,t,n,r){const a=Object.create(t?t.definitions:null);let o,i={};function s(u,c,l){let f;if(f=c.get||c.set?{get:c.get,set:c.set}:c.value,u==="constructor"||l&&typeof f=="function")i[u]=f;else{const p=ur(u,f,o,n),v=typeof p;p&&v==="object"&&d.size(p)>0?a[u]=p:v==="function"&&(i[u]=p)}}return o=r?ur("*",r,{},n):Object.create(null),Aa(n,s,!0),Aa(e,s),r&&_r(e,"*",r),{definitions:a,methods:i,defaultDefinition:o}},Re=ee({}),q(Re,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e){return rp(this,e),ee.addEventListener.apply(this,arguments)},removeEventListener:function(e){return ip(this,e),ee.removeEventListener.apply(this,arguments)}}),Re.on=Re.bind=Re.addEventListener,Re.off=Re.unbind=Re.removeEventListener;const tm=Symbol.for("can.onKeyValue"),nm=Symbol.for("can.offKeyValue");d.assignSymbols(Re,{"can.onKeyValue":function(e){return rp(this,e),ee[tm].apply(this,arguments)},"can.offKeyValue":function(e){return ip(this,e),ee[nm].apply(this,arguments)}}),delete Re.one,W.finalizeInstance=function(){Lc(this,"constructor",this.constructor),Lc(this,wi,Object.create(null))},W.setup=function(e,t){const n=new Set(this._define.required),r=this._define.definitions,a=Object.create(null),o=this;if(d.eachKey(e,function(i,s){if(n.has(s)&&n.delete(s),r[s]!==void 0)o[s]=i;else{if(t)throw new Error(`The type ${d.getName(o.constructor)} is sealed, but the property [${s}] has no definition.`);W.expando(o,s,i)}}),d.size(a)>0&&_r(this,"_instanceDefinitions",a),n.size){let i;const s=Array.from(n);let u=d.getName(this);throw i=n.size===1?`${u}: Missing required property [${s[0]}].`:`${u}: Missing required properties [${s.join(", ")}].`,new Error(i)}};const rm=function(e){return e};W.normalizeTypeDefinition=F.normalize,W.expando=function(e,t,n){if(W._specialKeys[t])return!0;const r=e._define.definitions;if(r&&r[t])return;let a=e._instanceDefinitions;if(!a){if(Object.isSealed(e)){let o=`Cannot set property [${t}] on sealed instance of ${d.getName(e)}`;throw new Error(o)}Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),a=e._instanceDefinitions}if(!a[t]){const o=e._define.defaultDefinition||{type:lo};return W.property(e,t,o,{},{}),o.type?e._data[t]=W.make.set.type(t,o.type,rm).call(e,n):e._data[t]=lo(),a[t]=o,e[Ht]||(T.batch.start(),e.dispatch({action:"can.keys",type:"can.keys",target:e}),Object.prototype.hasOwnProperty.call(e._data,t)?e.dispatch({action:"add",key:t,type:t,value:e._data[t],target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]):e.dispatch({action:"set",type:"set",value:e._data[t],target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]),T.batch.stop()),!0}},W.replaceWith=he,W.eventsProto=Re,W.defineConfigurableAndNotEnumerable=_r,W.make=ne,W.getDefinitionOrMethod=ur,W._specialKeys={_data:!0,_computed:!0};let Va={};W.makeSimpleGetterSetter=function(e){if(Va[e]===void 0){const t=ne.set.events(e,ne.get.data(e),ne.set.data(e),ne.eventType.data(e));Va[e]={get:ne.get.data(e),set:function(n){return t.call(this,lo())},enumerable:!0,configurable:!0}}return Va[e]},W.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet=typeof e.get=="function"},W.Iterator.prototype.next=function(){let e;if(this.definitions.length){if(e=this.definitions.shift(),this.obj._define.definitions[e].get)return this.next()}else{if(!this.instanceDefinitions.length)return{value:void 0,done:!0};e=this.instanceDefinitions.shift()}return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}},W.updateSchemaKeys=function(e,t){for(const n in t){const r=t[n];r.serialize!==!1&&(r.type?e.keys[n]=r.type:e.keys[n]=function(a){return a},t[n].identity===!0&&e.identity.push(n))}return e},W.hooks={finalizeClass:function(e){if(!e.hasOwnProperty(Sc)){let t=e.prototype,n=typeof e.props=="object"?e.props:typeof e.define=="object"?e.define:{};W(t,n,null,e.propertyDefaults),e[Sc]=!0}},initialize:function(e,t){const n=!e.hasOwnProperty(wi),r=e.constructor.seal;n&&W.finalizeInstance.call(e),e[wi].initialized||(_r(e,Ht,!0),W.setup.call(e,t,r),e[Ht]=!1,e[wi].initialized=!0)},expando:W.expando,normalizeTypeDefinition:F.normalize};const im={defineExpando:pn.expando,reflectSerialize:function(e){const t=this._define.definitions,n=this._define.defaultDefinition;return this.forEach(function(r,a){const o=t[a];(r=o&&typeof o.serialize=="function"?o.serialize.call(this,r,a):n&&typeof n.serialize=="function"?n.serialize.call(this,r,a):d.serialize(r))!==void 0&&(e[a]=r)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,n){t!==void 0&&(e[n]=d.unwrap(t))}),e},log:function(e){const t=this,n=function(o){return typeof o=="string"?JSON.stringify(o):o},r=function(o){const i=Symbol.for("can.meta");let s=o[i];return s||(s={},d.setKeyValue(o,i,s)),s}(t),a=r.allowedLogKeysSet||new Set;r.allowedLogKeysSet=a,e&&a.add(e),r._log=function(o,i){const s=o.type;s==="can.onPatches"||e&&!a.has(s)||s==="can.keys"||e&&!a.has(s)||(s==="add"||s==="remove"?ft.log(d.getName(t),`
 how   `,n(s),`
 what  `,n(i[0]),`
 index `,n(i[1])):ft.log(d.getName(t),`
 key `,n(s),`
 is  `,n(i[0]),`
 was `,n(i[1])))}},deleteKey:function(e){const t=this._instanceDefinitions;if(t&&Object.prototype.hasOwnProperty.call(t,e)&&!Object.isSealed(this)){delete t[e],delete this[e],T.batch.start(),this.dispatch({action:"can.keys",type:"can.keys",target:this});const n=this._data[e];n!==void 0&&(delete this._data[e],this.dispatch({action:"delete",key:e,oldValue:n,type:e,target:this,patches:[{type:"delete",key:e}]},[void 0,n])),T.batch.stop()}else this.set(e,void 0);return this}};var Zn=im;const{updateSchemaKeys:am,hooks:sm,isEnumerable:om}=pn,um=Symbol.for("can.getSchema");function Ic(e){const t=[];for(let n in e)om(e[n])&&t.push(n);return t}function cm(e){T.batch.start(),d.assignMap(this,e||{}),T.batch.stop()}function lm(e){T.batch.start(),d.isListLike(e)?d.updateList(this,e):d.updateMap(this,e||{}),T.batch.stop()}function Cc(e){T.batch.start(),d.assignDeepMap(this,e||{}),T.batch.stop()}function Oc(e){T.batch.start(),d.isListLike(e)?d.updateDeepList(this,e):d.updateDeepMap(this,e||{}),T.batch.stop()}function fm(e,t){Zn.defineExpando(this,e,t)||(this[e]=t)}function Pc(e){const t=this[e];return t!==void 0||e in this||Object.isSealed(this)?t:(P.add(this,e),this[e])}var ap=function(e){return class extends e{static[um](){sm.finalizeClass(this);let t=this.prototype._define,n=t?t.definitions:{};return am({type:"map",identity:[],keys:{}},n)}get(t){return t?Pc.call(this,t):d.unwrap(this,Map)}set(t,n){return typeof t=="object"?n===!0?Oc.call(this,t):Cc.call(this,t):fm.call(this,t,n),this}assignDeep(t){return Cc.call(this,t),this}updateDeep(t){return Oc.call(this,t),this}assign(t){return cm.call(this,t),this}update(t){return lm.call(this,t),this}serialize(){return d.serialize(this,Map)}deleteKey(){return Zn.deleteKey.apply(this,arguments)}forEach(t,n,r){function a(o,i,s){return d.eachKey(o,i,s)}if(r!==!1)return a(this,t,n);P.ignore(a)(this,t,n)}static[Symbol.for("can.new")](){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new this(...n)}get[Symbol.for("can.isMapLike")](){return!0}get[Symbol.for("can.isListLike")](){return!1}get[Symbol.for("can.isValueLike")](){return!1}[Symbol.for("can.getKeyValue")](){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pc.apply(this,n)}[Symbol.for("can.deleteKeyValue")](){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zn.deleteKey.call(this,...n)}[Symbol.for("can.getOwnKeys")](){const t=d.getOwnEnumerableKeys(this);if(this._computed){const n=d.getOwnKeys(this._computed);let r;for(let a=0;a<n.length;a++)r=n[a],t.indexOf(r)<0&&t.push(r)}return t}[Symbol.for("can.getOwnEnumerableKeys")](){return P.add(this,"can.keys"),P.add(Object.getPrototypeOf(this),"can.keys"),Ic(this._define.definitions).concat(Ic(this._instanceDefinitions))}[Symbol.for("can.serialize")](){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zn.reflectSerialize.apply(this,n)}[Symbol.for("can.unwrap")](){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zn.reflectUnwrap.apply(this,n)}[Symbol.for("can.hasKey")](t){return t in this._define.definitions||this._instanceDefinitions!==void 0&&t in this._instanceDefinitions}[Symbol.for("can.updateDeep")](){return this.updateDeep(...arguments)}}};const dm=pn.make.set.eventDispatcher,_c=x.for("can.initializing");let sp=!1;(function(){if(typeof Proxy=="function"){let e=new Proxy(class{fn(){}},{get:(t,n,r)=>(n==="__proto__"&&(sp=!0),Reflect.get(t,n,r))});new class extends e{fn(){super.fn()}}().fn()}})();var op=function(e){const t=new WeakSet;function n(){//!steal-remove-start
//!steal-remove-end
let i=Reflect.construct(e,arguments,this.constructor);return t.add(i),i}n.instances=t;const r=Object.create(e.prototype),a=sp?function(i,s,u){return this[_c]||typeof s=="symbol"||s==="__proto__"||P.add(u,s),Reflect.get(i,s,u)}:function(i,s,u){return this[_c]||typeof s=="symbol"||P.add(u,s),Reflect.get(i,s,u)},o={get:a,set(i,s,u,c){if(typeof s=="symbol")return Reflect.set(i,s,u,c),!0;if(s in i||!t.has(c)){let l=Reflect.get(i,s,c);Reflect.set(i,s,u,c),dm(c,s,l,u)}else pn.expando(c,s,u);return!0}};return n.prototype=typeof Proxy=="function"?new Proxy(r,o):r,n},up=function(e){let t=class extends e{};return fu(t),ee(t),t};const{hooks:Na,makeDefineInstanceKey:pm}=pn,Ra=Symbol.for("can.constructorProps"),Mc=Symbol.for("can.rendered");var hm=function(e){let t=class extends op(e){constructor(n){super(),Na.finalizeClass(this.constructor),this[Ra]=n}initialize(n){super.initialize&&super.initialize(n),Na.initialize(this,n||this[Ra])}render(n){super.render&&super.render(n),Na.initialize(this,n||this[Ra]),this[Mc]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[Mc]||this.render()}};return t=up(ap(t)),pm(t),t},vn={createConstructorFunction:Qg,makeDefineInstanceKey:pn.makeDefineInstanceKey,mixins:pn.hooks,mixinElement:hm,mixinMapProps:ap,mixinProxy:op,mixinTypeEvents:up};const{createConstructorFunction:vm,makeDefineInstanceKey:gm,mixins:qa,mixinMapProps:mm,mixinProxy:ym,mixinTypeEvents:bm}=vn;let ki=class extends ym(Object){constructor(e){super(),qa.finalizeClass(this.constructor),qa.initialize(this,e);const t=new Proxy(this,{defineProperty(n,r,a){const o=n.constructor.props;let i=a.value;return["_instanceDefinitions","_data","_computed"].indexOf(r)>=0?Reflect.defineProperty(n,r,a):i?o&&o[r]||n.constructor.propertyDefaults?(n.set(r,i),!0):qa.expando(n,r,i):Reflect.defineProperty(n,r,a)}});return this.constructor.instances.add(t),t}};ki=bm(mm(ki)),gm(ki);var br=M.ObservableObject=vm(ki);const{mixins:wm}=vn,Ac=Symbol.for("can.meta"),xi={assignNonEnumerable:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})},shouldRecordObservationOnAllKeysExceptFunctionsOnProto:function(e,t){return t.preventSideEffects===0&&!e.isAccessor&&(e.targetHasOwnKey||!e.protoHasKey&&!Object.isSealed(t.target)||e.protoHasKey&&typeof targetValue!="function")},dispatchIndexEvent:function(e,t,n,r){var a=+e;if(isNaN(a)){var o=""+e;this.dispatch({type:o,key:o,action:t,value:n,oldValue:r,target:this},[n,r])}else{var i=this._define.definitions["#"];if(t==="set"){this.dispatch({type:a,action:t,key:a,value:n,oldValue:r},[n,r]);let s=this[Ac];if(!("preventSideEffects"in s)||s.preventSideEffects===0){let u=[{index:a,deleteCount:1,insert:[n],type:"splice"}];xi.dispatchLengthPatch.call(this,t,u,this.length,this.length)}}else if(t==="add"){i&&typeof i.added=="function"&&P.ignore(i.added).call(this,n,a),this.dispatch({type:a,action:t,key:a,value:n,oldValue:r},[n,r]);let s=this[Ac];if(!("preventSideEffects"in s)||s.preventSideEffects===0){let u=[{index:a,deleteCount:0,insert:[n],type:"splice"}];xi.dispatchLengthPatch.call(this,t,u,this.length,this.length-1)}}else t==="remove"&&i&&typeof i.removed=="function"&&P.ignore(i.removed).call(this,r,a)}},dispatchLengthPatch:function(e,t,n,r){const a={type:"length",key:"length",action:e,value:n,oldValue:r,patches:t};//!steal-remove-start
ee.dispatch.call(this,a,[n,r])},convertItem:function(e,t){if(e.items){const n=wm.normalizeTypeDefinition(e.items.type||e.items);return d.convert(t,n)}return t},convertItems:function(e,t){if(t.length&&e.items)for(let n=0,r=t.length;n<r;n++)t[n]=xi.convertItem(e,t[n]);return t}};var cp=xi,km=Symbol.for("can.meta");const xm=Symbol.for("can.computedPropertyDefinitions"),Em=Symbol.for("can.onKeyValue"),Dm=Symbol.for("can.offKeyValue");function er(e,t,n){this.instance=e,this.prop=t,this.observation=n,this.forward=this.forward.bind(this)}function Vc(e,t){var n=e[km],r=n.target[xm];if(r!==void 0){var a=r[t];if(a!==void 0)return n.computedKeys[t]===void 0&&(n.computedKeys[t]=new er(e,t,a(e,t))),n.computedKeys[t]}}er.prototype.bind=function(){this.bindingCount++,this.bindingCount===1&&this.observation.on(this.forward,"notify")},er.prototype.unbind=function(){this.bindingCount--,this.bindingCount===0&&this.observation.off(this.forward,"notify")},er.prototype.forward=function(e,t){ee.dispatch.call(this.instance,{type:this.prop,key:this.prop,target:this.instance,value:e,oldValue:t},[e,t])},er.prototype.bindingCount=0;const fo={bind:function(e,t){let n=Vc(e,t);n!==void 0&&n.bind()},addKeyDependencies:function(e){let t=e[Em],n=e[Dm];d.assignSymbols(e,{"can.onKeyValue":function(r){return fo.bind(this,r),t.apply(this,arguments)},"can.offKeyValue":function(r){return fo.unbind(this,r),n.apply(this,arguments)},"can.getKeyDependencies":function(r){var a=Vc(this,r);if(a!==void 0)return{valueDependencies:new Set([a.observation])}}})}};var Sm=fo;const{assignNonEnumerable:Tm,convertItem:Lm,dispatchIndexEvent:Nc,shouldRecordObservationOnAllKeysExceptFunctionsOnProto:Im}=cp,{mixins:Cm}=vn,Om=Object.prototype.hasOwnProperty,{isSymbolLike:ja}=d,lp=Symbol.for("can.meta"),Wi=new WeakMap,fp=new WeakSet,$i=Object.create(null);Object.getOwnPropertySymbols(ee).forEach(function(e){Tm($i,e,ee[e])}),Sm.addKeyDependencies($i);d.eachKey({push:function(e,t){return[{index:e.length-t.length,deleteCount:0,insert:t,type:"splice"}]},pop:function(e){return[{index:e.length,deleteCount:1,insert:[],type:"splice"}]},shift:function(){return[{index:0,deleteCount:1,insert:[],type:"splice"}]},unshift:function(e,t){return[{index:0,deleteCount:0,insert:t,type:"splice"}]},splice:function(e,t){return[{index:t[0],deleteCount:t[1],insert:t.slice(2),type:"splice"}]},sort:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]},reverse:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]}},function(e,t){var n=Array.prototype[t],r=function(){var a=this[lp],o=a.preventSideEffects===0,i=a.target.length;a.preventSideEffects++;var s=n.apply(a.target,arguments),u=e(a.target,Array.from(arguments),i);if(o===!0){//!steal-remove-start
d.getName(a.proxy)+""+t;var c={type:"length",key:"length",value:a.target.length,oldValue:i,patches:u};//!steal-remove-end
//!steal-remove-start
ee.dispatch.call(a.proxy,c,[a.target.length,i])}return a.preventSideEffects--,s};//!steal-remove-start
Wi.set(n,r),fp.add(r)});const Br={get(e,t,n){if(ja(t))return e[t];let r=Wi.get(e);P.add(r,t.toString());const a=!ja(t)&&+t;return Number.isInteger(a)&&P.add(r,"length"),Reflect.get(e,t,n)},set(e,t,n,r){let a=Wi.get(e),o=!ja(t)&&+t;return Number.isInteger(o)&&(t=o),function(i,s,u,c,l){let f,p,v=Om.call(u,i),g=Object.getOwnPropertyDescriptor(u,i);if(g&&g.set)g.set.call(c,s);else if(f=u[i],p=f!==s,p){let h=typeof i;h!=="string"||i in u?(h==="number"&&(s=Lm(u.constructor,s)),u[i]=s,l(v,f)):Cm.expando(u,i,s)}}(t,n,e,a,function(i,s){Number.isInteger(t)&&Nc.call(r,t,i?n!==void 0?"set":"remove":"add",n,s)}),!0},deleteProperty(e,t){let n=this.target[t],r=delete this.target[t];return r&&this.preventSideEffects===0&&n!==void 0&&Nc.call(this.proxy,t,"remove",void 0,n),r},ownKeys(){P.add(this.proxy,"can.keys");let e=new Set(Object.getOwnPropertyNames(this.target).concat(Object.getOwnPropertySymbols(this.target)).concat(Object.getOwnPropertySymbols(this.proxyKeys)));return Array.from(e)}};var Pm=function(){return class extends Array{constructor(){super(...arguments);let e=Object.create($i);e.constructor=this.constructor;let t=function(n,r){let a={target:n,proxyKeys:r.proxyKeys!==void 0?r.proxyKeys:Object.create($i),computedKeys:Object.create(null),options:r,preventSideEffects:0};return a.proxyKeys[lp]=a,a.proxy=new Proxy(n,{get:Br.get.bind(a),set:Br.set.bind(a),ownKeys:Br.ownKeys.bind(a),deleteProperty:Br.deleteProperty.bind(a),meta:a}),ee.addHandlers(a.proxy,a),a.proxy}(this,{proxyKeys:e,shouldRecordObservation:Im});return Wi.set(this,t),fp.add(t),t}}};const{createConstructorFunction:_m,makeDefineInstanceKey:Mm,mixins:Ka,mixinMapProps:Am,mixinTypeEvents:Vm}=vn,{convertItem:Nm,convertItems:Ba,dispatchLengthPatch:Rm}=cp,qm=Pm(),Rc="can.patches",jm=Symbol.for("can.onKeyValue"),Km=Symbol.for("can.offKeyValue"),za=Symbol.for("can.meta"),Bm=Vm(Am(qm));class Ei extends Bm{constructor(t,n){if(typeof t=="number")super(t);else{if(arguments.length>0&&!function(r){return d.isListLike(r)&&typeof r!="string"}(t))throw new Error("can-observable-array: Unexpected argument: "+typeof t);super()}Ka.finalizeClass(this.constructor),Ka.initialize(this,n||{});for(let r=0,a=t&&t.length;r<a;r++)this[r]=Nm(this.constructor,t[r]);return new Proxy(this,{defineProperty(r,a,o){if(a==="items")throw new Error("ObservableArray does not support a class field named items. Try using a different name or using static items");if(a==="_instanceDefinitions")return Reflect.defineProperty(r,a,o);let i=o.value;const s=r.constructor.props;return s&&s[a]||r.constructor.propertyDefaults?i?(r.set(a,i),!0):Reflect.defineProperty(r,a,o):Ka.expando(r,a,i)}})}static get[Symbol.species](){return this}static[Symbol.for("can.new")](t){return new this(t||[])}push(){return super.push(...arguments)}unshift(){return super.unshift(...arguments)}filter(t){if(typeof t=="object"){let n=t;t=function(r){for(let a in n)if(r[a]!==n[a])return!1;return!0}}return super.filter(t)}forEach(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Array.prototype.forEach.apply(this,n)}splice(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let a,o,i,s=n[0],u=n[1],c=[],l=n.length>2;for(s=s||0,a=0,o=n.length-2;a<o;a++)i=a+2,c.push(n[i]),this[a+s]!==n[i]&&(l=!1);if(l&&this.length<=c.length)return c;u===void 0&&(u=n[1]=this.length-s),T.batch.start();var f=super.splice.apply(this,n);return T.batch.stop(),f}static convertsTo(t){const n=F.convert(t),r=class extends this{static get items(){return n}},a=`ConvertedObservableArray<${d.getName(t)}>`;return d.setName(r,a),r}[Symbol.for("can.splice")](t,n,r){return this.splice(...[t,n].concat(r))}[Symbol.for("can.onPatches")](t,n){this[jm](Rc,t,n)}[Symbol.for("can.offPatches")](t,n){this[Km](Rc,t,n)}get[Symbol.for("can.isListLike")](){return!0}[Symbol.for("can.getOwnEnumerableKeys")](){let t=super[Symbol.for("can.getOwnEnumerableKeys")](),n=new Set([...Object.keys(this),...t]);return Array.from(n)}}var zm={push:function(e,t){return[{index:e.length-t.length,deleteCount:0,insert:t,type:"splice"}]},pop:function(e,t,n){return[{index:e.length,deleteCount:n>0?1:0,type:"splice"}]},shift:function(e,t,n){return[{index:0,deleteCount:n>0?1:0,type:"splice"}]},unshift:function(e,t){return[{index:0,deleteCount:0,insert:t,type:"splice"}]},splice:function(e,t,n){const r=t[0]<0?Math.max(n+t[0],0):Math.min(n,t[0]);return[{index:r,deleteCount:Math.max(0,Math.min(t[1],n-r)),insert:t.slice(2),type:"splice"}]},sort:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]},reverse:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]}};const qc={push:function(e,t){return Ba(e.constructor,t)},unshift:function(e,t){return Ba(e.constructor,t)},splice:function(e,t){return t.slice(0,2).concat(Ba(e.constructor,t.slice(2)))}};d.eachKey(zm,function(e,t){const n=Ei.prototype[t];Ei.prototype[t]=function(){const r=this.length;let a=Array.from(arguments);qc[t]&&(a=qc[t](this,a)),this[za].preventSideEffects=(this[za].preventSideEffects||0)+1;const o=n.apply(this,a);this[za].preventSideEffects--;const i=e(this,a,r);return Rm.call(this,t,i,this.length,r),o}}),Mm(Ei);var jc=M.ObservableArray=_m(Ei);//!steal-remove-start
x.for("can.getChangesDependencyRecord");var Kc=x.for("can.getValue"),dp=x.for("can.onValue"),du=x.for("can.onEmit"),Hm=x.for("can.offEmit"),Bc=x.for("can.setValue"),zc=x.for("can.element");function Hc(e,t){d.setValue(t,e)}function Um(e,t,n){return e[du](t,n)}function Fm(e,t,n){return e[Hm](t,n)}function Uc(e,t,n,r){var a;e[dp]?a=d.offValue:e[du]&&(a=Fm),a&&a(e,n,r)}function Fc(e,t,n,r){var a;e[dp]?a=d.onValue:e[du]&&(a=Um),a&&a(e,n,r)}function po(e,t){this.value=0,this._binding=e,this._type=t}function Di(e){//!steal-remove-start
this._options=e;//!steal-remove-end
e.queue===void 0&&(e.element?e.queue="dom":e.queue="domUI"),!(e.cycles>0)&&(e.cycles=0),e.onInitDoNotUpdateChild=typeof e.onInitDoNotUpdateChild=="boolean"&&e.onInitDoNotUpdateChild,e.onInitDoNotUpdateParent=typeof e.onInitDoNotUpdateParent=="boolean"&&e.onInitDoNotUpdateParent,e.onInitSetUndefinedParentIfChildIsDefined=typeof e.onInitSetUndefinedParentIfChildIsDefined!="boolean"||e.onInitSetUndefinedParentIfChildIsDefined;var t=new po(this,"child"),n=new po(this,"parent"),r=!0;typeof e.childToParent=="boolean"?r=e.childToParent:(e.child[Kc]==null||e.setParent===void 0&&e.parent[Bc]==null)&&(r=!1);var a=!0;if(typeof e.parentToChild=="boolean"?a=e.parentToChild:(e.parent[Kc]==null||e.setChild===void 0&&e.child[Bc]==null)&&(a=!1),r===!1&&a===!1)throw new Error("Neither the child nor parent will be updated; this is a no-way binding");this._childToParent=r,this._parentToChild=a,e.setChild===void 0&&(e.setChild=Hc),e.setParent===void 0&&(e.setParent=Hc),e.priority!==void 0&&(d.setPriority(e.child,e.priority),d.setPriority(e.parent,e.priority));var o=2*e.cycles,i=o+(e.sticky==="childSticksToParent"?1:0),s=o+(e.sticky==="parentSticksToChild"?1:0);this._bindingState={child:!1,parent:!1},this._updateChild=function(u){Wc.call(this,{bindingState:this._bindingState,newValue:u,debugObservableName:"child",debugPartnerName:"parent",observable:e.child,setValue:e.setChild,semaphore:t,allowedUpdates:i,sticky:e.sticky==="parentSticksToChild",partner:e.parent,setPartner:e.setParent,partnerSemaphore:n})}.bind(this),this._updateParent=function(u){Wc.call(this,{bindingState:this._bindingState,newValue:u,debugObservableName:"parent",debugPartnerName:"child",observable:e.parent,setValue:e.setParent,semaphore:n,allowedUpdates:s,sticky:e.sticky==="childSticksToParent",partner:e.child,setPartner:e.setChild,partnerSemaphore:t})}.bind(this),e.element&&(this._updateChild[zc]=this._updateParent[zc]=e.element)}function Wc(e){var t=e.bindingState;if(t.child!==!1||t.parent!==!1){var n=e.semaphore;if(n.value+e.partnerSemaphore.value<=e.allowedUpdates&&(T.batch.start(),n.increment(e),e.setValue(e.newValue,e.observable),T.mutateQueue.enqueue(n.decrement,n,[]),T.batch.stop(),e.sticky)){var r=d.getValue(e.observable);r!==d.getValue(e.partner)&&e.setPartner(r,e.partner)}//!steal-remove-end
}}q(po.prototype,{decrement:function(){this.value-=1},increment:function(e){//!steal-remove-start
this._incremented=!0,this.value+=1;//!steal-remove-end
}}),Object.defineProperty(Di.prototype,"parentValue",{get:function(){return d.getValue(this._options.parent)}}),q(Di.prototype,{start:function(){var e,t,n=this._options;if(this.startParent(),this.startChild(),this._childToParent===!0&&this._parentToChild===!0){//!steal-remove-start
(t=d.getValue(n.parent))===void 0?(e=d.getValue(n.child))===void 0?n.onInitDoNotUpdateChild===!1&&this._updateChild(t):n.onInitDoNotUpdateParent===!1&&n.onInitSetUndefinedParentIfChildIsDefined===!0&&this._updateParent(e):n.onInitDoNotUpdateChild===!1&&this._updateChild(t);//!steal-remove-end
}else this._childToParent===!0?n.onInitDoNotUpdateParent===!1&&(e=d.getValue(n.child),this._updateParent(e)):this._parentToChild===!0&&n.onInitDoNotUpdateChild===!1&&(t=d.getValue(n.parent),this._updateChild(t))},startChild:function(){if(this._bindingState.child===!1&&this._childToParent===!0){var e=this._options;this._bindingState.child=!0,Fc(e.child,e.parent,this._updateParent,e.queue)}},startParent:function(){if(this._bindingState.parent===!1&&this._parentToChild===!0){var e=this._options;this._bindingState.parent=!0,Fc(e.parent,e.child,this._updateChild,e.queue)}},stop:function(){var e=this._bindingState,t=this._options;e.parent===!0&&this._parentToChild===!0&&(e.parent=!1,Uc(t.parent,t.child,this._updateChild,t.queue)),e.child===!0&&this._childToParent===!0&&(e.child=!1,Uc(t.child,t.parent,this._updateParent,t.queue))}}),["parent","child"].forEach(function(e){Object.defineProperty(Di.prototype,e,{get:function(){return this._options[e]}})});var pu=M.Bind=Di;//!steal-remove-start
var Wm=x.for("can.setElement");function bt(e,t){this.setter=t,this.observation=new Z(e),this.handler=this.handler.bind(this)}bt.prototype=Object.create(vt.prototype),bt.prototype.constructor=bt,bt.prototype.set=function(e){this.setter(e)},bt.prototype.hasDependencies=function(){return d.valueHasDependencies(this.observation)},d.assignSymbols(bt.prototype,{"can.setValue":bt.prototype.set,"can.valueHasDependencies":bt.prototype.hasDependencies,"can.setElement":function(e){this.observation[Wm](e)}});var hu=bt;const mn=Symbol.for("can.lifecycleStatus"),Ha=Symbol.for("can.initializing"),Ua=Symbol.for("can.teardownHandlers");function Fa(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}const{mixinElement:$m,mixins:Qm}=vn,$c=Symbol.for("can.eventTargetInstalled");var Gm=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;const t=e.prototype.addEventListener,n=e.prototype.removeEventListener;//!steal-remove-end
class r extends $m(e){constructor(){super(),this.constructor,function(o){if(o[$c])return;const i=o.prototype.addEventListener,s=o.prototype.removeEventListener;o.prototype.addEventListener=function(){return i.apply(this,arguments),t.apply(this,arguments)},o.prototype.removeEventListener=function(){return s.apply(this,arguments),n.apply(this,arguments)},o[$c]=!0}(this.constructor)}initialize(o){let i,s;for(i in super.initialize(o),this.constructor.props&&(s=Object.keys(this.constructor.props)),this)if(this.hasOwnProperty(i))if(s&&s.includes(i)){const u=this[i];delete this[i],this[i]=u}else Qm.expando(this,i,this[i])}}return r},Qi=ye(function(e){var t=function(w){var y={};return function(k,E){for(var S=0;S<k.length;S++)E(k[S],S)}(w.split(","),function(k){y[k]=!0}),y}("allowReorder,attributeName,attributeType,autoReverse,baseFrequency,baseProfile,calcMode,clipPathUnits,contentScriptType,contentStyleType,diffuseConstant,edgeMode,externalResourcesRequired,filterRes,filterUnits,glyphRef,gradientTransform,gradientUnits,kernelMatrix,kernelUnitLength,keyPoints,keySplines,keyTimes,lengthAdjust,limitingConeAngle,markerHeight,markerUnits,markerWidth,maskContentUnits,maskUnits,patternContentUnits,patternTransform,patternUnits,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,repeatCount,repeatDur,requiredExtensions,requiredFeatures,specularConstant,specularExponent,spreadMethod,startOffset,stdDeviation,stitchTiles,surfaceScale,systemLanguage,tableValues,textLength,viewBox,viewTarget,xChannelSelector,yChannelSelector,controlsList");function n(w,y,k){return y+"-"+k.toLowerCase()}function r(w,y){return w.indexOf(y)===0}function a(w,y){return w.length-w.lastIndexOf(y)===y.length}var o={leftParens:/\(/g,rightParens:/\)/g,leftBrace:/\{/g,rightBrace:/\}/g,camelCase:/([a-z]|[0-9]|^)([A-Z])/g,forwardSlash:/\//g,space:/\s/g,uppercase:/[A-Z]/g,uppercaseDelimiterThenChar:/:u:([a-z])/g,caret:/\^/g,dollar:/\$/g,at:/@/g},i=":u:",s=":s:",u=":f:",c=":lp:",l=":rp:",f=":lb:",p=":rb:",v=":c:",g=":d:",h=":at:",m={encode:function(w){var y=w;return!t[y]&&y.match(o.camelCase)&&(r(y,"on:")||a(y,":to")||a(y,":from")||a(y,":bind")||a(y,":raw")?y=y.replace(o.uppercase,function(k){return i+k.toLowerCase()}):(r(y,"(")||r(y,"{"))&&(y=y.replace(o.camelCase,n))),y=y.replace(o.space,s).replace(o.forwardSlash,u).replace(o.leftParens,c).replace(o.rightParens,l).replace(o.leftBrace,f).replace(o.rightBrace,p).replace(o.caret,v).replace(o.dollar,g).replace(o.at,h)},decode:function(w){var y=w;return!t[y]&&o.uppercaseDelimiterThenChar.test(y)&&(r(y,"on:")||a(y,":to")||a(y,":from")||a(y,":bind")||a(y,":raw"))&&(y=y.replace(o.uppercaseDelimiterThenChar,function(k,E){return E.toUpperCase()})),y=y.replace(c,"(").replace(l,")").replace(f,"{").replace(p,"}").replace(u,"/").replace(s," ").replace(v,"^").replace(g,"$").replace(h,"@")}};if(M.encoder)throw new Error("You can't have two versions of can-attribute-encoder, check your dependencies");e.exports=M.encoder=m});function pp(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function va(e){var t={};return pp(e.split(","),function(n){t[n]=!0}),t}//!steal-remove-start
var hp="A-Za-z0-9",vp="-:_"+hp,Si="{{",Qc=new RegExp("^<\\/(["+vp+"]+)[^>]*>"),cr=new RegExp("\\{\\{(![\\s\\S]*?!|[\\s\\S]*?)\\}\\}\\}?","g"),Wn=/\s/,Ym=new RegExp("["+hp+"]"),Gc=new RegExp("["+vp+`]+s*=s*("[^"]*"|'[^']*')`),Jm=va("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),Yc=va("altGlyph,altGlyphDef,altGlyphItem,animateColor,animateMotion,animateTransform,clipPath,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,foreignObject,glyphRef,linearGradient,radialGradient,textPath"),Xm=va("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),Zm=va("script"),ey="start,end,close,attrStart,attrEnd,attrValue,chars,comment,special,done".split(","),Jc={"{":"}","(":")"},ty=function(){},wr=function(e,t,n){if(typeof e=="object")return function(y,k){for(var E=0,S=y.length;E<S;E++){var I=y[E];k[I.tokenType].apply(k,I.args)}return y}(e,t);var r=[];function a(y,k,E,S){k=Yc[k]?k:k.toLowerCase(),Xm[k]&&v.last()===k&&o("",k),S=Jm[k]||!!S,t.start(k,S,f),S||v.push(k),wr.parseAttrs(E,t,f),t.end(k,S,f),k==="html"&&(c=!0)}function o(y,k){var E;if(k)for(k=Yc[k]?k:k.toLowerCase(),E=v.length-1;E>=0&&v[E]!==k;E--);else E=0;//!steal-remove-start
//!steal-remove-end
if(E>=0){for(var S=v.length-1;S>=E;S--)t.close&&t.close(v[S],f);v.length=E,k==="body"&&(c=!0)}}function i(y,k){t.special&&t.special(k,f)}t=t||{},n&&pp(ey,function(y){var k=t[y]||ty;t[y]=function(){if(k.apply(this,arguments)!==!1){var E=arguments.length;arguments[E-1]===void 0&&(E=arguments.length-1),r.push({tokenType:y,args:[].slice.call(arguments,0,E)})}}});var s,u,c,l,f,p=function(){h&&!c&&(t.chars&&t.chars(h,f)),c=!1,h=""},v=[],g=e,h="";for(v.last=function(){return this[this.length-1]};e;){if(u=!0,v.last()&&Zm[v.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+v.last()+"[^>]*>"),function(y,k){//!steal-remove-end
return k=k.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(k,f),""}),o("",v.last());else{if(e.indexOf("<!--")===0)(s=e.indexOf("-->"))>=0&&(p(),t.comment&&t.comment(e.substring(4,s),f),e=e.substring(s+3),u=!1);else if(e.indexOf("</")===0)(l=e.match(Qc))&&(p(),l[0].replace(Qc,o),e=e.substring(l[0].length),u=!1);else if(e.indexOf("<")===0){var m=wr.searchStartTag(e);m&&(p(),a.apply(null,m.match),e=m.html,u=!1)}else e.indexOf(Si)===0&&(l=e.match(cr))&&(p(),l[0].replace(cr,i),e=e.substring(l[0].length));if(u){(s=Xc(e,Si))===0&&e===g&&(h+=e.charAt(0),e=e.substr(1),s=Xc(e,Si));var w=s<0?e:e.substring(0,s);e=s<0?"":e.substring(s),w&&(h+=w)}}if(e===g)throw new Error("Parse Error: "+e);g=e}return p(),o(),t.done(f),r},yn=function(e,t,n,r,a){var o=r.substring(typeof e.nameStart=="number"?e.nameStart:t,t),i=Qi.encode(o);e.attrStart=i,n.attrStart(e.attrStart,a),e.inName=!1},Ct=function(e,t,n,r,a){if(e.valueStart!==void 0&&e.valueStart<t){var o=r.substring(e.valueStart,t);//!steal-remove-start
n.attrValue(o,a)}n.attrEnd(e.attrStart,a),e.attrStart=void 0,e.valueStart=void 0,e.inValue=!1,e.inName=!1,e.lookingForEq=!1,e.inQuote=!1,e.lookingForName=!0},Xc=function(e,t){for(var n=t.length,r=0,a=e.length;r<a;r++)if(e[r]==="<"||e.substr(r,n)===t)return r;return-1};wr.parseAttrs=function(e,t,n){if(e){for(var r,a=0,o={inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1};a<e.length;){r=a;var i=e.charAt(a);if(a++,Si===e.substr(r,2)){o.inValue&&r>o.valueStart?t.attrValue(e.substring(o.valueStart,r),n):o.inName&&o.nameStart<r?(yn(o,r,t,e,n),Ct(o,r,t,e,n)):o.lookingForValue?o.inValue=!0:o.lookingForEq&&o.attrStart&&Ct(o,r,t,e,n),cr.lastIndex=r;var s=cr.exec(e);s&&(t.special(s[1],n),a=r+s[0].length,o.inValue&&(o.valueStart=r+s[0].length))}else if(o.inValue)o.inQuote?i===o.inQuote&&Ct(o,r,t,e,n):Wn.test(i)&&Ct(o,r,t,e,n);else if(i==="="&&(o.lookingForEq||o.lookingForName||o.inName))o.attrStart||yn(o,r,t,e,n),o.lookingForValue=!0,o.lookingForEq=!1,o.lookingForName=!1;else if(o.inName){var u,c=e[o.nameStart];Jc[c]===i?(u=Jc[c==="{"?"(":"{"],e[r+1]===u?(yn(o,r+2,t,e,n),a++):yn(o,r+1,t,e,n),o.lookingForEq=!0):Wn.test(i)&&c!=="{"&&c!=="("&&(yn(o,r,t,e,n),o.lookingForEq=!0)}else o.lookingForName?Wn.test(i)||(o.attrStart&&Ct(o,r,t,e,n),o.nameStart=r,o.inName=!0):o.lookingForValue&&(Wn.test(i)?a===e.length&&Ct(o,r,t,e,n):(o.lookingForValue=!1,o.inValue=!0,i==="'"||i==='"'?(o.inQuote=i,o.valueStart=r+1):o.valueStart=r))}o.inName?(yn(o,r+1,t,e,n),Ct(o,r+1,t,e,n)):(o.lookingForEq||o.lookingForValue||o.inValue)&&Ct(o,r+1,t,e,n),cr.lastIndex=0}},wr.searchStartTag=function(e){for(var t=e.indexOf(">"),n=Gc.exec(e.substring(1)),r=1;n&&t>=r+n.index;){for(r+=n.index+n[0].length;t<r;)t+=e.substring(t+1).indexOf(">")+1;n=Gc.exec(e.substring(r))}if(t===-1||!Ym.test(e[1]))return null;var a,o,i="",s="",u=e.substring(0,t+1),c=u[u.length-2]==="/",l=u.search(Wn);return c?(s="/",o=u.substring(1,u.length-2).trim()):o=u.substring(1,u.length-1).trim(),l===-1?a=o:(l--,a=o.substring(0,l),i=o.substring(l)),{match:[u,a,i,s],html:e.substring(u.length)}};var vu=M.HTMLParser=wr;ce.define("location",function(){return ce.getKeyValue("global").location});var Mr=ce.makeExport("location");ce.define("MutationObserver",function(){var e=ce.getKeyValue("global");return e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver});var gu=ce.makeExport("MutationObserver");ce.define("customElements",function(){return ce.getKeyValue("global").customElements}),ce.makeExport("customElements");var Lt=ce;function zr(e){return!(!e||e.nodeType!==11)}function Zc(e){for(var t=[],n=e.firstChild;n;)t.push(n),n=n.nextSibling;return t}function gp(){return NodeFilter.FILTER_ACCEPT}var mp=gp;mp.acceptNode=gp;var el,dt={eliminate:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},getDocument:ie,isDocumentElement:function(e){return ie().documentElement===e},isFragment:zr,getParents:function(e){return zr(e)?Zc(e):[e]},getAllNodes:function(e){return ie().createTreeWalker!==void 0?function(t){for(var n,r=zr(t)?[]:[t],a=function(o){return!(!o||o.nodeType!==1)}(t)&&ie().createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,mp,!1);n=a&&a.nextNode();)r.push(n);return r}(e):function(t){var n,r,a=0,o=zr(t)?[]:[t];if(t.firstChild==null)return o;do!n&&(r=t.firstChild)?(a++,o.push(r)):(r=t.nextSibling)?(n=!1,o.push(r)):(r=t.parentNode,a--,n=!0),t=r;while(a>0);return o}(e)},getChildren:Zc,subscription:function(e){return function(){var t=e.apply(this,arguments),n=!1;return function(){if(n){var r=e.name||e.displayName||"an anonymous function";throw new Error("Disposal function returned by "+r+" called more than once.")}t.apply(this,arguments),n=!0}}},wasNotInSet:function(e,t){var n=t.has(e);return n===!1&&t.add(e),!n},contains:function e(t,n){return n&&n.nodeType===Node.TEXT_NODE?e(t,n.parentNode):t.contains?t.contains(n):t.nodeType===Node.DOCUMENT_NODE&&t.documentElement?e(t.documentElement,n):(n=n.parentNode)===t}},ny=dt.contains,Ti={};function tl(e){return e.isConnected}function ry(e){var t=e.ownerDocument;return t===null||t===e||ny(t,e)}function nl(e){if(e){var t=e.createTextNode("");el="isConnected"in t.constructor.prototype?tl:ry,Ti&&(Ti.isConnected=el)}else Ti.isConnected=tl}nl(Lt.getKeyValue("document")),Lt.onKeyValue("document",nl);var yp,bp,wp,kp,xp,Ep,Dp,Sp,Bt,kr=Ti,Tp=dt.eliminate,Lp=dt.subscription,iy=dt.isDocumentElement,rl=dt.getAllNodes,xr=new WeakMap;function Qt(e,t){var n=xr.get(e);if(n)return n[t]}function mu(e,t,n){var r=xr.get(e);r||(r={},xr.set(e,r)),r[t]=n}function yu(e,t){return delete xr.get(e)[t]}function il(e,t){return{target:e,sourceMutation:t}}function al(e,t){var n=Qt(ie(),t);if(n)return n.listeners}function $n(e,t){var n=Qt(ie(),t);if(n)return n.get(e)}var ay=Promise.resolve();function Jt(e,t){return function(n){var r=e(n.target,t);r&&function(a,o){for(var i=a.length,s=a.slice(0),u=0;u<i;u++)s[u](o)}(r,n)}}var sy=0;function sl(e,t,n,r){var a=Qt(e,t);a||mu(e,t,a={observingCount:0});var o=function(){a.observer&&(a.observer.disconnect(),a.observer=null);var i=gu();if(i){var s=et().Node;if(s&&e instanceof s){var u=new i(r);u.id=sy++,u.observe(e,n),a.observer=u}}};return a.observingCount===0&&(Lt.onKeyValue("MutationObserver",o),o()),a.observingCount++,function(){var i=Qt(e,t);i&&(i.observingCount--,i.observingCount<=0&&(i.observer&&i.observer.disconnect(),yu(e,t),Lt.offKeyValue("MutationObserver",o)))}}var oy={subtree:!0,childList:!0},uy={attributes:!0,attributeOldValue:!0};function Ar(e,t,n){return Lp(function(r,a){return r.nodeType===11?Function.prototype:(o=n?sl(r,t,uy,Bt.enqueueAndFlushMutations):sl(ie(),t,oy,Bt.enqueueAndFlushMutations),function(i,s,u){var c=ie(),l=Qt(c,s);l||mu(c,s,l=new WeakMap);var f=l.get(i);f||(f=[],l.set(i,f)),f.push(u)}(r,e,a),function(){o&&o(),function(i,s,u){var c=ie(),l=Qt(c,s);if(l){var f=l.get(i);f&&(Tp(f,u),f.length===0&&(l.delete(i),l.size===0&&yu(c,s)))}}(r,e,a)});var o})}function bu(e,t){return Lp(function(n,r){if(!iy(n))throw new Error("Global mutation listeners must pass a documentElement");var a=ie(),o=Qt(a,e);o||mu(a,e,o={listeners:[]});var i=o.listeners;return i.length===0&&(o.removeListener=t(a,function(){})),i.push(r),function(){var s=Qt(a,e);if(s){var u=s.listeners;Tp(u,r),u.length===0&&(s.removeListener(),yu(a,e))}}})}var gt="domMutation",Ip=gt+"ConnectedData",Cp=gt+"DisconnectedData",Op=gt+"InsertedData",Pp=gt+"RemovedData",_p=gt+"AttributeChangeData",Mp=gt+"DocumentConnectedData",Ap=gt+"DocumentDisconnectedData",cy=gt+"DocumentAttributeChangeData",ga=gt+"TreeData",ly=gt+"AttributeData";bp=Jt($n,Op),wp=Jt($n,Ip),kp=Jt(al,Mp),xp=Jt($n,Pp),Ep=Jt($n,Cp),Dp=Jt(al,Ap),Sp=Jt($n,_p);var ho=Ar(Ip,ga),vo=Ar(Cp,ga),fy=Ar(Op,ga),dy=Ar(Pp,ga),Vp=Ar(_p,ly,!0),ol=bu(Mp,ho),ul=bu(Ap,vo),py=bu(cy,Vp);function hy(e,t){for(var n=e.isConnected===!0||e.isConnected===void 0,r=e.removedNodes.length,a=0;a<r;a++)rl(e.removedNodes[a]).forEach(function(s){var u=il(s,e);dt.wasNotInSet(s,t.removed)&&xp(u),n&&dt.wasNotInSet(s,t.disconnected)&&(Ep(u),Dp(u))});for(var o=e.addedNodes.length,i=0;i<o;i++)rl(e.addedNodes[i]).forEach(function(s){var u=il(s,e);dt.wasNotInSet(s,t.inserted)&&bp(u),n&&dt.wasNotInSet(s,t.connected)&&(wp(u),kp(u))})}var Xt=[],Wa=!1,bn=!1,wn=[];Bt={enqueueAndFlushMutations:function(e){if(bn&&(Xt=Xt.concat(wn),bn=!1,wn=[]),Xt=Xt.concat(e),!Wa){Wa=!0;for(var t=0,n={connected:new Set,disconnected:new Set,inserted:new Set,removed:new Set};t<Xt.length;){var r=Xt[t];r.type==="childList"?hy(r,n):r.type==="attributes"&&Sp(r),t++}Xt=[],Wa=!1}},enqueueMutationsAndFlushAsync:function(e){var t;wn=wn.concat(e),bn||(bn=!0,t=function(){if(bn){bn=!1;var n=wn;wn=[],Bt.enqueueAndFlushMutations(n)}},ay.then(t))}},yp={dispatchNodeInsertion:function(e,t){Bt.enqueueMutationsAndFlushAsync([{type:"childList",target:t,addedNodes:[e],isConnected:kr.isConnected(t),removedNodes:[]}])},dispatchNodeRemoval:function(e,t){Bt.enqueueMutationsAndFlushAsync([{type:"childList",target:t,addedNodes:[],removedNodes:[e],isConnected:kr.isConnected(t)}])},dispatchNodeAttributeChange:function(e,t,n){Bt.enqueueMutationsAndFlushAsync([{type:"attributes",target:e,attributeName:t,oldValue:n}])},onNodeConnected:ho,onNodeInsertion:function(){return console.warn("can-dom-mutate: Use onNodeConnected instead of onNodeInsertion"),ho.apply(this,arguments)},onNodeDisconnected:vo,onNodeRemoval:function(){return console.warn("can-dom-mutate: Use onNodeDisconnected instead of onNodeRemoval"),vo.apply(this,arguments)},onNodeAttributeChange:Vp,onDisconnected:ul,onRemoval:function(){return console.warn("can-dom-mutate: Use onDisconnected instead of onRemoval"),ul.apply(this,arguments)},onConnected:ol,onInsertion:function(){return console.warn("can-dom-mutate: Use onConnected instead of onInsertion"),ol.apply(this,arguments)},onAttributeChange:py,flushRecords:function(e){e=e||ie();var t=xr.get(e),n=[];t&&t.domMutationTreeData&&t.domMutationTreeData.observer&&(n=t.domMutationTreeData.observer.takeRecords()),Bt.enqueueAndFlushMutations(n)},onNodeInserted:fy,onNodeRemoved:dy};//!steal-remove-end
var ue=M.domMutate=yp,Np=dt.getParents,wu={replaceChild:function(e,t){var n=Np(e),r=this.replaceChild(e,t);ue.dispatchNodeRemoval(t,this);for(var a=0;a<n.length;a++)ue.dispatchNodeInsertion(n[a],this);return r},setAttribute:function(e,t){var n=this.getAttribute(e),r=this.setAttribute(e,t);return n!==this.getAttribute(e)&&ue.dispatchNodeAttributeChange(this,e,n),r},setAttributeNS:function(e,t,n){var r=this.getAttribute(t),a=this.setAttributeNS(e,t,n);return r!==this.getAttribute(t)&&ue.dispatchNodeAttributeChange(this,t,r),a},removeAttribute:function(e){var t=this.getAttribute(e),n=this.removeAttribute(e);return t&&ue.dispatchNodeAttributeChange(this,e,t),n}};[["appendChild","Insertion"],["insertBefore","Insertion"],["removeChild","Removal"]].forEach(function(e){var t=e[0],n="dispatchNode"+e[1];wu[t]=function(r){for(var a=Np(r),o=this[t].apply(this,arguments),i=0;i<a.length;i++)ue[n](a[i],this);return o}});var Rp={};["appendChild","insertBefore","removeChild","replaceChild","setAttribute","setAttributeNS","removeAttribute"].forEach(function(e){Rp[e]=function(){return kr.isConnected(this)?this[e].apply(this,arguments):wu[e].apply(this,arguments)}});var qp={};function cl(e){var t=e?Rp:wu;for(var n in t)qp[n]=t[n]}var ll="MutationObserver";cl(Lt.getKeyValue(ll)),Lt.onKeyValue(ll,cl);var vy=M.domMutateNode=ue.node=qp,be=M.node=vy,jp=M.childNodes=function(e){var t=e.childNodes;if("length"in t)return t;for(var n=e.firstChild,r=[];n;)r.push(n),n=n.nextSibling;return r},gy=/^\s*<(\w+)[^>]*>/,my={}.toString,fl=x.for("can.toDOM");function dl(e,t){if(e&&e.nodeType===11)return e;t?t.length&&(t=t[0]):t=ie();for(var n=function(i,s,u){s===void 0&&(s=gy.test(i)&&RegExp.$1),i&&my.call(i.replace)==="[object Function]"&&(i=i.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var c=u.createElement("div"),l=u.createElement("div");return s==="tbody"||s==="tfoot"||s==="thead"||s==="colgroup"?(l.innerHTML="<table>"+i+"</table>",c=l.firstChild.nodeType===3?l.lastChild:l.firstChild):s==="col"?(l.innerHTML="<table><colgroup>"+i+"</colgroup></table>",c=l.firstChild.nodeType===3?l.lastChild:l.firstChild.firstChild):s==="tr"?(l.innerHTML="<table><tbody>"+i+"</tbody></table>",c=l.firstChild.nodeType===3?l.lastChild:l.firstChild.firstChild):s==="td"||s==="th"?(l.innerHTML="<table><tbody><tr>"+i+"</tr></tbody></table>",c=l.firstChild.nodeType===3?l.lastChild:l.firstChild.firstChild.firstChild):s==="option"?(l.innerHTML="<select>"+i+"</select>",c=l.firstChild.nodeType===3?l.lastChild:l.firstChild):c.innerHTML=""+i,[].slice.call(jp(c))}(e,void 0,t),r=(t||document).createDocumentFragment(),a=0,o=n.length;a<o;a++)r.appendChild(n[a]);return r}var $a,Qa,go=function(e,t){var n,r=t||ie();if(e&&typeof e!="string"){if(typeof e[fl]=="function")return go(e[fl]());if(e.nodeType===11)return e;if(typeof e.nodeType=="number")return(n=r.createDocumentFragment()).appendChild(e),n;d.isListLike(e)?(n=r.createDocumentFragment(),d.eachIndex(e,function(a){n.appendChild(go(a))})):n=dl(""+e,r)}else n=dl(e==null?"":""+e,r);return jp(n).length||n.appendChild(r.createTextNode("")),n},Ft=M.fragment=M.frag=go,Et=ye(function(e){var t=x.for("can.callbackMap"),n=x.for("can.initialize");//!steal-remove-start
var r,a={},o=new WeakMap,i=function(h){var m=h.tagName&&h.tagName.toLowerCase();a[m]&&g.tagHandler(h,m,{})},s=!1,u=function(h,m){if(!m){var w=c[h];if(!w)for(var y=0,k=l.length;y<k;y++){var E=l[y];if(E.match.test(h))return E.handler}//!steal-remove-start
//!steal-remove-end
return w}typeof h=="string"?c[h]=m:l.push({match:h,handler:m})},c={},l=[],f=new WeakMap,p=/[-\:]/,v=function(){},g={_tags:a,_attributes:c,_regExpAttributes:l,defaultCallback:v,tag:function(h,m){var w;if(!m)return m===null?delete a[h.toLowerCase()]:w=a[h.toLowerCase()],!w&&p.test(h)&&(w=v),w;var y,k=p.test(h);a[h.toLowerCase()];//!steal-remove-start
if(a[h.toLowerCase()]=m,function(){var I=Lt.getKeyValue("document");return I!=null&&I.documentElement!=null&&I.documentElement.getAttribute("data-can-automount")!=="false"}()){var E=Lt.getKeyValue("customElements");if(E){if(y=E.get(h.toLowerCase()),k&&!y){var S=function(){return Reflect.construct(HTMLElement,[],S)};S.prototype=Object.create(HTMLElement.prototype),S.prototype.constructor=S,S.prototype.connectedCallback=function(){g.tagHandler(this,h.toLowerCase(),{})},E.define(h,S)}}else(function(){var I=ie().documentElement;if(s){if(s===I)return;r()}var V=ue.onConnected(I,function(D){i(D.target)});s=!0,r=function(){V(),s=!1}})(),function(I){for(var V,D=ie().getElementsByTagName(I),L=0;(V=D[L])!==void 0;L++)i(V)}(h)}else s&&r()},attr:u,attrs:function(h){var m=d.getKeyValue(h,t)||h;f.has(m)||(f.set(m,!0),d.eachKey(m,function(w,y){u(y,w)}))},tagHandler:function(h,m,w){if(!o.has(h)){var y,k=w.scope,E=k&&k.templateContext.tags.get(m)||a[m]||h[n];//!steal-remove-start
E?(y=P.ignore(E)(h,w),o.set(h,!0)):y=k;//!steal-remove-end
if(y&&w.subtemplate){k!==y&&(k=k.add(y));var S=w.subtemplate(k,w.options),I=typeof S=="string"?Ft(S):S;be.appendChild.call(h,I)}}}};if(M.view=M.view||{},M.view.callbacks)throw new Error("You can't have two versions of can-view-callbacks, check your dependencies");e.exports=M.view.callbacks=g}),Kp=function(e,t,n,r){for(var a=r.createDocumentFragment(),o=0,i=e.length;o<i;o++){var s=e[o];a.appendChild(by(s,t,n.concat(o),r))}return a},Bp=typeof document<"u"&&($a=document.createDocumentFragment(),(Qa=document.createElement("div")).appendChild(document.createTextNode("")),Qa.appendChild(document.createTextNode("")),$a.appendChild(Qa),$a.cloneNode(!0).firstChild.childNodes.length===2),yy=typeof document<"u"&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t,n,r=e.cloneNode(!0),a=r.innerHTML==="<xyz></xyz>";return a&&((e=document.createDocumentFragment()).appendChild(document.createTextNode("foo-bar")),(t=gu())?((n=new t(function(){})).observe(document.documentElement,{childList:!0,subtree:!0}),r=e.cloneNode(!0),n.disconnect()):r=e.cloneNode(!0),r.childNodes.length===1)}(),zp=typeof document<"u"&&!!document.createElementNS,ku=yy?function(e){return e.cloneNode(!0)}:function(e){var t,n=e.ownerDocument;if(e.nodeType===1?t=e.namespaceURI!=="http://www.w3.org/1999/xhtml"&&zp&&n.createElementNS?n.createElementNS(e.namespaceURI,e.nodeName):n.createElement(e.nodeName):e.nodeType===3?t=n.createTextNode(e.nodeValue):e.nodeType===8?t=n.createComment(e.nodeValue):e.nodeType===11&&(t=n.createDocumentFragment()),e.attributes)for(var r=e.attributes,a=0;a<r.length;a++){var o=r[a];o&&o.specified&&(o.namespaceURI?t.setAttributeNS(o.namespaceURI,o.nodeName||o.name,o.nodeValue||o.value):t.setAttribute(o.nodeName||o.name,o.nodeValue||o.value))}if(e&&e.firstChild)for(var i=e.firstChild;i;)t.appendChild(ku(i)),i=i.nextSibling;return t};function by(e,t,n,r){var a,o,i,s,u,c=n,l=typeof e,f=function(){return a||(a={path:n,callbacks:[]},t.push(a),c=[]),a};if(l==="object"){if(e.tag){if(o=zp&&e.namespace?r.createElementNS(e.namespace,e.tag):r.createElement(e.tag),e.attrs)for(var p in e.attrs){var v=e.attrs[p];typeof v=="function"?f().callbacks.push({callback:v}):v!==null&&typeof v=="object"&&v.namespaceURI?o.setAttributeNS(v.namespaceURI,p,v.value):be.setAttribute.call(o,p,v)}if(e.attributes)for(s=0,u=e.attributes.length;s<u;s++)f().callbacks.push({callback:e.attributes[s]});e.children&&e.children.length&&(i=a?a.paths=[]:t,o.appendChild(Kp(e.children,i,c,r)))}else if(e.comment&&(o=r.createComment(e.comment),e.callbacks))for(s=0,u=e.callbacks.length;s<u;s++)f().callbacks.push({callback:e.callbacks[s]})}else l==="string"?o=r.createTextNode(e):l==="function"&&(Bp?(o=r.createTextNode(""),f().callbacks.push({callback:e})):(o=r.createComment("~"),f().callbacks.push({callback:function(){var g=r.createTextNode("");return be.replaceChild.call(this.parentNode,g,this),e.apply(g,arguments)}})));return o}function Hp(e,t,n){for(var r=t.path,a=t.callbacks,o=t.paths,i=e,s=r?r.length:0,u=o?o.length:0,c=0;c<s;c++)i=i.childNodes.item(r[c]);for(c=0;c<u;c++)Hp(i,o[c],n);n.push({element:i,callbacks:a})}function mo(e,t){var n=[],r=Kp(e,n,[],t||ie());return{paths:n,clone:r,hydrate:function(){for(var a=ku(this.clone),o=[],i=0,s=o.length=arguments.length;i<s;i++)o[i]=arguments[i];for(var u=[],c=0;c<n.length;c++)Hp(a,n[c],u);return function(l,f){for(var p,v,g,h=l.length,m=0;m<h;m++){p=(g=l[m]).callbacks.length,v=g.element;for(var w=0;w<p;w++)g.callbacks[w].callback.apply(v,f)}}(u,o),a}}}mo.keepsTextNodes=Bp,mo.cloneNode=ku,M.view=M.view||{};var pl=M.view.target=mo,hl=x.for("can.getKeyValue"),Ve=x.for("can.meta"),wy={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0};function Ot(e,t,n){var r=e[Ve],a=r[t];r[t]=n,T.enqueueByQueue(r.handlers.getNode([t]),e,[n,a],function(){return{}},["Promise",e,"resolved with value",n,"and changed virtual property: "+t])}function Hr(e){var t=e[Ve];t||(Object.defineProperty(e,Ve,{enumerable:!1,configurable:!1,writable:!1,value:Object.create(wy)}),(t=e[Ve]).handlers=new ht([Object,Object,Array])),e.then(function(n){T.batch.start(),Ot(e,"isPending",!1),Ot(e,"isResolved",!0),Ot(e,"value",n),Ot(e,"state","resolved"),T.batch.stop()},function(n){T.batch.start(),Ot(e,"isPending",!1),Ot(e,"isRejected",!0),Ot(e,"reason",n),Ot(e,"state","rejected"),T.batch.stop()})}var fe,ky=function e(t){var n,r="getPrototypeOf"in Object?Object.getPrototypeOf(t):t.__proto__;t[hl]&&t[Ve]||(r!==null&&r!==Object.prototype||typeof(r=t).promise=="function"&&(n=r.promise,r.promise=function(){var a=n.call(r);return e(a),a}),d.assignSymbols(r,{"can.getKeyValue":function(a){switch(this[Ve]||Hr(this),P.add(this,a),a){case"state":case"isPending":case"isResolved":case"isRejected":case"value":case"reason":return this[Ve][a];default:return this[a]}},"can.getValue":function(){return this[hl]("value")},"can.isValueLike":!1,"can.onKeyValue":function(a,o,i){this[Ve]||Hr(this),this[Ve].handlers.add([a,i||"mutate",o])},"can.offKeyValue":function(a,o,i){this[Ve]||Hr(this),this[Ve].handlers.delete([a,i||"mutate",o])},"can.hasOwnKey":function(a){return this[Ve]||Hr(this),a in this[Ve]}}))},vl=x.for("can.getValue"),Ga=x.for("can.setValue"),xy=x.for("can.isValueLike"),Ey=P.ignore(d.getKeyValue.bind(d)),Dy=P.ignore(function(e){return typeof e=="object"&&e&&typeof e.then=="function"}),Sy=Function.prototype.bind;//!steal-remove-start
//!steal-remove-end
var gl=function(e,t,n,r,a,o){for(var i=0,s=fe.valueReaders.length;i<s;i++)fe.valueReaders[i].test(e,t,n,r)&&(e=fe.valueReaders[i].read(e,t,n,r,a,o));return e},Ya=function(e,t,n,r,a){e.foundObservable&&!t.foundObservable&&P.trapsCount()&&(P.addMany(n()),e.foundObservable(r,a),t.foundObservable=!0)},ml=function(e,t,n){return!!(t&&t.length&&d.hasKey(e,t[n].key))};fe={read:function(e,t,n){var r,a={foundObservable:!1};(n=n||{}).foundObservable&&(r=P.trap());var o,i,s=gl(e,0,t,n,a),u=t.length,c=0;for(Ya(n,a,r,e,0);c<u;){o=s;for(var l=0,f=fe.propertyReaders.length;l<f;l++){var p=fe.propertyReaders[l];if(p.test(s)){s=p.read(s,t[c],c,n,a);break}}if(Ya(n,a,r,o,c),s=gl(s,c+=1,t,n,a,o),Ya(n,a,r,o,c-1),c<t.length&&s==null)return i=ml(o,t,c-1),n.earlyExit&&!i&&n.earlyExit(o,c-1,s),{value:void 0,parent:o,parentHasKey:i,foundLastParent:!1}}return i=ml(o,t,t.length-1),s!==void 0||i||n.earlyExit&&n.earlyExit(o,c-1),{value:s,parent:o,parentHasKey:i,foundLastParent:!0}},get:function(e,t,n){return fe.read(e,fe.reads(t),n||{}).value},valueReadersMap:{},valueReaders:[{name:"function",test:function(e){return e&&d.isFunctionLike(e)&&!d.isConstructorLike(e)},read:function(e,t,n,r,a,o){return r.callMethodsOnObservables&&d.isObservableLike(o)&&d.isMapLike(o)?e.apply(o,r.args||[]):r.proxyMethods!==!1?Sy.call(e,o):e}},{name:"isValueLike",test:function(e,t,n,r){return e&&e[vl]&&e[xy]!==!1&&(r.foundAt||!function(a,o){var i=o[a-1];return i&&i.at}(t,n))},read:function(e,t,n,r){return r.readCompute===!1&&t===n.length?e:d.getValue(e)},write:function(e,t){e[Ga]?e[Ga](t):e.set?e.set(t):e(t)}}],propertyReadersMap:{},propertyReaders:[{name:"map",test:function(e){return(d.isPromise(e)||Dy(e))&&ky(e),d.isObservableLike(e)&&d.isMapLike(e)},read:function(e,t){var n=d.getKeyValue(e,t.key);return n!==void 0?n:e[t.key]},write:d.setKeyValue},{name:"object",test:function(){return!0},read:function(e,t,n,r){if(e!=null)return typeof e!="object"||t.key in e?e[t.key]:void 0},write:function(e,t,n){var r=e[t];n!=null&&typeof n=="object"&&d.isMapLike(r)?d.update(r,n):r!=null&&r[Ga]!==void 0?d.setValue(r,n):e[t]=n}}],reads:function(e){var t=""+e,n=[],r=0,a=!1;t.charAt(0)==="@"&&(r=1,a=!0);for(var o="",i=r;i<t.length;i++){var s=t.charAt(i);s==="."||s==="@"?t.charAt(i-1)!=="\\"?(n.push({key:o,at:a}),a=s==="@",o=""):o=o.substr(0,o.length-1)+".":o+=s}return n.push({key:o,at:a}),n},write:function(e,t,n,r){var a,o=typeof t=="string"?fe.reads(t):t;if(r=r||{},o.length>1?(a=o.pop(),e=fe.read(e,o,r).value,o.push(a)):a=o[0],e){var i=Ey(e,a.key);fe.valueReadersMap.isValueLike.test(i,o.length-1,o,r)?fe.valueReadersMap.isValueLike.write(i,n,r):(fe.valueReadersMap.isValueLike.test(e,o.length-1,o,r)&&(e=e[vl]()),fe.propertyReadersMap.map.test(e)?fe.propertyReadersMap.map.write(e,a.key,n,r):fe.propertyReadersMap.object.test(e)&&(fe.propertyReadersMap.object.write(e,a.key,n,r),r.observation&&r.observation.update()))}}},fe.propertyReaders.forEach(function(e){fe.propertyReadersMap[e.name]=e}),fe.valueReaders.forEach(function(e){fe.valueReadersMap[e.name]=e}),fe.set=fe.write;var Up,X=fe,st=function(e){e=e||{},this.vars=new an(e.vars||{}),this.helpers=new an(e.helpers||{}),this.partials=new an(e.partials||{}),this.tags=new an(e.tags||{})},yl=ye(function(e){var t=0,n="can"+new Date,r=function(a,o){var i=a.nodeName?n:"_cid";return a[i]||(t++,a[i]=(o||"")+t),a[i]};if(r.domExpando=n,r.get=function(a){var o=typeof a;return o!==null&&(o==="object"||o==="function")?r(a):o+":"+a},M.cid)throw new Error("You can't have two versions of can-cid, check your dependencies");e.exports=M.cid=r});function bl(e,t){return(t?yl(e)+":"+t:yl(e))||e}Up={set:function(e,t,n,r){e[bl(t,r)]=n},getAndDelete:function(e,t,n){var r=bl(t,n),a=e[r];return delete e[r],a}};var wl=Up,Ty=function(e){return arguments.length?d.setValue(this,e):d.getValue(this)},Gi=function(e){var t=Ty.bind(e);//!steal-remove-start
return t.on=t.bind=t.addEventListener=function(n,r){var a=function(o,i){r.call(t,{type:"change"},o,i)};wl.set(r,this,a),e.on(a)},t.off=t.unbind=t.removeEventListener=function(n,r){e.off(wl.getAndDelete(r,this))},d.assignSymbols(t,{"can.getValue":function(){return d.getValue(e)},"can.setValue":function(n){return d.setValue(e,n)},"can.onValue":function(n,r){return d.onValue(e,n,r)},"can.offValue":function(n,r){return d.offValue(e,n,r)},"can.valueHasDependencies":function(){return d.valueHasDependencies(e)},"can.getPriority":function(){return d.getPriority(e)},"can.setPriority":function(n){d.setPriority(e,n)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t},Dt=ye(function(e){if(M.stacheHelpers)throw new Error("You can't have two versions of can-stache-helpers, check your dependencies");e.exports=M.stacheHelpers={}}),Ly=x.for("can.dispatch"),Iy=x.for("can.setElement"),Cy=P.ignore(function(e){if(e.reads&&e.reads.length===1){var t=e.root;return t&&t[x.for("can.getValue")]&&(t=d.getValue(t)),t&&d.isObservableLike(t)&&d.isMapLike(t)&&typeof t[e.reads[0].key]!="function"&&t}});//!steal-remove-end
var Xe=function(e,t,n){this.startingScope=e,this.key=t,this.read=this.read.bind(this),this.dispatch=this.dispatch.bind(this),t==="debugger"&&(this.startingScope={_context:Dt},this.read=function(){var o={scope:e};return(0,Dt.debugger)(o)});//!steal-remove-end
var r=this.observation=new Z(this.read,this);this.options=q({observation:this.observation},n),this.fastPath=void 0,this.root=void 0,this.reads=void 0,this.setRoot=void 0,this._thisArg=new _e,this.parentHasKey=void 0;var a=new Set;a.add(r),this.dependencies={valueDependencies:a},this._latestValue=void 0};function Oy(){this._value=this.newVal}function Py(){this.value=this.newVal}ha(Xe.prototype),q(Xe.prototype,{constructor:Xe,dispatch:function(e){var t=this.value;this._latestValue=this.value=e,this[Ly].call(this,this.value,t)},onBound:function(){this.bound=!0,d.onValue(this.observation,this.dispatch,"notify");var e=Cy(this);e&&this.toFastPath(e),this._latestValue=this.value=P.peekValue(this.observation)},onUnbound:function(){this.bound=!1,d.offValue(this.observation,this.dispatch,"notify"),this.toSlowPath()},set:function(e){var t=this.root||this.setRoot;t?this.reads.length?X.write(t,this.reads,e,this.options):d.setValue(t,e):this.startingScope.set(this.key,e,this.options)},get:function(){return P.isRecording()&&(P.add(this),this.bound||Z.temporarilyBind(this)),this.bound===!0&&this.fastPath===!0?this._latestValue:P.peekValue(this.observation)},toFastPath:function(e){var t=this,n=this.observation;this.fastPath=!0,n.dependencyChange=function(r,a){if(function(o){return o&&typeof o.batchNum=="number"&&typeof o.type=="string"}(a))throw"no event objects!";return r===e&&typeof a!="function"?(t._latestValue=a,this.newVal=a):t.toSlowPath(),Z.prototype.dependencyChange.apply(this,arguments)},n.hasOwnProperty("_value")?n.onBound=Oy:n.onBound=Py},toSlowPath:function(){this.observation.dependencyChange=Z.prototype.dependencyChange,this.observation.onBound=Z.prototype.onBound,this.fastPath=!1},read:function(){var e;if(this.root){//!steal-remove-start
e=X.read(this.root,this.reads,this.options),this.thisArg=e.parent;//!steal-remove-end
return e.value}//!steal-remove-start
e=this.startingScope.read(this.key,this.options),this.scope=e.scope,this.reads=e.reads,this.root=e.rootObserve,this.setRoot=e.setRoot,this.thisArg=e.thisArg,this.parentHasKey=e.parentHasKey;//!steal-remove-end
return e.value},hasDependencies:function(){return this.bound||Z.temporarilyBind(this),d.valueHasDependencies(this.observation)}}),Object.defineProperty(Xe.prototype,"thisArg",{get:function(){return this._thisArg.get()},set:function(e){this._thisArg.set(e)}});var _y={"can.getValue":Xe.prototype.get,"can.setValue":Xe.prototype.set,"can.valueHasDependencies":Xe.prototype.hasDependencies,"can.getValueDependencies":function(){return this.dependencies},"can.getPriority":function(){return d.getPriority(this.observation)},"can.setPriority":function(e){d.setPriority(this.observation,e)},"can.setElement":function(e){this.observation[Iy](e)}};//!steal-remove-start
d.assignSymbols(Xe.prototype,_y),Object.defineProperty(Xe.prototype,"compute",{get:function(){var e=Gi(this);return Object.defineProperty(this,"compute",{value:e,writable:!1,configurable:!1}),e},configurable:!0}),Object.defineProperty(Xe.prototype,"initialValue",{get:function(){return this.bound||Z.temporarilyBind(this),P.peekValue(this)},set:function(){throw new Error("initialValue should not be set")},configurable:!0});var My=Xe,Li=an.extend("LetContext",{});Li.prototype=function(e,t){var n={};return"getOwnPropertySymbols"in Object&&Object.getOwnPropertySymbols(e).forEach(function(r){n[r]=e[r]}),Object.getOwnPropertyNames(e).forEach(function(r){(t.indexOf(r)>=0||r.indexOf("@@symbol")===0)&&(n[r]=e[r])}),Object.create(n)}(an.prototype,["setup","attr","serialize","get","set","log","dispatch","constructorExtends","newInstance","_inherit","_defineProperty","_overwrite","instance","extend","ReturnValue","setup","init"]),Li.prototype.constructor=Li;var kl=Li;function Ja(){return!1}function se(e,t,n){this._context=e,this._parent=t,this._meta=n||{},this.__cache={}}var Ay=/(\.\.\/)|(\.\/)|(this[\.@])/g;q(se,{read:X.read,TemplateContext:st,keyInfo:function(e){e==="./"&&(e="this");var t={remainingKey:e};if(t.isScope=e==="scope",t.isScope)return t;var n=e.substr(0,6);return t.isInScope=n==="scope."||n==="scope@",t.isInScope?(t.remainingKey=e.substr(6),t):n==="scope/"?(t.walkScope=!0,t.remainingKey=e.substr(6),t):e.substr(0,7)==="@scope/"?(t.walkScope=!0,t.remainingKey=e.substr(7),t):(t.parentContextWalkCount=0,t.remainingKey=e.replace(Ay,function(r,a,o,i,s){return t.isContextBased=!0,a!==void 0&&t.parentContextWalkCount++,""}),t.remainingKey===".."?(t.parentContextWalkCount++,t.remainingKey="this"):t.remainingKey!=="."&&t.remainingKey!==""||(t.remainingKey="this"),t.remainingKey==="this"&&(t.isContextBased=!0),t)},isTemplateContextOrCanNotHaveProperties:function(e){var t=e._context;return t instanceof st||!function(n){return n!=null}(t)},shouldSkipIfSpecial:function(e){return e._meta.special===!0||!!se.isTemplateContextOrCanNotHaveProperties(e)},shouldSkipEverythingButSpecial:function(e){return e._meta.special!==!0||!!se.isTemplateContextOrCanNotHaveProperties(e)},makeShouldExitOnSecondNormalContext:function(){var e=!1;return function(t){var n=!t.isSpecial(),r=n&&e;return n&&(e=!0),r}},makeShouldExitAfterFirstNormalContext:function(){var e=!1;return function(t){return!!e||(!t.isSpecial()&&(e=!0),!1)}},makeShouldSkipSpecialContexts:function(e){var t=e||0;return function(n){return!(t<0&&n._meta.notContext)&&(!!n.isSpecial()||!(--t<0))}}}),q(se.prototype,{add:function(e,t){return e!==this._context?new this.constructor(e,this,t):this},find:function(e,t){var n=X.reads(e),r={shouldExit:Ja,shouldSkip:se.shouldSkipIfSpecial,shouldLookForHelper:!0,read:X.read};return this._walk(n,t,r).value},readFromSpecialContext:function(e){return this._walk([{key:e,at:!1}],{special:!0},{shouldExit:Ja,shouldSkip:se.shouldSkipEverythingButSpecial,shouldLookForHelper:!1,read:X.read})},readFromTemplateContext:function(e,t){var n=X.reads(e);return X.read(this.templateContext,n,t)},read:function(e,t){return t=t||{},this.readKeyInfo(se.keyInfo(e),t||{})},readKeyInfo:function(e,t){var n,r,a={read:t.read||X.read};if(e.isScope)return{value:this};if(e.isInScope)return r=X.reads(e.remainingKey),(n=X.read(this,r,t)).value!==void 0||n.parentHasKey||(n=this.readFromTemplateContext(e.remainingKey,t)),q(n,{thisArg:r.length>0?n.parent:void 0});if(e.isContextBased)return r=e.remainingKey!=="this"?X.reads(e.remainingKey):[],a.shouldExit=se.makeShouldExitOnSecondNormalContext(),a.shouldSkip=se.makeShouldSkipSpecialContexts(e.parentContextWalkCount),a.shouldLookForHelper=!0,this._walk(r,t,a);if(e.walkScope)return a.shouldExit=Ja,a.shouldSkip=se.shouldSkipIfSpecial,a.shouldLookForHelper=!0,r=X.reads(e.remainingKey),this._walk(r,t,a);r=X.reads(e.remainingKey);var o=t&&t.special===!0;return a.shouldExit=se.makeShouldExitOnSecondNormalContext(),a.shouldSkip=o?se.shouldSkipEverythingButSpecial:se.shouldSkipIfSpecial,a.shouldLookForHelper=!o,this._walk(r,t,a)},_walk:function(e,t,n){for(var r,a,o,i,s,u=this,c=[],l=-1,f=q({foundObservable:function(y,k){a=y,o=e.slice(k)},earlyExit:function(y,k){(u._meta.variable===!0&&k===0?d.hasKey(y,e[k].key):k>l||k===l&&typeof y=="object"&&d.hasOwnKey(y,e[k].key))&&(s=a,i=o,l=k)}},t),p=P.isRecording(),v=!1;u;)if(n.shouldSkip(u)!==!0){if(n.shouldExit(u)===!0)break;v=!0,r=u._context;var g=P.trap(),h=n.read(r,e,f),m=g();if(h.value!==void 0||h.parentHasKey)return!m.length&&p?(a=h.parent,o=e.slice(e.length-1)):P.addMany(m),{scope:u,rootObserve:a,value:h.value,reads:o,thisArg:h.parent,parentHasKey:h.parentHasKey};c.push.apply(c,m),u=u._parent}else u=u._parent;if(n.shouldLookForHelper){var w=this.getHelperOrPartial(e);if(w)return{value:w}}return P.addMany(c),{setRoot:s,reads:i,value:void 0,noContextAvailable:!v}},getDataForScopeSet:function(e,t){var n,r,a=se.keyInfo(e),o=q({read:function(u,c){if(n!==void 0||u instanceof kl||(n=u),c.length>1){var l=c.slice(0,c.length-1),f=X.read(u,l,t).value;return f!=null&&d.hasKey(f,c[c.length-1].key)?{parent:f,parentHasKey:!0,value:void 0}:{}}return c.length===1?d.hasKey(u,c[0].key)?{parent:u,parentHasKey:!0,value:void 0}:{}:{value:u}}},t),i=this.readKeyInfo(a,o);if(a.remainingKey==="this")return{parent:i.value,how:"setValue"};var s=a.remainingKey.split(".").pop();return i.thisArg?r=i.thisArg:n&&(r=n),r===void 0?{error:"Attempting to set a value at "+e+" where the context is undefined."}:!d.isObservableLike(r)&&d.isObservableLike(r[s])?d.isMapLike(r[s])?{parent:r,key:s,how:"updateDeep",warn:'can-view-scope: Merging data into "'+s+'" because its parent is non-observable'}:d.isValueLike(r[s])?{parent:r,key:s,how:"setValue"}:{parent:r,how:"write",key:s,passOptions:!0}:{parent:r,how:"write",key:s,passOptions:!0}},getHelper:function(e){return console.warn(".getHelper is deprecated, use .getHelperOrPartial"),this.getHelperOrPartial(e)},getHelperOrPartial:function(e){for(var t,n,r=this;r;){if((t=r._context)instanceof st&&((n=X.read(t.helpers,e,{proxyMethods:!1})).value!==void 0||(n=X.read(t.partials,e,{proxyMethods:!1})).value!==void 0))return n.value;r=r._parent}return X.read(Dt,e,{proxyMethods:!1}).value},get:function(e,t){return t=q({isArgument:!0},t),this.read(e,t).value},peek:P.ignore(function(e,t){return this.get(e,t)}),peak:P.ignore(function(e,t){//!steal-remove-end
//!steal-remove-start
return this.peek(e,t)}),getScope:function(e){for(var t=this;t;){if(e(t))return t;t=t._parent}},getContext:function(e){var t=this.getScope(e);return t&&t._context},getTemplateContext:function(){var e,t=this.getScope(function(n){return e=n,n._context instanceof st});return t||(t=new se(new st),e._parent=t),t},addTemplateContext:function(){return this.add(new st)},addLetContext:function(e){return this.add(new kl(e||{}),{variable:!0})},getRoot:function(){for(var e=this,t=this;e._parent;)t=e,e=e._parent;return e._context instanceof st&&(e=t),e._context},getViewModel:function(){var e=this.getScope(function(t){return t._meta.viewModel});return e&&e._context},getTop:function(){var e;return this.getScope(function(t){return t._meta.viewModel&&(e=t),!1}),e&&e._context},getPathsForKey:function(e){//!steal-remove-start
},hasKey:function(e){var t,n=X.reads(e);return(t=n[0].key==="scope"?X.read(this,n.slice(1),e):X.read(this._context,n,e)).foundLastParent&&t.parentHasKey},set:function(e,t,n){n=n||{};var r=this.getDataForScopeSet(e,n),a=r.parent;//!steal-remove-start
switch(r.warn&&ft.warn(r.warn),r.how){case"set":a.set(r.key,t,r.passOptions?n:void 0);break;case"write":X.write(a,r.key,t,n);break;case"setValue":d.setValue("key"in r?a[r.key]:a,t);break;case"setKeyValue":d.setKeyValue(a,r.key,t);break;case"updateDeep":d.updateDeep(a[r.key],t)}},attr:P.ignore(function(e,t,n){return n=q({isArgument:!0},n),arguments.length===2?this.set(e,t,n):this.get(e,n)}),computeData:function(e,t){return function(n,r,a){return new My(n,r,a||{args:[]})}(this,e,t)},compute:function(e,t){return this.computeData(e,t).compute},cloneFromRef:function(){for(var e,t=[],n=this;n;){if(n._context instanceof st){e=n._parent;break}t.unshift(n),n=n._parent}return e?(t.forEach(function(r){e=e.add(r._context,r._meta)}),e):this},isSpecial:function(){return this._meta.notContext||this._meta.special||this._context instanceof st||this._meta.variable}}),se.prototype._read=se.prototype._walk,d.assignSymbols(se.prototype,{"can.hasKey":se.prototype.hasKey,"can.isScopeLike":!0});["filename","lineNumber"].forEach(function(e){Object.defineProperty(se.prototype,e,{get:function(){return this.readFromTemplateContext(e).value},set:function(t){this.templateContext[e]=t}})}),he(se.prototype,"templateContext",function(){return this.getTemplateContext()._context}),he(se.prototype,"root",function(){return this.getRoot()}),he(se.prototype,"vm",function(){return this.getViewModel()}),he(se.prototype,"top",function(){return this.getTop()}),he(se.prototype,"helpers",function(){return Dt});["index","key","element","event","viewModel","arguments","helperOptions","args"].forEach(function(e){Object.defineProperty(se.prototype,e,{get:function(){return this.readFromSpecialContext(e).value}})}),M.view=M.view||{};var He=M.view.Scope=se;function yo(e,t){t=""+t,this.key=t,this.root=e,vt.call(this,function(){return X.get(this,t)},e)}yo.prototype=Object.create(vt.prototype),yo.prototype.set=function(e){X.set(this.root,this.key,e)};var Ur,Yi=yo,Vy=x.for("can.isView"),xl=function(e){return function(){e&&(e.rendered=!0)}},Ce={last:function(e){return e!=null&&e[e.length-1]},emptyHandler:function(){},jsonParse:function(e){return e[0]==="'"?e.substr(1,e.length-2):e==="undefined"?void 0:JSON.parse(e)},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}},createRenderers:function(e,t,n,r,a){e.fn=n?this.makeRendererConvertScopes(n,t,a,e.metadata):xl(e.metadata),e.inverse=r?this.makeRendererConvertScopes(r,t,a,e.metadata):xl(e.metadata),e.isSection=!(!n&&!r)},makeRendererConvertScopes:function(e,t,n,r){var a=function(o,i){return o===void 0||o instanceof He||(o=t?t.add(o):new He(o||{})),r&&(r.rendered=!0),e(o||t)};return n?a:P.ignore(a)},makeView:function(e){var t=P.ignore(function(n){return n instanceof He||(n=new He(n)),e(n)});return t[Vy]=!0,t},getItemsStringContent:function(e,t,n){for(var r="",a=X.get(e,"length"),o=d.isObservableLike(e),i=0;i<a;i++){var s=o?new Yi(e,i):e[i];r+=n.fn(s)}return r},getItemsFragContent:function(e,t,n){var r,a=[],o=X.get(e,"length"),i=d.isObservableLike(e),s=t.exprData&&t.exprData.hashExprs;d.size(s)>0&&(r={},d.eachKey(s,function(f,p){r[f.key]=p}));for(var u=0;u<o;u++){var c={},l=i?new Yi(e,u):e[u];d.size(r)>0&&(r.value&&(c[r.value]=l),r.index&&(c[r.index]=u)),a.push(t.fn(n.add(c,{notContext:!0}).add({index:u},{special:!0}).add(l)))}return a}},El=Ce.last,Ny=typeof document<"u"&&(Ur=ie().createElement("div"),function(e){return e.indexOf("&")===-1?e.replace(/\r\n/g,`
`):(Ur.innerHTML=e,Ur.childNodes.length===0?"":Ur.childNodes.item(0).nodeValue)}),Ji=function(e){e&&(this.filename=e),this.stack=[new Er]};q(Ji.prototype,Ce.mixins),q(Ji.prototype,{startSubSection:function(e){var t=new Er(e);return this.stack.push(t),t},endSubSectionAndReturnRenderer:function(){if(this.last().isEmpty())return this.stack.pop(),null;var e=this.endSection();return Ce.makeView(e.compiled.hydrate.bind(e.compiled))},startSection:function(e,t){var n=new Er(e);this.last().add({comment:t||"#section",callbacks:[n.targetCallback]}),this.last().add({comment:"can-end-placeholder"}),this.stack.push(n)},endSection:function(){return this.last().compile(),this.stack.pop()},inverse:function(){this.last().inverse()},compile:function(){var e=this.stack.pop().compile();return Ce.makeView(e.hydrate.bind(e))},push:function(e){this.last().push(e)},pop:function(){return this.last().pop()},removeCurrentNode:function(){this.last().removeCurrentNode()}});var Er=function(e){this.data="targetData",this.targetData=[],this.targetStack=[];var t=this;this.targetCallback=function(n){e.call(this,n,t.compiled.hydrate.bind(t.compiled),t.inverseCompiled&&t.inverseCompiled.hydrate.bind(t.inverseCompiled))}};q(Er.prototype,{inverse:function(){this.inverseData=[],this.data="inverseData"},push:function(e){this.add(e),this.targetStack.push(e)},pop:function(){return this.targetStack.pop()},add:function(e){typeof e=="string"&&(e=Ny(e)),this.targetStack.length?El(this.targetStack).children.push(e):this[this.data].push(e)},compile:function(){return this.compiled=pl(this.targetData,ie()),this.inverseData&&(this.inverseCompiled=pl(this.inverseData,ie()),delete this.inverseData),this.targetStack=this.targetData=null,this.compiled},removeCurrentNode:function(){return this.children().pop()},children:function(){return this.targetStack.length?El(this.targetStack).children:this[this.data]},isEmpty:function(){return!this.targetData.length}}),Ji.HTMLSection=Er;var Fr=Ji,xe=ye(function(e){var t=new WeakMap,n=function(a){var o=!1;return t.has(a)&&(o=!0,t.delete(a)),o},r={_data:t,get:function(a,o){var i=t.get(a);return o===void 0?i:i&&i[o]},set:function(a,o,i){var s=t.get(a);return s===void 0&&(s={},t.set(a,s)),o!==void 0&&(s[o]=i),s},clean:function(a,o){var i=t.get(a);i&&i[o]&&delete i[o],function(s){for(var u in s)return!1;return!0}(i)&&n(a)},delete:n};if(M.domData)throw new Error("You can't have two versions of can-dom-data, check your dependencies");e.exports=M.domData=r}),bo=[].slice;function Ii(e,t){return e===t}function Xa(e){return e.identity&&e.identity.length?function(t,n){return d.getIdentity(t,e)===d.getIdentity(n,e)}:Ii}function Ry(e,t,n,r,a){for(var o=n.length-1,i=r.length-1;o>e&&i>t;){if(!a(n[o],r[i],o))return[{type:"splice",index:t,deleteCount:o-e+1,insert:bo.call(r,t,i+1)}];o--,i--}return[{type:"splice",index:t,deleteCount:o-e+1,insert:bo.call(r,t,i+1)}]}var Kn=function(e,t,n){var r,a,o=0,i=0,s=d.size(e),u=d.size(t),c=[];for(r=typeof n=="function"?n:n!=null?n.type==="map"?Xa(n):(a=n).values!=null?Xa(d.getSchema(a.values)):Ii:function(p,v){var g,h=d.getSchema(p);if(h!=null){if(h.values==null)return Ii;g=d.getSchema(h.values)}return g==null&&v>0&&(g=d.getSchema(d.getKeyValue(p,0))),g?Xa(g):Ii}(e,s);o<s&&i<u;){var l=e[o],f=t[i];if(r(l,f,o))o++,i++;else if(i+1<u&&r(l,t[i+1],o))c.push({index:i,deleteCount:0,insert:[t[i]],type:"splice"}),o++,i+=2;else{if(!(o+1<s&&r(e[o+1],f,o+1)))return c.push.apply(c,Ry(o,i,e,t,r)),c;c.push({index:i,deleteCount:1,insert:[],type:"splice"}),o+=2,i++}}return i===u&&o===s||c.push({type:"splice",index:i,deleteCount:s-o,insert:bo.call(t,i)}),c},qy=et(),Dl={xmlns:"http://www.w3.org/2000/xmlns/","xlink:href":"http://www.w3.org/1999/xlink"},jy={INPUT:!0,TEXTAREA:!0,SELECT:!0,BUTTON:!0},Sl=function(e){return e.namespaceURI==="http://www.w3.org/2000/svg"},Ky=function(){return!0},Qn=function(e,t){return(t=t||{}).get=function(){return this[e]},t.set=function(n){this[e]!==n&&(this[e]=n)},t},Za=function(e){return{isBoolean:!0,set:function(t){e in this?this[e]=t:be.setAttribute.call(this,e,"")},remove:function(){this[e]=!1}}},Tl=function(e,t){if(!xe.get(e,"attrMO")){var n=function(){t.call(e)},r=gu();if(r){var a=new r(n);a.observe(e,{childList:!0,subtree:!0}),xe.set(e,"attrMO",a)}else xe.set(e,"attrMO",!0),xe.set(e,"canBindingCallback",{onMutation:n})}},Fp=function(e,t){for(var n=e.firstChild;n;){if(n.nodeName==="OPTION"&&t===n.value)return n;if(n.nodeName==="OPTGROUP"){var r=Fp(n,t);if(r)return r}n=n.nextSibling}},es=function(e,t){var n;t!=null&&(n=Fp(e,t)),n?n.selected=!0:e.selectedIndex=-1},wo=function(e,t){for(var n=e.firstChild;n;)n.nodeName==="OPTION"&&t(n),n.nodeName==="OPTGROUP"&&wo(n,t),n=n.nextSibling},Wr=new Map,Wp=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n)return n.writable||n.set;var r=Object.getPrototypeOf(e);return!!r&&Wp(r,t)},Gn={checked:{get:function(){return this.checked},set:function(e){var t=!!e||e===""||arguments.length===0;this.checked=t,t&&this.type==="radio"&&(this.defaultChecked=!0)},remove:function(){this.checked=!1},test:function(){return this.nodeName==="INPUT"}},class:{get:function(){return Sl(this)?this.getAttribute("class"):this.className},set:function(e){e=e||"",Sl(this)?be.setAttribute.call(this,"class",""+e):this.className=e}},disabled:Za("disabled"),focused:{get:function(){return this===document.activeElement},set:function(e){var t=tr.get(this,"focused"),n=this.ownerDocument.documentElement,r=this;function a(){e?r.focus():r.blur()}if(t!==e)if(n.contains(r))T.enqueueByQueue({mutate:[a]},null,[]);else var o=ue.onNodeConnected(r,function(){o(),a()});return!0},addEventListener:function(e,t,n){return n.call(this,"focus",t),n.call(this,"blur",t),function(r){r.call(this,"focus",t),r.call(this,"blur",t)}},test:function(){return this.nodeName==="INPUT"}},for:Qn("htmlFor"),innertext:Qn("innerText"),innerhtml:Qn("innerHTML"),innerHTML:Qn("innerHTML",{addEventListener:function(e,t,n){var r=[],a=this;return["change","blur"].forEach(function(o){var i=function(){t.apply(this,arguments)};oe.addEventListener(a,o,i),r.push([o,i])}),function(o){r.forEach(function(i){o.call(a,i[0],i[1])})}}}),required:Za("required"),readonly:Za("readOnly"),selected:{get:function(){return this.selected},set:function(e){e=!!e,xe.set(this,"lastSetValue",e),this.selected=e},addEventListener:function(e,t,n){var r=this,a=this.parentNode,o=r.selected,i=function(u){var c=r.selected;c!==(o=xe.get(r,"lastSetValue")||o)&&(o=c,oe.dispatch(r,e))},s=function(u,c){var l=xe.get(u,"attrSetChildOptions");return l?Function.prototype:(l=function(){es(u,u.value)},xe.set(u,"attrSetChildOptions",l),c.call(u,"change",l),function(f){xe.clean(u,"attrSetChildOptions"),f.call(u,"change",l)})}(a,n);return oe.addEventListener(a,"change",i),n.call(r,e,t),function(u){s(u),oe.removeEventListener(a,"change",i),u.call(r,e,t)}},test:function(){return this.nodeName==="OPTION"&&this.parentNode&&this.parentNode.nodeName==="SELECT"}},style:{set:function(){var e=qy.document&&ie().createElement("div");return e&&e.style&&"cssText"in e.style?function(t){this.style.cssText=t||""}:function(t){be.setAttribute.call(this,"style",t)}}()},textcontent:Qn("textContent"),value:{get:function(){var e=this.value;return this.nodeName==="SELECT"&&"selectedIndex"in this&&this.selectedIndex===-1&&(e=void 0),e},set:function(e){var t=this.nodeName.toLowerCase();if(t!=="input"&&t!=="textarea"||(e=function(a){return a==null?"":""+a}(e)),this.value===e&&t!=="option"||(this.value=e),t!=="input"&&t!=="textarea"||(this.defaultValue=e),t==="select"){if(xe.set(this,"attrValueLastVal",e),es(this,e===null?e:this.value),!this.ownerDocument.documentElement.contains(this))var n=this,r=ue.onNodeConnected(n,function(){r(),es(n,e===null?e:n.value)});Tl(this,function(){var a=xe.get(this,"attrValueLastVal");tr.set(this,"value",a),oe.dispatch(this,"change")})}//!steal-remove-start
//!steal-remove-end
},test:function(){return jy[this.nodeName]}},values:{get:function(){return e=[],wo(this,function(t){t.selected&&e.push(t.value)}),e;var e},set:function(e){(function(t,n){wo(t,function(r){r.selected=n.indexOf(r.value)!==-1})})(this,e=e||[]),xe.set(this,"stickyValues",tr.get(this,"values")),Tl(this,function(){var t=xe.get(this,"stickyValues");tr.set(this,"values",t);var n=xe.get(this,"stickyValues");Kn(t.slice().sort(),n.slice().sort()).length&&oe.dispatch(this,"values")})},addEventListener:function(e,t,n){var r=function(){oe.dispatch(this,"values")};return oe.addEventListener(this,"change",r),n.call(this,e,t),function(a){oe.removeEventListener(this,"change",r),a.call(this,e,t)}}}},tr={rules:Wr,specialAttributes:Gn,getRule:function(e,t){var n=Gn[t];if(n)return n;var r=Wr.get(e.constructor),a=r&&r[t];return a||(t in e?function(o,i,s){var u;return(u=Wr.get(o.prototype))||(u={},Wr.set(o.constructor,u)),u[i]=s,s}(e,t,Wp(e,t)?this.property(t):this.attribute(t)):this.attribute(t))},attribute:function(e){return{get:function(){return this.getAttribute(e)},set:function(t){Dl[e]?be.setAttributeNS.call(this,Dl[e],e,t):be.setAttribute.call(this,e,t)}}},property:function(e){return{get:function(){return this[e]},set:function(t){this[e]=t}}},findSpecialListener:function(e){return Gn[e]&&Gn[e].addEventListener},setAttrOrProp:function(e,t,n){return this.set(e,t,n)},set:function(e,t,n){var r=this.getRule(e,t),a=r&&r.set;if(a)return a.call(e,n)},get:function(e,t){var n=this.getRule(e,t),r=n&&n.get;if(r)return n.test?n.test.call(e)&&r.call(e):r.call(e)},remove:function(e,t){t=t.toLowerCase();var n=Gn[t],r=n&&n.set,a=n&&n.remove,o=function(i){return i&&i.test||Ky}(n);typeof a=="function"&&o.call(e)?a.call(e):typeof r=="function"&&o.call(e)?r.call(e,void 0):be.removeAttribute.call(e,t)}},zt=tr,Ll=x.for("can.setElement"),By=x.for("can.element");function ko(e,t,n,r,a){this.observable=e,this.handler=t,this.placeholder=n,this.queueName=r,this.handler[By]=n,e[Ll]?e[Ll](n):console.warn("no can.setElement symbol on observable",e),this.setup()}ko.prototype.setup=function(){if(this.setupNodeReinserted){if(!kr.isConnected(this.placeholder))return;this.setupNodeReinserted()}this.teardownNodeRemoved=ue.onNodeRemoved(this.placeholder,this.teardown.bind(this)),d.onValue(this.observable,this.handler,this.queueName),this.handler(d.getValue(this.observable))},ko.prototype.teardown=function(){kr.isConnected(this.placeholder)||(this.teardownNodeRemoved(),this.setupNodeReinserted=ue.onNodeInserted(this.placeholder,this.setup.bind(this)),d.offValue(this.observable,this.handler,this.queueName))};var ke={range:{create:function(e,t){var n,r,a;return e.nodeType===Node.COMMENT_NODE?(n=e,(a=e.nextSibling)&&a.nodeType===Node.COMMENT_NODE&&a.nodeValue==="can-end-placeholder"?(r=a).nodeValue="/"+(n.nodeValue=t):ft.warn("can-view-live: creating an end comment for ",t,e)):(n=e.ownerDocument.createComment(t),e.parentNode.replaceChild(n,e)),r||(r=e.ownerDocument.createComment("/"+t),n.parentNode.insertBefore(r,n.nextSibling)),{start:n,end:r}},remove:function(e){for(var t,n=e.start.parentNode,r=e.end.previousSibling;r&&r!==e.start;)t=r,r=r.previousSibling,be.removeChild.call(n,t);ue.flushRecords()},update:function(e,t){var n=e.start.parentNode;n&&(be.insertBefore.call(n,t,e.end),ue.flushRecords())}},ListenUntilRemovedAndInitialize:ko,getAttributeParts:function(e){var t,n={};return vu.parseAttrs(e,{attrStart:function(r){n[r]="",t=r},attrValue:function(r){n[t]+=r},attrEnd:function(){}}),n},addTextNodeIfNoChildren:function(e){e.firstChild||e.appendChild(e.ownerDocument.createTextNode(""))},makeString:function(e){return e==null?"":""+e}},Il=x.for("can.viewInsert");function Cl(e){var t=ie();return Ft([t.createComment(e),t.createComment("can-end-placeholder")])}var zy=x.for("can.onValue"),Hy=x.for("can.offValue"),$r=x.for("can.onPatches"),Qr=x.for("can.offPatches"),Ci=function(e,t){this.handlers=new ht([Object,Array],{onFirst:this.setup.bind(this),onEmpty:this.teardown.bind(this)}),this.observableOrList=e,this.isObservableValue=d.isValueLike(this.observableOrList)||d.isObservableLike(this.observableOrList),this.isObservableValue?this.priority=d.getPriority(e):this.priority=t||0,this.onList=this.onList.bind(this),this.onPatchesNotify=this.onPatchesNotify.bind(this),this.onPatchesDerive=this.onPatchesDerive.bind(this),this.patches=[]};Ci.prototype={constructor:Ci,setup:function(){this.observableOrList[zy]?(d.onValue(this.observableOrList,this.onList,"notify"),this.setupList(d.getValue(this.observableOrList))):this.setupList(this.observableOrList)},teardown:function(){this.observableOrList[Hy]&&d.offValue(this.observableOrList,this.onList,"notify"),this.currentList&&this.currentList[Qr]&&this.currentList[Qr](this.onPatchesNotify,"notify")},setupList:function(e){this.currentList=e,e&&e[$r]&&e[$r](this.onPatchesNotify,"notify")},onList:function(e){var t=this.currentList||[];e=e||[],t[Qr]&&t[Qr](this.onPatchesNotify,"notify");var n=Kn(t,e);this.currentList=e,this.onPatchesNotify(n),e[$r]&&e[$r](this.onPatchesNotify,"notify")},onPatchesNotify:function(e){this.patches.push.apply(this.patches,e),T.deriveQueue.enqueue(this.onPatchesDerive,this,[],{priority:this.priority})},onPatchesDerive:function(){var e=this.patches;this.patches=[],T.enqueueByQueue(this.handlers.getNode([]),this.currentList,[e,this.currentList],null,["Apply patches",e])}},d.assignSymbols(Ci.prototype,{"can.onPatches":function(e,t){this.handlers.add([t||"mutate",e])},"can.offPatches":function(e,t){this.handlers.delete([t||"mutate",e])}});var $p=Ci;function tn(e,t){this.setter=t,_e.call(this,e)}tn.prototype=Object.create(_e.prototype),tn.prototype.constructor=tn,tn.prototype.set=function(e){this.setter(e)},d.assignSymbols(tn.prototype,{"can.setValue":tn.prototype.set});var Uy=tn,Ol=[].splice,Pl=function(e,t,n,r){var a=e.apply(t,n.concat()),o=Ft(a),i=r.createTextNode("");return o.appendChild(i),o},Qp=x.for("can.onPatches"),Gp=x.for("can.offPatches");function Yp(e,t,n,r,a){this.patcher=new $p(t);var o=d.getName(t);this.value=t,this.render=n,this.context=r,this.falseyRender=a,this.range=ke.range.create(e,o),this.indexMap=[],this.itemEndNode=[],this.domQueue=[],this.isValueLike=d.isValueLike(this.value),this.isObservableLike=d.isObservableLike(this.value),this.onPatches=this.onPatches.bind(this),this.processDomQueue=this.processDomQueue.bind(this),this.teardownValueBinding=this.teardownValueBinding.bind(this),this.meta={reasonLog:"live.html add::"+o,element:this.range.start},this.setupValueBinding()}Qp=x.for("can.onPatches"),Gp=x.for("can.offPatches");Yp.prototype={setupValueBinding:function(){this.teardownNodeRemoved=ue.onNodeRemoved(this.range.start,this.teardownValueBinding),this.patcher[Qp](this.onPatches,"notify"),this.patcher.currentList&&this.patcher.currentList.length?this.add(this.patcher.currentList,0):this.addFalseyIfEmpty()},teardownValueBinding:function(){this.exit=!0,this.teardownNodeRemoved(),this.patcher[Gp](this.onPatches,"notify")},onPatches:function(e){if(!this.exit){var t=[];e.forEach(function(o){t.push.apply(t,function(i){//!steal-remove-start
var s=[];if(i.forEach(function(p){p.type==="move"?s.push({patch:p,kind:"move"}):(p.deleteCount&&s.push({type:"splice",index:p.index,deleteCount:p.deleteCount,insert:[]}),p.insert&&p.insert.length&&s.push({type:"splice",index:p.index,deleteCount:0,insert:p.insert}))}),i.length!==2)return i;var u=s[0],c=s[1];if(u.insert&&u.insert.length&&c.deleteCount){var l=u,f=c;if(l.index<f.index)f.index=f.index-l.insert.length;else{if(!(l.index>f.index))throw"indexes the same!";l.index=l.index-f.deleteCount}return[f,l]}return i}([o]))});for(var n=0,r=t.length;n<r;n++){var a=t[n];if(a.type==="move")this.addToDomQueue(this.move,[a.toIndex,a.fromIndex]);else{if(a.type!=="splice")continue;a.deleteCount&&this.addToDomQueue(this.remove,[{length:a.deleteCount},a.index]),a.insert&&a.insert.length&&this.addToDomQueue(this.add,[a.insert,a.index])}}}},addToDomQueue:function(e,t){this.domQueue.push({fn:e,args:t}),T.domQueue.enqueue(this.processDomQueue,this,[this.domQueue],this.meta)},processDomQueue:function(){this.domQueue.forEach(function(e){var t=e.fn,n=e.args;t.apply(this,n)}.bind(this)),this.domQueue=[]},add:function(e,t){var n=this.range.start.ownerDocument,r=n.createDocumentFragment(),a=[],o=[],i=this.render,s=this.context;e.forEach(function(p,v){var g=new _e(v+t),h=new Uy(p,function(w){d.setKeyValue(this.patcher.currentList,g.get(),w)}.bind(this)),m=Pl(i,s,[h,g],n);a.push(m.lastChild),r.appendChild(m),o.push(g)},this),this.indexMap.length||(ke.range.remove(this.range),this.itemEndNode=[]);var u,c=this.itemEndNode.length;if(t===c)u=this.range.end;else if(t===0)u=this.range.start.nextSibling;else{if(!(t<c))throw new Error("Unable to place item");u=this.itemEndNode[t-1].nextSibling}be.insertBefore.call(u.parentNode,r,u),Ol.apply(this.itemEndNode,[t,0].concat(a)),Ol.apply(this.indexMap,[t,0].concat(o));for(var l=t+o.length,f=this.indexMap.length;l<f;l++)this.indexMap[l].set(l)},remove:function(e,t){var n,r;t<0&&(t=this.indexMap.length+t);var a=t+e.length-1;n=t===0?this.range.start:this.itemEndNode[t-1],r=this.itemEndNode[a].nextSibling,this.itemEndNode.splice(t,e.length),n&&r&&ke.range.remove({start:n,end:r});var o=this.indexMap;o.splice(t,e.length);for(var i=t,s=o.length;i<s;i++)o[i].set(i);this.exit||this.addFalseyIfEmpty()},addFalseyIfEmpty:function(){if(this.falseyRender&&this.indexMap.length===0){var e=Pl(this.falseyRender,this.currentList,[this.currentList],this.range.start.ownerDocument);ke.range.update(this.range,e)}},move:function(e,t){var n,r,a=this.itemEndNode[t];n=t>0?this.itemEndNode[t-1].nextSibling:this.range.start.nextSibling,r=t<e?this.itemEndNode[e].nextSibling:e>0?this.itemEndNode[e-1].nextSibling:this.range.start.nextSibling;var o=function(l,f){for(var p,v,g=l.ownerDocument.createDocumentFragment();f!==l;)f=(p=f).previousSibling,g.insertBefore(p,v),v=p;return g.insertBefore(f,v),g}(n,a);r.parentNode.insertBefore(o,r),this.itemEndNode.splice(t,1),this.itemEndNode.splice(e,0,a),e+=1,t+=1;var i=this.indexMap;e-=1;var s=i[t-=1];[].splice.apply(i,[t,1]),[].splice.apply(i,[e,0,s]);for(var u=Math.min(t,e),c=i.length;u<c;u++)i[u].set(u)}};var Fy={attr:function(e,t,n){var r="";//!steal-remove-start
new ke.ListenUntilRemovedAndInitialize(n,function(a){zt.set(e,t,a)},e,"dom",r)},attrs:function(e,t,n,r){var a="";if(d.isObservableLike(t)){//!steal-remove-start
//!steal-remove-end
var o={};new ke.ListenUntilRemovedAndInitialize(t,function(u){var c,l=ke.getAttributeParts(u);for(c in l){var f=l[c];if(f!==o[c]){be.setAttribute.call(e,c,f);var p=Et.attr(c);p&&p(e,{attributeName:c,scope:n,options:r})}delete o[c]}for(c in o)be.removeAttribute.call(e,c);o=l},e,"dom",a)}else{var i=ke.getAttributeParts(t);for(var s in i)be.setAttribute.call(e,s,i[s])}},html:function(e,t,n){var r="",a=ke.range.update;//!steal-remove-end
if(e.nodeType!==Node.COMMENT_NODE){var o=Cl(r),i=o.firstChild;e.parentNode.replaceChild(o,e),e=i}var s=ke.range.create(e,r),u=!1;new ke.ListenUntilRemovedAndInitialize(t,function(c){c&&typeof c[Il]=="function"&&(c=c[Il](n));var l=typeof c=="function",f=l?Cl(r):Ft(c);l&&c(f.firstChild),u===!0?(ke.range.remove(s),a(s,f)):(ke.range.update(s,f),u=!0)},s.start,"dom","live.html replace::"+r)},list:function(e,t,n,r,a){new Yp(e,t,n,r,a)},text:function(e,t){var n,r="";//!steal-remove-start
e.nodeType!==Node.TEXT_NODE&&(n=document.createTextNode(""),e.parentNode.replaceChild(n,e),e=n),new ke.ListenUntilRemovedAndInitialize(t,function(a){e.nodeValue=ke.makeString(a)},e,"dom",r)}},je=Fy,_l=function(){},xo=function(e){e&&(this.filename=e),this.stack=[new Xi]};q(xo.prototype,Ce.mixins),q(xo.prototype,{startSection:function(e){var t=new Xi;this.last().add({process:e,truthy:t}),this.stack.push(t)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var e=new Xi;this.last().last().falsey=e,this.stack.push(e)},compile:function(e){var t=this.stack[0].compile();//!steal-remove-start
//!steal-remove-end
return function(n){function r(){return t(n)}//!steal-remove-start
//!steal-remove-end
var a=new Z(r,null,{isObservable:!1});d.onValue(a,_l);var o=d.getValue(a);d.valueHasDependencies(a)?(e.textContentOnly?je.text(this,a):e.attr?je.attr(this,e.attr,a):je.attrs(this,a,n),d.offValue(a,_l)):e.textContentOnly?this.nodeValue=o:e.attr?be.setAttribute.call(this,e.attr,o):je.attrs(this,o)}}});var Wy=function(e,t,n){return function(r){return e.call(this,r,t,n)}},Xi=function(){this.values=[]};q(Xi.prototype,{add:function(e){this.values.push(e)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var e=this.values,t=e.length,n=0;n<t;n++){var r=this.values[n];typeof r=="object"&&(e[n]=Wy(r.process,r.truthy&&r.truthy.compile(),r.falsey&&r.falsey.compile()))}return function(a){for(var o,i="",s=0;s<t;s++)i+=typeof(o=e[s])=="string"?o:o.call(this,a);return i}}});var ts=xo,Jp=function(e,t){this.expr=e,this.modifiers=t||{},this.isCompute=!1};Jp.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};//!steal-remove-end
var Zi=Jp,Xp=function(e){this._value=e};Xp.prototype.value=function(){return this._value};//!steal-remove-end
var ea=Xp,It={getObservableValue_fromDynamicKey_fromObservable:function(e,t,n,r){var a,o=function(){return X.reads((""+d.getValue(e)).replace(/\./g,"\\."))},i=new hu(function(){var s=X.read(d.getValue(t),o());return a=s.parentHasKey,s.value},function(s){X.write(d.getValue(t),o(),s)});return Z.temporarilyBind(i),i.initialValue=P.peekValue(i),i.parentHasKey=a,i},convertToArgExpression:function(e){return e instanceof Zi||e instanceof ea?e:new Zi(e)},toComputeOrValue:function(e){return d.isObservableLike(e)?d.isValueLike(e)&&d.valueHasDependencies(e)===!1?d.getValue(e):e.compute?e.compute:Gi(e):e},toCompute:function(e){return e&&(e.isComputed?e:e.compute?e.compute:Gi(e))}},Zp=function(e){this.hashExprs=e};Zp.prototype.value=function(e,t){var n={};for(var r in this.hashExprs){var a=It.convertToArgExpression(this.hashExprs[r]),o=a.value.apply(a,arguments);n[r]={call:!a.modifiers||!a.modifiers.compute,value:o}}return new Z(function(){var i={};for(var s in n)i[s]=n[s].call?d.getValue(n[s].value):It.toComputeOrValue(n[s].value);return i})};//!steal-remove-end
var Eo=Zp;//!steal-remove-start
var Do=function(e,t,n){this.root=t,this.key=e};Do.prototype.value=function(e,t){var n=this.root?this.root.value(e,t):e.peek("this");return It.getObservableValue_fromDynamicKey_fromObservable(this.key.value(e,t),n,e,t,{})},Do.prototype.closingTag=function(){//!steal-remove-start
};var Ml=Do,xu=function(e){this.value=e};x.for("can-stache.sourceText");var $y=x.for("can.isView"),Oi=function(e,t){this.methodExpr=e,this.argExprs=t.map(It.convertToArgExpression)};Oi.prototype.args=function(e,t){for(var n={},r=[],a=typeof t=="function",o=0,i=this.argExprs.length;o<i;o++){var s=this.argExprs[o];if(s.expr instanceof Eo&&q(n,s.expr.hashExprs),!a||!t(o)){var u=s.value.apply(s,arguments);r.push({call:!s.modifiers||!s.modifiers.compute,value:u})}}return function(c){var l=[];d.size(n)>0&&(l.hashExprs=n);for(var f=0,p=r.length;f<p;f++)l[f]=c?r[f].value:r[f].call?d.getValue(r[f].value):It.toCompute(r[f].value);return l}},Oi.prototype.value=function(e,t){var n=this.methodExpr.value(e,{proxyMethods:!1});Z.temporarilyBind(n);var r=d.getValue(n),a=this.args(e,r&&r.ignoreArgLookup),o=function(i){var s=d.getValue(n);if(typeof s=="function"){d.isObservableLike(s)&&(s=d.getValue(s));var u=a(s.isLiveBound);return s.requiresOptionsArgument&&(u.hashExprs&&t&&t.exprData&&(t.exprData.hashExprs=u.hashExprs),t!==void 0&&u.push(t)),s[$y]===!0&&(u[0]instanceof He||(u[0]=e.getTemplateContext().add(u[0]))),arguments.length&&u.unshift(new xu(i)),s.apply(n.thisArg||e.peek("this"),u)}};//!steal-remove-end
//!steal-remove-start
return t&&t.doNotWrapInObservation?o():new hu(o,o)},Oi.prototype.closingTag=function(){//!steal-remove-start
return this.methodExpr.key;//!steal-remove-end
};var Gr=Oi,nr=function(e,t,n){this.methodExpr=e,this.argExprs=t,this.hashExprs=n,this.mode=null};nr.prototype.args=function(e){for(var t=[],n=0,r=this.argExprs.length;n<r;n++){var a=this.argExprs[n];t.push(It.toComputeOrValue(a.value.apply(a,arguments)))}return t},nr.prototype.hash=function(e){var t={};for(var n in this.hashExprs){var r=this.hashExprs[n];t[n]=It.toComputeOrValue(r.value.apply(r,arguments))}return t},nr.prototype.value=function(e,t){var n=this.methodExpr instanceof ea?""+this.methodExpr._value:this.methodExpr.key,r=this,a=e.computeData(n,{proxyMethods:!1}),o=a&&a.initialValue,i=a&&a.thisArg;typeof o=="function"&&(a=function(){var s=r.args(e),u=q(q({},t),{hash:r.hash(e),exprData:r});return s.push(u),o.apply(i||e.peek("this"),s)});//!steal-remove-end
return a},nr.prototype.closingTag=function(){return this.methodExpr.key};//!steal-remove-end
var ns=nr,Qy=x.for("can-stache.sourceText"),eh=function(e,t,n){this.key=e,this.rootExpr=t,d.setKeyValue(this,Qy,n)};eh.prototype.value=function(e,t){return this.rootExpr?It.getObservableValue_fromDynamicKey_fromObservable(this.key,this.rootExpr.value(e),e,{},{}):e.computeData(this.key,q({warnOnMissingKey:!0},t))};//!steal-remove-end
var rs=eh,So=Ce.last,Al=x.for("can-stache.sourceText"),th=/[\w\.\\\-_@\/\&%]+/,Gy=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~|\[|\]\s*|\s*(?=\[))/g,Yy=/\]\s+/,Jy=/^('.*?'|".*?"|-?[0-9]+\.?[0-9]*|true|false|null|undefined)$/,Xy=/^[\.@]\w/,Zy=function(e){return function(t){return th.test(t)}(e)&&Xy.test(e)},is=function(e){return e.children||(e.children=[]),e},nh=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};q(nh.prototype,{top:function(){return So(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(e){this.popUntil(e),this.pop()},pop:function(){this.isRootTop()||this.stack.pop()},first:function(e){for(var t=this.stack.length-1;t>0&&e.indexOf(this.stack[t].type)===-1;)t--;return this.stack[t]},firstParent:function(e){for(var t=this.stack.length-2;t>0&&e.indexOf(this.stack[t].type)===-1;)t--;return this.stack[t]},popUntil:function(e){for(;e.indexOf(this.top().type)===-1&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(e,t){var n=this.popUntil(e);is(n).children.push(t)},addToAndPush:function(e,t){this.addTo(e,t),this.stack.push(t)},push:function(e){this.stack.push(e)},topLastChild:function(){return So(this.top().children)},replaceTopLastChild:function(e){var t=is(this.top()).children;return t.pop(),t.push(e),e},replaceTopLastChildAndPush:function(e){this.replaceTopLastChild(e),this.stack.push(e)},replaceTopAndPush:function(e){var t;return this.top()===this.root||this.stack.pop(),(t=is(this.top()).children).pop(),t.push(e),this.stack.push(e),e}});var Vl=function(e){var t=e.lastIndexOf("./"),n=e.lastIndexOf(".");if(n>t)return e.substr(0,n)+"@"+e.substr(n+1);var r=t===-1?0:t+2,a=e.charAt(r);return a==="."||a==="@"?e.substr(0,r)+"@"+e.substr(r+1):e.substr(0,r)+"@"+e.substr(r)},Yr=function(e){var t=e.top();if(t&&t.type==="Lookup"){var n=e.stack[e.stack.length-2];n.type!=="Helper"&&n&&e.replaceTopAndPush({type:"Helper",method:t})}},To={toComputeOrValue:It.toComputeOrValue,convertKeyToLookup:Vl,Literal:ea,Lookup:rs,Arg:Zi,Hash:function(){},Hashes:Eo,Call:Gr,Helper:ns,Bracket:Ml,SetIdentifier:xu,tokenize:function(e){var t=[];return(e.trim()+" ").replace(Gy,function(n,r){Yy.test(r)?(t.push(r[0]),t.push(r.slice(1))):t.push(r)}),t},lookupRules:{default:function(e,t,n){return e.type==="Helper"?ns:rs},method:function(e,t,n){return rs}},methodRules:{default:function(e){return e.type==="Call"?Gr:ns},call:function(e){return Gr}},parse:function(e,t){t=t||{};var n=this.ast(e);return t.lookupRule||(t.lookupRule="default"),typeof t.lookupRule=="string"&&(t.lookupRule=To.lookupRules[t.lookupRule]),t.methodRule||(t.methodRule="default"),typeof t.methodRule=="string"&&(t.methodRule=To.methodRules[t.methodRule]),this.hydrateAst(n,t,t.baseMethodType||"Helper")},hydrateAst:function(e,t,n,r){var a;if(e.type==="Lookup")return new(t.lookupRule(e,n,r))(e.key,e.root&&this.hydrateAst(e.root,t,n),e[Al]);if(e.type==="Literal")return new ea(e.value);if(e.type==="Arg")return new Zi(this.hydrateAst(e.children[0],t,n,r),{compute:!0});if(e.type==="Hash")throw new Error("");if(e.type==="Hashes")return a={},e.children.forEach(function(l){a[l.prop]=this.hydrateAst(l.children[0],t,n,!0)},this),new Eo(a);if(e.type==="Call"||e.type==="Helper"){a={};var o=[],i=e.children,s=t.methodRule(e);if(i)for(var u=0;u<i.length;u++){var c=i[u];c.type==="Hashes"&&e.type==="Helper"&&s!==Gr?c.children.forEach(function(l){a[l.prop]=this.hydrateAst(l.children[0],t,e.type,!0)},this):o.push(this.hydrateAst(c,t,e.type,!0))}return new s(this.hydrateAst(e.method,t,e.type),o,a)}return e.type==="Bracket"?new Ml(this.hydrateAst(e.children[0],t),e.root?this.hydrateAst(e.root,t):void 0):void 0},ast:function(e){var t=this.tokenize(e);return this.parseAst(t,{index:0})},parseAst:function(e,t){for(var n,r,a,o,i=new nh;t.index<e.length;){var s=e[t.index],u=e[t.index+1];if(t.index++,u==="="){(n=i.top())&&n.type==="Lookup"&&((r=i.firstParent(["Call","Helper","Hash"])).type!=="Call"&&r.type!=="Root"||(i.popUntil(["Call"]),n=i.top(),i.replaceTopAndPush({type:"Helper",method:n.type==="Root"?So(n.children):n})));var c={type:"Hash",prop:s};(r=i.first(["Call","Helper","Hashes","Root"])).type==="Hashes"?i.addToAndPush(["Hashes"],c):(i.addToAndPush(["Helper","Call","Root"],{type:"Hashes",children:[c]}),i.push(c)),t.index++}else if(Jy.test(s))Yr(i),(r=i.first(["Helper","Call","Hash","Bracket"])).type==="Hash"&&r.children&&r.children.length>0?i.addTo(["Helper","Call","Bracket"],{type:"Literal",value:Ce.jsonParse(s)}):r.type==="Bracket"&&r.children&&r.children.length>0?i.addTo(["Helper","Call","Hash"],{type:"Literal",value:Ce.jsonParse(s)}):i.addTo(["Helper","Call","Hash","Bracket"],{type:"Literal",value:Ce.jsonParse(s)});else if(th.test(s))a=i.topLastChild(),r=i.first(["Helper","Call","Hash","Bracket"]),a&&(a.type==="Call"||a.type==="Bracket")&&Zy(s)?i.replaceTopLastChildAndPush({type:"Lookup",root:a,key:s.slice(1)}):r.type==="Bracket"?r.children&&r.children.length>0?i.first(["Helper","Call","Hash","Arg"]).type==="Helper"&&s[0]!=="."?i.addToAndPush(["Helper"],{type:"Lookup",key:s}):i.replaceTopAndPush({type:"Lookup",key:s.slice(1),root:r}):i.addToAndPush(["Bracket"],{type:"Lookup",key:s}):(Yr(i),i.addToAndPush(["Helper","Call","Hash","Arg","Bracket"],{type:"Lookup",key:s}));else if(s==="~")Yr(i),i.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:s});else if(s==="(")if(n=i.top(),a=i.topLastChild(),n.type==="Lookup")i.replaceTopAndPush({type:"Call",method:(o=n,o.type==="Lookup"&&(d.setKeyValue(o,Al,o.key),o.key=Vl(o.key)),o)});else{if(!a||a.type!=="Call")throw new Error("Unable to understand expression "+e.join(""));i.replaceTopAndPush({type:"Call",method:a})}else if(s===")")i.popTo(["Call"]);else if(s===",")i.first(["Call"]).type!=="Call"?i.popUntil(["Hash"]):i.popUntil(["Call"]);else if(s==="[")if(n=i.top(),!(a=i.topLastChild())||a.type!=="Call"&&a.type!=="Bracket")if(n.type==="Lookup"||n.type==="Bracket"){var l={type:"Bracket",root:n};//!steal-remove-start
i.replaceTopAndPush(l)}else n.type==="Call"?i.addToAndPush(["Call"],{type:"Bracket"}):n===" "?(i.popUntil(["Lookup","Call"]),Yr(i),i.addToAndPush(["Helper","Call","Hash"],{type:"Bracket"})):i.replaceTopAndPush({type:"Bracket"});else i.replaceTopLastChildAndPush({type:"Bracket",root:a});else s==="]"?i.pop():s===" "&&i.push(s)}return i.root.children[0]}},Ze=To,Pt=Ze,eb=x.for("can.toDOM");function rh(e,t,n){this.metadata={rendered:!1},this.stringOnly=n,this.scope=e,this.exprData=t}he(rh.prototype,"context",function(){return this.scope.peek("this")});var tb=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,nb=/\s*\{\{--\}\}\s*|\s*(\{\{\{?)-|-(\}\}\}?)\s*/g,Nl=function(){},Lo=x.for("can.viewInsert");function Rl(e){return e!==null&&typeof e=="object"&&(typeof e[eb]=="function"||typeof e[Lo]=="function"||typeof e.nodeType=="number")}var on={expression:Pt,makeEvaluator:function(e,t,n,r,a,o){if(t==="^"){var i=r;r=a,a=i}var s,u=new rh(e,n,o);if(Ce.createRenderers(u,e,r,a,o),n instanceof Pt.Call)s=n.value(e,u);else if(n instanceof Pt.Bracket)s=n.value(e);else if(n instanceof Pt.Lookup)s=n.value(e);else if(n instanceof Pt.Literal)s=n.value.bind(n);else if(n instanceof Pt.Helper&&n.methodExpr instanceof Pt.Bracket)s=n.methodExpr.value(e,u);else if(typeof(s=n.value(e,u))=="function")return s;return!t||u.metadata.rendered?s:t==="#"||t==="^"?function(){var c,l=d.getValue(s);if(u.metadata.rendered)c=l;else if(typeof l!="string"&&d.isListLike(l)){var f=d.isObservableLike(l)&&d.isListLike(l);c=d.getKeyValue(l,"length")?o?Ce.getItemsStringContent(l,f,u):Ft(Ce.getItemsFragContent(l,u,e)):u.inverse(e)}else c=l?u.fn(l||e):u.inverse(e);return u.metadata.rendered=!1,c}:void 0},makeLiveBindingPartialRenderer:function(e,t){var n,r=(e=e.trim()).split(/\s+/).shift();return r!==e&&(n=on.expression.parse(e)),function(a){//!steal-remove-start
//!steal-remove-end
var o=new Z(function(){var i=r,s=a;if(n&&n.argExprs.length===1){var u=d.getValue(n.argExprs[0].value(a));u===void 0||(s=a.add(u))}var c,l=d.getKeyValue(s.templateContext.partials,i);if(l)c=function(){return l.render?l.render(s):l(s)};else{var f=s.read(i,{isArgument:!0}).value;if(f===null||!f&&i[0]==="*")return Ft("");f&&(i=f),c=function(){if(typeof i=="function")return i(s,{});var v=on.getTemplateById(i);//!steal-remove-start
//!steal-remove-end
return v?v(s,{}):ie().createDocumentFragment()}}var p=P.ignore(c)();return Ft(p)});je.html(this,o)}},makeStringBranchRenderer:function(e,t,n){var r=on.expression.parse(t),a=e+t,o=function(i,s,u){//!steal-remove-start
//!steal-remove-end
var c,l=i.__cache[a];return!e&&l||(l=ql(i,e,r,s,u,!0),e||(i.__cache[a]=l)),(c=l[x.for("can.onValue")]?d.getValue(l):l())==null?"":c.nodeType===11?c.textContent:""+c};return o.exprData=r,o},makeLiveBindingBranchRenderer:function(e,t,n){var r=on.expression.parse(t),a=function(o,i,s){var u=n.tag;//!steal-remove-start
//!steal-remove-end
var c,l=ql(o,e,r,i,s,u);l[x.for("can.onValue")]?c=l:c=new Z(l,null,{isObservable:!1}),d.onValue(c,Nl);var f=d.getValue(c);if(typeof f!="function"||r instanceof Pt.Lookup){if(d.valueHasDependencies(c))n.attr?je.attr(this,n.attr,c):n.tag?je.attrs(this,c):n.text&&!Rl(f)?je.text(this,c):je.html(this,c);else if(n.attr)ue.setAttribute(this,n.attr,f);else if(n.tag)je.attrs(this,f);else if(n.text&&!Rl(f))this.nodeValue=ke.makeString(f);else if(f!=null)if(typeof f[Lo]=="function"){var p=f[Lo]({});this.parentNode.replaceChild(p,this)}else this.parentNode.replaceChild(Ft(f,this.ownerDocument),this)}else P.ignore(f)(this);d.offValue(c,Nl)};return a.exprData=r,a},splitModeFromExpression:function(e,t){var n=(e=e.trim()).charAt(0);return"#/{&^>!<".indexOf(n)>=0?e=e.substr(1).trim():n=null,n==="{"&&t.node&&(n=null),{mode:n,expression:e}},cleanLineEndings:function(e){return e.replace(tb,function(t,n,r,a,o,i,s,u,c,l){i=i||"",n=n||"",r=r||"";var f=rb(o||c,{});return u||">{".indexOf(f.mode)>=0?t:"^#!/".indexOf(f.mode)>=0?(r=n+r&&" ")+a+(l!==0&&s.length?n+`
`:""):r+a+i+(r.length||l!==0?n+`
`:"")})},cleanWhitespaceControl:function(e){return e.replace(nb,"$1$2")},getTemplateById:function(){}},ql=on.makeEvaluator,rb=on.splitModeFromExpression,qt=on;ce.define("base-url",function(){var e=ce.getKeyValue("global"),t=ce.getKeyValue("document");if(t&&"baseURI"in t)return t.baseURI;if(e.location){var n=e.location.href,r=n.lastIndexOf("/");return r!==-1?n.substr(0,r):n}return typeof process<"u"?process.cwd():void 0});var ib=ce.makeExport("base-url"),ta=M.parseURI=function(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null},jl=M.joinURIs=function(e,t){return t=ta(t||""),e=ta(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(n=t.protocol||t.authority||t.pathname.charAt(0)==="/"?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,r=[],n.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(a){a==="/.."?r.pop():r.push(a)}),r.join("").replace(/^\//,n.charAt(0)==="/"?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var n,r};function ih(e,t){//!steal-remove-start
dn.warn("Forgotten {{debugger}} helper")}ih.requiresOptionsArgument=!0;var ab=ih,sb=function(e){return new Z(function(){return!!d.getValue(e)})},Kl=function(e){return e=e||{},function(t,n){var r=d.toArray(arguments);return t instanceof xu?typeof e.set=="function"?e.set.apply(this,[t.value].concat(r.slice(1))):n(t.value):typeof e.get=="function"?e.get.apply(this,r):r[0]}},Pi=function(e){if(e.exprData.argExprs.length!==1)throw new Error("for(of) broken syntax");var t,n,r=e.exprData.argExprs[0].expr;if(r instanceof Ze.Lookup)n=r.value(e.scope);else if(r instanceof Ze.Helper){if(r.argExprs[0].key!=="of")throw new Error("for(of) broken syntax");t=r.methodExpr.key,n=r.argExprs[1].value(e.scope)}var a=n,o=[].slice.call(arguments).pop(),i=function(u){return u&&d.isValueLike(u)?(Z.temporarilyBind(u),d.getValue(u)):u}(a);if(i&&i===Math.floor(i))return function(u,c,l){for(var f=[],p=0;p<u;p++){var v={};c!==void 0&&(v[c]=p),f.push(l.fn(l.scope.add({index:p},{special:!0}).addLetContext(v)))}return l.stringOnly?f.join(""):f}(i,t,e);if(i&&!d.isListLike(i))return function(u,c,l){var f=[];return d.each(u,function(p,v){var g=new Yi(u,v.replace(/\./g,"\\.")),h={};c!==void 0&&(h[c]=g),f.push(l.fn(l.scope.add({key:v},{special:!0}).addLetContext(h)))}),l.stringOnly?f.join(""):f}(i,t,e);if(o.stringOnly){var s=[];return d.eachIndex(i,function(u,c){var l={};t!==void 0&&(l[t]=u),s.push(e.fn(o.scope.add({index:c},{special:!0}).addLetContext(l)))}),s.join("")}return o.metadata.rendered=!0,function(u){je.list(u,a,function(c,l){var f={};return t!==void 0&&(f[t]=c),o.fn(o.scope.add({index:l},{special:!0}).addLetContext(f),o.options)},o.context,function(c){return o.inverse(o.scope,o.options)})}};Pi.isLiveBound=!0,Pi.requiresOptionsArgument=!0,Pi.ignoreArgLookup=function(e){return e===0};var ob=Pi;function ub(e){return e._meta.variable===!0}var cb=P.ignore(function(e){if(e.isSection)return e.fn(e.scope.addLetContext(e.hash));var t=e.scope.getScope(ub);if(!t)throw new Error("There is no variable scope!");return d.assignMap(t._context,e.hash),document.createTextNode("")}),as=x.for("done.keepNode");function Io(e,t){var n,r,a,o,i="portal("+d.getName(e)+")";function s(){for(var f=t.fn(t.scope.addLetContext({}),t.options),p=f.firstChild;p;)p[as]=!0,p=p.nextSibling;return f}//!steal-remove-start
function u(){if(n&&(d.offValue(e,l),n=null),r&&a){var f=r.parentNode;f&&(ke.range.remove({start:r,end:a}),be.removeChild.call(f,r),be.removeChild.call(f,a),r=a=null)}}function c(){o&&o(),u()}function l(){if(u(),d.onValue(e,l),n=d.getValue(e)){r=n.ownerDocument.createComment(i+" contents"),a=n.ownerDocument.createComment("can-end-placeholder"),r[as]=!0,a[as]=!0,n.appendChild(r),n.appendChild(a);var f=new Z(s,null,{isObservable:!1});je.html(r,f)}else t.metadata.rendered=!0}return l(),function(f){var p=f.ownerDocument.createComment(i);return f.parentNode.replaceChild(p,f),o=ue.onNodeRemoved(p,c),p}}Io.isLiveBound=!0,Io.requiresOptionsArgument=!0;var lb=Io,fb=ab,ah={},Co={},ss=new WeakMap,G={looksLikeOptions:function(e){return e&&typeof e.fn=="function"&&typeof e.inverse=="function"},resolve:function(e){return e&&d.isValueLike(e)?d.getValue(e):e},resolveHash:function(e){var t={};for(var n in e)t[n]=G.resolve(e[n]);return t},bindAndRead:function(e){return e&&d.isValueLike(e)?(Z.temporarilyBind(e),d.getValue(e)):e},registerHelper:function(e,t){//!steal-remove-start
t.requiresOptionsArgument=!0,Dt[e]=t},registerHelpers:function(e){var t,n;for(t in e)n=e[t],G.registerHelper(t,G.makeSimpleHelper(n))},registerConverter:function(e,t){G.registerHelper(e,Kl(t))},makeSimpleHelper:function(e){return function(){var t=[];return d.eachIndex(arguments,function(n){t.push(G.resolve(n))}),e.apply(this,t)}},addHelper:function(e,t){return typeof e=="object"?G.registerHelpers(e):G.registerHelper(e,G.makeSimpleHelper(t))},addConverter:function(e,t){if(typeof e!="object"){var n=Kl(t);n.isLiveBound=!0,G.registerHelper(e,n)}else ss.has(e)||(ss.set(e,!0),d.eachKey(e,function(r,a){G.addConverter(a,r)}))},addLiveHelper:function(e,t){return t.isLiveBound=!0,G.registerHelper(e,t)},getHelper:function(e,t){var n=t&&t.getHelper(e);return n||(n=Dt[e]),n},__resetHelpers:function(){for(var e in Dt)delete Dt[e];ss.delete(Co),G.addBuiltInHelpers(),G.addBuiltInConverters()},addBuiltInHelpers:function(){d.each(ah,function(e,t){Dt[t]=e})},addBuiltInConverters:function(){G.addConverter(Co)},_makeLogicHelper:function(e,t){var n=q(function(){var r,a=Array.prototype.slice.call(arguments,0);function o(){return r?!!t(a):t(a)}//!steal-remove-start
G.looksLikeOptions(a[a.length-1])&&(r=a.pop());//!steal-remove-end
var i=new Z(o);return r?i.get()?r.fn():r.inverse():i.get()},{requiresOptionsArgument:!0,isLiveBound:!0});//!steal-remove-start
//!steal-remove-end
return n}},Oo=q(function(e,t){var n;return n=e&&d.isValueLike(e)?d.getValue(new sb(e)):!!G.resolve(e),t?n?t.fn(t.scope||this):t.inverse(t.scope||this):!!n},{requiresOptionsArgument:!0,isLiveBound:!0}),Bl=G._makeLogicHelper("eq",function(e){for(var t,n,r=0;r<e.length;r++){if(t=typeof(t=G.resolve(e[r]))=="function"?t():t,r>0&&t!==n)return!1;n=t}return!0}),db=G._makeLogicHelper("and",function(e){if(e.length===0)return!1;for(var t,n=0,r=e.length;n<r;n++)if(!(t=G.resolve(e[n])))return t;return t}),pb=G._makeLogicHelper("or",function(e){if(e.length===0)return!1;for(var t,n=0,r=e.length;n<r;n++)if(t=G.resolve(e[n]))return t;return t}),sh=function(e,t){G.resolve(e);var n=!1,r=function(i,s){if(!n&&G.resolve(e)===G.resolve(i))return n=!0,s.fn(s.scope)};r.requiresOptionsArgument=!0;var a=function(i){if(!n)return!i||i.scope.peek("this")};a.requiresOptionsArgument=!0,d.assignSymbols(a,{"can.isValueLike":!0,"can.isFunctionLike":!1,"can.getValue":function(){return this(t)}});var o=t.scope.add({case:r,default:a},{notContext:!0});return t.fn(o,t)};sh.requiresOptionsArgument=!0;var oh=function(e){var t=[].slice.call(arguments),n=t.pop(),r=t.map(function(s){var u=G.resolve(s);return typeof u=="function"?u():u}).join(""),a=d.getKeyValue(n.scope.templateContext.helpers,"module"),o=a?a.uri:void 0;if(r[0]==="."&&o)return jl(o,r);var i=typeof System<"u"&&(System.renderingBaseURL||System.baseURL)||ib();return r[0]!=="/"&&i[i.length-1]!=="/"&&(i+="/"),jl(i,r)};oh.requiresOptionsArgument=!0;var lr=function(e){var t,n,r=[].slice.call(arguments).pop(),a=r.exprData.hashExprs,o=G.bindAndRead(e);if(d.size(a)>0&&(t={},d.eachKey(a,function(u,c){t[u.key]=c})),(d.isObservableLike(o)&&d.isListLike(o)||d.isListLike(o)&&d.isValueLike(e))&&!r.stringOnly)return r.metadata.rendered=!0,function(u){je.list(u,e,function(c,l){var f={};return d.size(t)>0&&(t.value&&(f[t.value]=c),t.index&&(f[t.index]=l)),r.fn(r.scope.add(f,{notContext:!0}).add({index:l},{special:!0}).add(c),r.options)},r.context,function(c){return r.inverse(r.scope.add(c),r.options)})};var i,s=G.resolve(e);return s&&d.isListLike(s)?(i=Ce.getItemsFragContent(s,r,r.scope),r.stringOnly?i.join(""):i):d.isObservableLike(s)&&d.isMapLike(s)||s instanceof Object?(i=[],d.each(s,function(u,c){var l=new Yi(s,c);n={},d.size(t)>0&&(t.value&&(n[t.value]=l),t.key&&(n[t.key]=c)),i.push(r.fn(r.scope.add(n,{notContext:!0}).add({key:c},{special:!0}).add(l)))}),r.stringOnly?i.join(""):i):void 0};lr.isLiveBound=!0,lr.requiresOptionsArgument=!0,lr.ignoreArgLookup=function(e){return e===1};var hb=q(function(e,t){t||(t=e,e=0);var n=t.scope.peek("scope.index");return""+((typeof n=="function"?n():n)+e)},{requiresOptionsArgument:!0}),uh=function(e,t){var n=e;return t?(e=G.resolve(e),t.hash&&d.size(t.hash)>0&&(n=t.scope.add(t.hash,{notContext:!0}).add(n))):(t=e,e=!0,n=t.hash),t.fn(n||{})};uh.requiresOptionsArgument=!0;var Po=function(e,t){return t?Oo.apply(this,[e,q(q({},t),{fn:t.inverse,inverse:t.fn})]):!Oo.apply(this,[e])};Po.requiresOptionsArgument=!0,Po.isLiveBound=!0;var vb={get:function(e,t){return G.looksLikeOptions(t)?d.getValue(e)?t.inverse():t.fn():!d.getValue(e)},set:function(e,t){d.setValue(t,!e)}};q(ah,{debugger:fb,each:lr,eachOf:lr,index:hb,if:Oo,is:Bl,eq:Bl,unless:Po,with:uh,console,data:function(e,t){var n=(G.looksLikeOptions(t)?t.context:t)||this;return function(r){//!steal-remove-start
xe.set(r,e,n)}},domData:function(e,t){var n=(G.looksLikeOptions(t)?t.context:t)||this;return function(r){xe.set(r,e,n)}},switch:sh,joinBase:oh,and:db,or:pb,let:cb,for:ob,portal:lb}),q(Co,{not:vb}),G.addBuiltInHelpers(),G.addBuiltInConverters();var Nn=G,gb=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mb=/(\s*)(\{\{\{?)(-?)([\s\S]*?)(-?)(\}\}\}?)(\s*)/g;function yb(e,t,n,r,a,o,i,s){return r==="-"&&(t=""),o==="-"&&(s=""),t+n+a+i+s}var bb=function(e){return e.replace(gb,function(t,n,r,a,o,i,s,u,c,l){i=i||"",n=n||"",r=r||"";var f=function(p,v){var g=(p=p.trim()).charAt(0);return"#/{&^>!<".indexOf(g)>=0?p=p.substr(1).trim():g=null,g==="{"&&v.node&&(g=null),{mode:g,expression:p}}(o||c,{});return u||">{".indexOf(f.mode)>=0?t:"^#!/".indexOf(f.mode)>=0?(r=n+r&&" ")+a+(l!==0&&s.length?n+`
`:""):r+a+i+(r.length||l!==0?n+`
`:"")})},zl={cleanLineEndings:bb,cleanWhitespaceControl:function(e){return e.replace(mb,yb)}},wb=function(e,t){arguments.length===1&&(t=arguments[0],e=void 0);var n=t;n=zl.cleanWhitespaceControl(n),n=zl.cleanLineEndings(n);var r=[],a=[],o=[],i={},s=new Map,u=!1,c=!1,l=!1,f=!1,p=!1,v="",g="",h=null;function m(y){v&&(i[v]=g,v=""),p?a.push(g):r.push(g),o.push({specifier:g,loc:{line:y},attributes:s}),s=new Map}var w=vu(n,{filename:e,start:function(y,k){y==="can-import"?(f=k,p=!1,u=!0):y==="can-dynamic-import"?(f=k,p=!0,u=!0):u&&(p=!0,u=!1)},attrStart:function(y){h=y,s.set(h,!0),y==="from"?c=!0:y!=="as"&&y!=="export-as"||(l=!0)},attrEnd:function(y){y==="from"?c=!1:y!=="as"&&y!=="export-as"||(l=!1)},attrValue:function(y){u&&s.set(h,y),c&&u?g=y:l&&u&&(v=y)},end:function(y,k,E){y!=="can-import"&&y!=="can-dynamic-import"||!f||m(E)},close:function(y,k,E){y!=="can-import"&&y!=="can-dynamic-import"||m(E)},chars:function(y){y.trim().length>0&&(p=!0)},special:function(){p=!0}},!0);return{intermediate:w,program:w,imports:r,dynamicImports:a,importDeclarations:o,ases:i,exports:i}},kb=et(),Hl=function(e,t){if(kb.stealRequire!==void 0)return steal.import(e,{name:t})},os=et(),Ul=function(e,t){if(typeof os.System=="object"&&function(n){return typeof n=="function"}(os.System.import))return os.System.import(e,{name:t})},Fl=ye(function(e){"HTMLScriptElement"in et()&&"noModule"in HTMLScriptElement.prototype?e.exports=new Function("moduleName",`if (!(moduleName.match(/[^\\\\\\/]\\.([^.\\\\\\/]+)$/) || [null]).pop()) {
moduleName += '.js';
}
return import(moduleName.replace(/['"]+/g, ''));
`):e.exports=function(){}}),Wl=function(e){if(so())return Promise.resolve(Vd())},us=et(),xb=function(e){if(us.define&&us.define.amd)return new Promise(function(t,n){us.require([e],function(r){t(r)})})},na=[];function ot(e){typeof e=="function"&&na.push(e)}function ch(){na=[]}function lh(e){switch(ch(),e){case"stealjs":ot(Hl),ot(Ul);break;case"ES2020":case"es2020":case"dynamic-import":ot(Fl);break;case"node":ot(Wl);break;default:ot(Hl),ot(Fl),ot(Wl),ot(xb),ot(Ul)}}lh("all");var _i=M.import=function(e,t){return new Promise(function(n,r){try{for(var a,o=na.length-1;o>=0&&!(a=na[o](e,t));o--);a?a.then(n,r):r("no proper module-loader available")}catch(i){r(i)}})},Eb=ot,Db=ch,Sb=lh;_i.addLoader=Eb,_i.flushLoader=Db,_i.preset=Sb;var Tb=wb,$l=Ce.makeRendererConvertScopes,Lb=Ce.last;Et.tag("content")||Et.tag("content",function(e,t){return t.scope});var Ib=x.for("can.isView"),Fe="http://www.w3.org/2000/svg",Ql={svg:Fe,g:Fe,defs:Fe,path:Fe,filter:Fe,feMorphology:Fe,feGaussianBlur:Fe,feOffset:Fe,feComposite:Fe,feColorMatrix:Fe,use:Fe},Gl={xmlns:"http://www.w3.org/2000/xmlns/","xlink:href":"http://www.w3.org/1999/xlink"},Yl={style:!0,script:!0};function lt(e,t){arguments.length===1&&(t=arguments[0],e=void 0);var n={};typeof t=="string"&&(t=qt.cleanWhitespaceControl(t),t=qt.cleanLineEndings(t));var r=new Fr(e),a={node:null,attr:null,sectionElementStack:[],text:!1,namespaceStack:[],textContentOnly:null},o=function(f,p,v,g){if(p===">")f.add(qt.makeLiveBindingPartialRenderer(v,s({filename:f.filename,lineNo:g})));else if(p==="/"){//!steal-remove-start
f.last().startedWith==="<"?(n[v]=f.endSubSectionAndReturnRenderer(),f.removeCurrentNode(),f.removeCurrentNode()):f.endSection();//!steal-remove-end
f instanceof Fr&&a.sectionElementStack.pop()}else if(p==="else")f.inverse();else{var h=f instanceof Fr?qt.makeLiveBindingBranchRenderer:qt.makeStringBranchRenderer;if(p==="{"||p==="&")f.add(h(null,v,s({filename:f.filename,lineNo:g})));else if(p==="#"||p==="^"||p==="<"){var m=h(p,v,s({filename:f.filename,lineNo:g})),w={type:"section"};if(f.startSection(m,v),f.last().startedWith=p,f instanceof Fr){//!steal-remove-start
a.sectionElementStack.push(w)}}else f.add(h(null,v,s({text:!0,filename:f.filename,lineNo:g})))}},i=function(){var f=a.sectionElementStack[a.sectionElementStack.length-1];return!a.sectionElementStack.length||f.type==="section"||f.type==="custom"},s=function(f){var p={tag:a.node&&a.node.tag,attr:a.attr&&a.attr.name,directlyNested:i(),textContentOnly:!!a.textContentOnly};return f?q(p,f):p},u=function(f,p){f.attributes||(f.attributes=[]),f.attributes.unshift(p)};vu(t,{filename:e,start:function(f,p,v){var g=Ql[f];g&&!p&&a.namespaceStack.push(g),a.node={tag:f,children:[],namespace:g||Lb(a.namespaceStack)}},end:function(f,p,v){var g=Et.tag(f),h=i();p?(r.add(a.node),g&&u(a.node,function(m){//!steal-remove-start
Et.tagHandler(this,f,{scope:m,subtemplate:null,templateType:"stache",directlyNested:h})})):(r.push(a.node),a.sectionElementStack.push({type:g?"custom":null,tag:g?null:f,templates:{},directlyNested:h}),g?r.startSubSection():Yl[f]&&(a.textContentOnly=new ts(e))),a.node=null},close:function(f,p){Ql[f]&&a.namespaceStack.pop();var v,g=Et.tag(f);g&&(v=r.endSubSectionAndReturnRenderer()),Yl[f]&&(r.last().add(a.textContentOnly.compile(s())),a.textContentOnly=null);var h=r.pop();if(g)if(f==="can-template"){var m=a.sectionElementStack[a.sectionElementStack.length-2];v&&(m.templates[h.attrs.name]=$l(v)),r.removeCurrentNode()}else{var w=a.sectionElementStack[a.sectionElementStack.length-1];u(h,function(y){//!steal-remove-start
Et.tagHandler(this,f,{scope:y,subtemplate:v&&$l(v),templateType:"stache",templates:w.templates,directlyNested:w.directlyNested})})}a.sectionElementStack.pop()},attrStart:function(f,p){a.node.section?a.node.section.add(f+'="'):a.attr={name:f,value:""}},attrEnd:function(f,p){var v=Gl[f];if(a.node.section)a.node.section.add('" ');else{a.node.attrs||(a.node.attrs={}),a.attr.section?a.node.attrs[a.attr.name]=a.attr.section.compile(s()):a.node.attrs[a.attr.name]=v?{value:a.attr.value,namespaceURI:Gl[f]}:a.attr.value;var g=Et.attr(f);//!steal-remove-start
g&&(a.node.attributes||(a.node.attributes=[]),a.node.attributes.push(function(h){//!steal-remove-start
g(this,{attributeName:f,scope:h})})),a.attr=null}},attrValue:function(f,p){var v=a.node.section||a.attr.section;v?v.add(f):a.attr.value+=f},chars:function(f,p){(a.textContentOnly||r).add(f)},special:function(f,p){var v=qt.splitModeFromExpression(f,a),g=v.mode,h=v.expression;if(h!=="else"){if(g!=="!")if(a.node&&a.node.section)o(a.node.section,g,h,p),a.node.section.subSectionDepth()===0&&(a.node.attributes.push(a.node.section.compile(s())),delete a.node.section);else if(a.attr)a.attr.section||(a.attr.section=new ts(e),a.attr.value&&a.attr.section.add(a.attr.value)),o(a.attr.section,g,h,p);else if(a.node)if(a.node.attributes||(a.node.attributes=[]),g){if(g!=="#"&&g!=="^")throw new Error(g+" is currently not supported within a tag.");a.node.section||(a.node.section=new ts(e)),o(a.node.section,g,h,p)}else a.node.attributes.push(qt.makeLiveBindingBranchRenderer(null,h,s({filename:r.filename,lineNo:p})));else o(a.textContentOnly||r,g,h,p)}else(a.attr&&a.attr.section?a.attr.section:a.node&&a.node.section?a.node.section:a.textContentOnly||r).inverse()},comment:function(f){r.add({comment:f})},done:function(f){//!steal-remove-start
}});var c=r.compile(),l=P.ignore(function(f,p){!p||p.helpers||p.partials||p.tags||(p={helpers:p}),d.eachKey(p&&p.helpers,function(h){h.requiresOptionsArgument=!0});var v=new st(p);//!steal-remove-end
if(d.eachKey(n,function(h,m){d.setKeyValue(v.partials,m,h)}),d.setKeyValue(v,"view",l),f instanceof He){var g=new He(v);g._parent=f._parent,f._parent=g}else f=new He(v).add(f);return c(f.addLetContext())});return l[Ib]=!0,l}q(lt,Nn),lt.safeString=function(e){return d.assignSymbols({},{"can.toDOM":function(){return e}})},lt.async=function(e){var t=Tb(e),n=t.imports.map(function(r){return _i(r)});return Promise.all(n).then(function(){return lt(t.intermediate)})};var Jr={};lt.from=qt.getTemplateById=function(e){if(!Jr[e]){var t=ie().getElementById(e);t&&(Jr[e]=lt("#"+e,t.innerHTML))}return Jr[e]},lt.registerPartial=function(e,t){Jr[e]=typeof t=="string"?lt(t):t},lt.addBindings=Et.attrs;var Bn=M.stache=lt,cs=x.for("can.viewModel"),Cb=M.viewModel=function(e,t,n){if(typeof e=="string"?e=ie().querySelector(e):d.isListLike(e)&&!e.nodeType&&(e=e[0]),d.isObservableLike(t)&&d.isMapLike(t))e[cs]=t;else{var r=e[cs];switch(r||(r=new an,e[cs]=r),arguments.length){case 0:case 1:return r;case 2:return d.getKeyValue(r,t);default:return d.setKeyValue(r,t,n),e}}},Jl=Fi.isDomEventTarget,_o={on:function(e,t,n){Jl(this)?oe.addEventListener(this,e,t,n):d.onKeyValue(this,e,t,n)},off:function(e,t,n){Jl(this)?oe.removeEventListener(this,e,t,n):d.offKeyValue(this,e,t,n)},one:function(e,t,n){var r=function(){return _o.off.call(this,e,r,n),t.apply(this,arguments)};return _o.on.call(this,e,r,n),this}},Xr=_o;function Xl(){return ie().documentElement}function Zl(e){for(;e&&e.nodeName!=="FORM";)e=e.parentNode;return e}function Ob(e,t){var n=e.getAttribute("name");return n&&n===t.getAttribute("name")&&Zl(e)===Zl(t)}function ef(e){return e.nodeName==="INPUT"&&e.type==="radio"}var We={defaultEventType:"radiochange",addEventListener:function(e,t,n){if(!ef(e))throw new Error("Listeners for "+t+" must be radio inputs");var r=We._eventTypeTrackedRadios;r||(r=We._eventTypeTrackedRadios={},We._rootListener||(We._rootListener=function(o,i){var s=Xl(),u=function(c){var l=c.target;if(ef(l))for(var f in i){var p={type:f};i[f].forEach(function(v){Ob(l,v)&&o.dispatch(v,p,!1)})}};return o.addEventListener(s,"change",u),u}(this,r)));var a=We._eventTypeTrackedRadios[t];a||(a=We._eventTypeTrackedRadios[t]=new Set),a.add(e),e.addEventListener(t,n)},removeEventListener:function(e,t,n){e.removeEventListener(t,n);var r=We._eventTypeTrackedRadios;if(r){var a=r[t];if(a&&(a.delete(e),a.size===0)){for(var o in delete r[t],r)if(r.hasOwnProperty(o))return;delete We._eventTypeTrackedRadios,function(i,s){var u=Xl();i.removeEventListener(u,"change",s)}(this,We._rootListener),delete We._rootListener}}}},Pb=M.domEventRadioChange=We,_b=x.for("can.onValue"),Mb=x.for("can.offValue"),Ab=x.for("can.onEmit"),Vb=x.for("can.offEmit"),Mo="can-attribute-observable-radiochange";oe.addEvent(Pb,Mo);var fh=Array.prototype.slice;function Nb(){var e=fh.call(arguments,0);return e.unshift(this),oe.addEventListener.apply(null,e)}function Rb(){var e=fh.call(arguments,0);return e.unshift(this),oe.removeEventListener.apply(null,e)}function Ae(e,t,n,r){typeof n=="string"&&(r=n,n=void 0),this.el=e,this.bound=!1,this.prop=function(a,o){return function(i){return i.nodeName.toLowerCase()==="select"}(a)&&o==="value"&&a.multiple}(e,t)?"values":t,this.event=r||function(a,o){var i="change";return function(s){return s.nodeName.toLowerCase()==="input"&&s.type==="radio"}(a)&&o==="checked"&&(i="can-attribute-observable-radiochange"),zt.findSpecialListener(o)&&(i=o),i}(e,t),this.handler=this.handler.bind(this),r!==void 0&&(this[_b]=null,this[Mb]=null,this[Ab]=Ae.prototype.on,this[Vb]=Ae.prototype.off)}Ae.prototype=Object.create(vt.prototype),q(Ae.prototype,{constructor:Ae,get:function(){P.isRecording()&&(P.add(this),this.bound||Z.temporarilyBind(this));var e=zt.get(this.el,this.prop);return typeof e=="function"&&(e=e.bind(this.el)),e},set:function(e){return zt.setAttrOrProp(this.el,this.prop,e)||(this._value=e),e},handler:function(e,t){var n=this._value,r=[];this._value=zt.get(this.el,this.prop),t===void 0&&this._value===n||(r=[this.handlers.getNode([]),this,[e,n]],T.enqueueByQueue.apply(T,r))},onBound:function(){var e=this;e.bound=!0,e._handler=function(n){e.handler(zt.get(e.el,e.prop),n)},e.event===Mo&&Xr.on.call(e.el,"change",e._handler);var t=zt.findSpecialListener(e.prop);t&&(e._specialDisposal=t.call(e.el,e.prop,e._handler,Nb)),Xr.on.call(e.el,e.event,e._handler),this._value=zt.get(this.el,this.prop)},onUnbound:function(){var e=this;e.bound=!1,e.event===Mo&&Xr.off.call(e.el,"change",e._handler),e._specialDisposal&&(e._specialDisposal.call(e.el,Rb),e._specialDisposal=null),Xr.off.call(e.el,e.event,e._handler)},valueHasDependencies:function(){return!0},getValueDependencies:function(){var e=new Map,t=new Set;return t.add(this.prop),e.set(this.el,t),{keyDependencies:e}}}),d.assignSymbols(Ae.prototype,{"can.isMapLike":!1,"can.getValue":Ae.prototype.get,"can.setValue":Ae.prototype.set,"can.onValue":Ae.prototype.on,"can.offValue":Ae.prototype.off,"can.valueHasDependencies":Ae.prototype.hasDependencies,"can.getValueDependencies":Ae.prototype.getValueDependencies});var qb=Ae,ut=new Map,jb="on:",tf=":by:",Ao="viewModel",dh="attribute",Vo=x.for("can.viewModel"),Kb=x.for("can.preventDataBindings"),nf=function(){throw new Error("can-stache-bindings - you can not have contextual bindings ( this:from='value' ) and key bindings ( prop:from='value' ) on one element.")},Bb=x.for("can.onKeyValue"),ct={initializeViewModel:function(e,t,n,r){var a=[],o={},i={isSettingOnViewModel:!1,isSettingViewModel:!1,initialViewModelData:t||{}};e.forEach(function(l){l.binding.startParent();var f=l.siblingBindingData;if(i=function(v,g){var h=g.parent.exports&&g.child.source===Ao;if(!h)return v;var m=g.child.name;if(!h||m!=="this"&&m!=="."){if(!v.isSettingViewModel)return{isSettingOnViewModel:!0,initialViewModelData:v.initialViewModelData};nf()}else{if(!v.isSettingViewModel&&!v.isSettingOnViewModel)return{isSettingViewModel:!0,initialViewModelData:void 0};nf()}}(i,f),f.parent.exports){var p=f.child.setCompute?Gi(l.binding.parent):l.binding.parentValue;p!==void 0&&(i.isSettingViewModel?i.initialViewModelData=p:i.initialViewModelData[ir(f.child.name,r.scope)]=p)}a.push(l.binding.start.bind(l.binding)),o[f.bindingAttributeName]=l.binding.stop.bind(l.binding)});for(var s=n(i.initialViewModelData,e.length>0,i),u=0,c=a.length;u<c;u++)a[u]();return{viewModel:s,onTeardowns:o,bindingsState:i}},viewModel:function(e,t,n,r,a){typeof a=="boolean"?a={staticDataBindingsOnly:a}:a===void 0&&(a={});var o=a.staticDataBindingsOnly,i=a.makeDataBinding||rr,s=q({},r),u=q({element:e,viewModel:void 0},t),c={attributeViewModelBindings:s,alreadyUpdatedChild:!0,favorViewModel:!0,makeDataBinding:i,getSiblingBindingData:a.getSiblingBindingData||Mi},l=[];if(d.eachListLike(e.attributes||[],function(m){var w=i(m,u,c);w&&l.push(w)}),!o||l.length!==0){var f,p=ct.initializeViewModel(l,r,function(){u.viewModel=n.apply(this,arguments)},u),v=p.onTeardowns,g=p.bindingsState,h={};return g.isSettingViewModel||(c.alreadyUpdatedChild=!1,f=ue.onNodeAttributeChange(e,function(m){var w=m.attributeName,y=e.getAttribute(w);v[w]&&v[w]();var k=h[w]&&h[w].parent.source===dh;if(y!==null||k){var E=rr({name:w,value:y},u,c);E&&(E.binding.start(),h[w]=E.siblingBindingData,v[w]=E.binding.stop.bind(E.binding))}})),function(){for(var m in f&&(f(),f=void 0),v)v[m]()}}},data:function(e,t){if(e[Kb]!==!0&&!xe.get(e,"preventDataBindings")){var n,r,a,o,i=P.ignore(function(){return n||(n=Cb(e))}),s={element:e,templateType:t.templateType,scope:t.scope,parentNodeList:t.nodeList,get viewModel(){return i()}},u=rr({name:t.attributeName,value:e.getAttribute(t.attributeName)},s,{syncChildWithParent:!1,getSiblingBindingData:Mi});//!steal-remove-start
//!steal-remove-end
var c=!1;//!steal-remove-start
c||(u.binding.start(),c=!0),r=u.binding.stop.bind(u.binding),a=ue.onNodeAttributeChange(e,function(l){var f=l.attributeName,p=e.getAttribute(f);if(f===t.attributeName&&(r&&r(),p!==null)){var v=rr({name:f,value:p},s,{syncChildWithParent:!1,getSiblingBindingData:Mi});v&&(v.binding.start(),r=v.binding.stop.bind(v.binding)),r=v.onTeardown}}),o=ue.onNodeDisconnected(e,function(){var l=e.ownerDocument,f=l.contains?l:l.documentElement;f&&f.contains(e)!==!1||(r&&(r(),r=void 0),o&&(o(),o=void 0),a&&(a(),a=void 0))})}},event:function(e,t){var n,r,a,o,i=Qi.decode(t.attributeName);if(i.indexOf(":to:")!==-1||i.indexOf(":from:")!==-1||i.indexOf(":bind:")!==-1)return this.data(e,t);if(!ls.call(i,jb))throw new Error("can-stache-bindings - unsupported event bindings "+i);n=function(h,m,w){var y,k,E,S,I,V=h.substr(3),D=m&&m[Vo],L=ls.call(V,"el:"),_=ls.call(V,"vm:"),A=V.indexOf(tf)>-1,H="";if(_?(H="vm",V=V.substr(3)):L?(H="el",V=V.substr(3)):_||L||(A?y=!0:D?_=!0:L=!0),A){var te=V.indexOf(tf);I=V.substr(te+4),V=V.substr(0,te)}if(E=V,L){if(A)throw new Error("binding with :by in element scope is not currently supported");k=m}else _?(k=D,A&&(k=D.get(I),S=new He(D).computeData(I))):y&&(k=w,A&&(k=k.get(I),S=w.computeData(I)));return{bindingContext:k,bindingContextObservable:S,eventName:E,bindingCode:H}}(i,e,t.scope),r=n.eventName,a=n.bindingContext,o=n.bindingContextObservable;var s,u,c,l,f=function(h){var m=e.getAttribute(Qi.encode(i));if(m){var w=e[Vo],y=Ze.parse(m,{lookupRule:function(){return Ze.Lookup},methodRule:"call"}),k=function(D,L,_,A,H,te){var ae={element:D,event:L,viewModel:_,arguments:te&&te[Bb]!==void 0?Array.prototype.slice.call(A,1):A,args:A};return H.scope.add(ae,{special:!0})}(e,h,w,arguments,t,a);if(y instanceof Ze.Hashes){var E=y.hashExprs,S=Object.keys(E)[0],I=y.hashExprs[S].value(k),V=d.isObservableLike(I)&&d.isValueLike(I);k.set(S,V?d.getValue(I):I)}else{if(!(y instanceof Ze.Call))throw new Error("can-stache-bindings: Event bindings must be a call expression. Make sure you have a () in "+t.attributeName+"="+JSON.stringify(m));(function(D,L,_,A,H,te,ae){var ve=function(){var B=H.value(A,{doNotWrapInObservation:!0});return typeof(B=d.isValueLike(B)?d.getValue(B):B)=="function"?B(D):B};//!steal-remove-start
T.batch.start();var pe=[];pe=[ve,null,null,{}],T.mutateQueue.enqueue.apply(T.mutateQueue,pe),T.batch.stop()})(e,h,0,k,y)}}},p=function(){a&&ee.off.call(a,r,f),s&&(s(),s=void 0),u&&(u(),u=void 0),c&&(c(),c=void 0)};function v(h,m){m&&ee.off.call(m,r,f),h&&(ee.on.call(h,r,f),l=h)}if(s=ue.onNodeAttributeChange(e,function(h){var m=h.attributeName===i,w=!e.getAttribute(i);m&&w&&p()}),u=ue.onNodeDisconnected(e,function(){var h=e.ownerDocument,m=h.contains?h:h.documentElement;m&&m.contains(e)||p()}),!a&&o)c=function(){l&&ee.off.call(l,r,f),d.offValue(o,v)},d.onValue(o,v);else try{ee.on.call(a,r,f)}catch(h){if(/Unable to bind/.test(h.message)){var g='can-stache-bindings - Unable to bind "'+r+'"';throw g+=': "'+r+'" is a property on a plain object "',g+=JSON.stringify(a),g+='". Binding is available with observable objects only.',g+=" For more details check https://canjs.com/doc/can-stache-bindings.html#Callafunctionwhenaneventhappensonavalueinthescope_animation_",new Error(g)}throw h}}};ut.set(/[\w\.:]+:to$/,ct.data),ut.set(/[\w\.:]+:from$/,ct.data),ut.set(/[\w\.:]+:bind$/,ct.data),ut.set(/[\w\.:]+:raw$/,ct.data),ut.set(/[\w\.:]+:to:on:[\w\.:]+/,ct.data),ut.set(/[\w\.:]+:from:on:[\w\.:]+/,ct.data),ut.set(/[\w\.:]+:bind:on:[\w\.:]+/,ct.data),ut.set(/on:[\w\.:]+/,ct.event);var No={viewModelOrAttribute:function(e,t){return t.element[Vo]?this.viewModel.apply(this,arguments):this.attribute.apply(this,arguments)},scope:function(e,t){var n=t.scope,r=e.name,a=e.exports;if(r){if(a||r.indexOf("(")>=0||r.indexOf("=")>=0){var o=Ze.parse(r,{baseMethodType:"Call"});return o instanceof Ze.Hashes?new _e(function(){var u=o.hashExprs,c=Object.keys(u)[0],l=o.hashExprs[c].value(n),f=d.isObservableLike(l)&&d.isValueLike(l);n.set(c,f?d.getValue(l):l)}):o.value(n)}var i={};d.assignSymbols(i,{"can.getValue":function(){},"can.valueHasDependencies":function(){return!1},"can.setValue":function(u){var c=Ze.parse(ir(r),{baseMethodType:"Call"}).value(n);d.setValue(c,u)},"can.getWhatIChange":function(){var u=n.getDataForScopeSet(ir(r)),c=new Map,l=new Set;return l.add(u.key),c.set(u.parent,l),{mutate:{keyDependencies:c}}},"can.getName":function(){//!steal-remove-start
}});var s=n.getDataForScopeSet(ir(r));return s.parent&&s.key&&Tg.addMutatedBy(s.parent,s.key,i),i}return new _e},viewModel:function(e,t){t.scope;var n=e.name,r=e.setCompute,a=ir(n),o=n==="."||n==="this",i=o?[]:X.reads(n);function s(){var c=t.viewModel;return X.read(c,i,{}).value}//!steal-remove-start
//!steal-remove-end
var u=new hu(s,function(c){var l=t.viewModel;if(r){var f=d.getKeyValue(l,a);d.isObservableLike(f)?d.setValue(f,c):d.setKeyValue(l,a,new _e(d.getValue(c)))}else o?d.setValue(l,c):X.write(l,i,c)});//!steal-remove-start
return u},attribute:function(e,t){return e.name==="this"?d.assignSymbols({},{"can.getValue":function(){return t.element},"can.valueHasDependencies":function(){return!1},"can.getName":function(){//!steal-remove-start
return"<"+t.element.nodeName+">";//!steal-remove-end
}}):new qb(t.element,e.name,{},e.event)}},ls=String.prototype.startsWith||function(e){return this.indexOf(e)===0},Ro={to:{child:{exports:!0,syncSibling:!1},parent:{exports:!1,syncSibling:!1}},from:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}},bind:{child:{exports:!0,syncSibling:!1},parent:{exports:!0,syncSibling:!0}},raw:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}}},ph=[],hh={vm:!0,on:!0};d.eachKey(Ro,function(e,t){ph.push(t),hh[t]=!0});var zb=function(e,t){return e.indexOf("vm")>=0?Ao:e.indexOf("el")>=0?dh:t?Ao:"viewModelOrAttribute"};function Mi(e,t){var n,r,a,o=Qi.decode(e.name),i=e.value||"",s=function(l){var f=l.split(":"),p={tokens:[],special:{}};return f.forEach(function(v){hh[v]?p.special[v]=p.tokens.push(v)-1:p.tokens.push(v)}),p}(o);if(ph.forEach(function(l){if(s.special[l]!==void 0&&s.special[l]>0)return r=l,a=s.special[l],!1}),r){var u=function(l){if(l.special.on!==void 0)return l.tokens[l.special.on+1]}(s),c=!u||r==="bind";return n={parent:q({source:"scope",name:s.special.raw?'"'+i+'"':i},Ro[r].parent),child:q({source:zb(s.tokens,t&&t.favorViewModel),name:s.tokens[a-1],event:u},Ro[r].child),bindingAttributeName:o,initializeValues:c},i.trim().charAt(0)==="~"&&(n.child.setCompute=!0),n}}var rr=function(e,t,n){var r=n.getSiblingBindingData(e,n);if(r){var a=No[r.parent.source](r.parent,t,n),o=No[r.child.source](r.child,t,n,a),i=!!r.child.exports,s=!!r.parent.exports;//!steal-remove-start
//!steal-remove-end
var u={child:o,childToParent:i,cycles:i===!0&&s===!0?0:100,onInitDoNotUpdateChild:n.alreadyUpdatedChild||r.initializeValues===!1,onInitDoNotUpdateParent:r.initializeValues===!1,onInitSetUndefinedParentIfChildIsDefined:!0,parent:a,parentToChild:s,priority:t.parentNodeList?t.parentNodeList.nesting+1:void 0,queue:"dom",sticky:r.parent.syncSibling?"childSticksToParent":void 0,element:t.element};//!steal-remove-start
return{siblingBindingData:r,binding:new pu(u)}}},ir=function(e,t){//!steal-remove-start
return e.replace(/@/g,"")},vh={behaviors:ct,getSiblingBindingData:Mi,bindings:ut,getObservableFrom:No,makeDataBinding:rr};vh[x.for("can.callbackMap")]=ut;var qo=vh;const rf=Symbol.for("can.stacheRenderer"),Hb=Symbol.for("can.viewInsert");Bn.addBindings(qo);const Ub=Symbol.for("can.viewModel"),Fb=Symbol.for("can.getValue"),Wb=Symbol.for("can.setValue"),tt=Symbol.for("can.meta"),Zt=Symbol.for("can.meta"),fs=Symbol.for("can.initializing"),{mixins:$b}=vn,ze=Symbol.for("can.meta");function gh(){this.attributeChangedCallback!==gh&&this.attributeChangedCallback.apply(this,arguments)}var Eu=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;class t extends e{initialize(r){this[ze]===void 0&&(this[ze]={}),this[ze]._bindings===void 0&&(this[ze]._bindings=[]),Object.keys(this.constructor[ze]._uninitializedBindings).forEach(a=>{const o=this.constructor[ze]._uninitializedBindings[a](this);this[ze]._bindings.push({binding:o,siblingBindingData:{parent:{source:"scope",exports:!0},child:{source:"viewModel",exports:!0,name:a},bindingAttributeName:a}})}),super.initialize&&super.initialize(r)}}return Object.defineProperty(t.prototype,"attributeChangedCallback",{value:gh,writable:!0}),t};Eu.initializeObservedAttributes=function(e){Object.defineProperty(e,"observedAttributes",{get(){let t=!1;$b.finalizeClass(this),this[ze]===void 0&&(this[ze]={}),this[ze]._uninitializedBindings===void 0&&(this[ze]._uninitializedBindings={});const n=this.prototype._define&&this.prototype._define.definitions;return n&&Object.keys(n).forEach(r=>{const a=n[r];if(typeof a.bind=="function"){const o=a.bind(r,this);this[ze]._uninitializedBindings[r]=o,t=!0}}),t?this.observedAttributes:[]}})};const{initializeObservedAttributes:Qb}=Eu,{createConstructorFunction:Gb}=vn,Yb=Symbol.for("can.initialize"),af=Symbol.for("can.teardownHandlers"),Jb=Symbol.for("can.isView");function Xb(e,t){function n(r){return(a=r)instanceof He&&a._parent&&a._parent._context instanceof He.TemplateContext?e(t.scope.addLetContext(r._context)):e(t.scope.addLetContext(r));var a}return n[Jb]=!0,n}var Ke=M.StacheElement=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;class t extends function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;return class extends a{constructor(){if(super(),arguments.length)throw new Error("can-stache-element: Do not pass arguments to the constructor. Initial property values should be passed to the `initialize` hook.");Fa(this,Ha,!0),Fa(this,mn,{initialized:!1,rendered:!1,connected:!1,disconnected:!1}),Fa(this,Ua,[])}connectedCallback(o){return this.initialize(o),this.render(),this.connect(),this}disconnectedCallback(){return this.disconnect(),this}initialize(o){const i=this[mn];return i.initialized||(this[Ha]=!0,super.initialize&&super.initialize(o),this[Ha]=!1,i.initialized=!0),this}render(o){const i=this[mn];return i.rendered||(i.initialized||this.initialize(o),super.render&&super.render(o),i.rendered=!0),this}connect(o){const i=this[mn];if(i.connected)return this;if(i.initialized||this.initialize(o),i.rendered||this.render(o),super.connect&&super.connect(o),this.connected){let s=this.connected();typeof s=="function"&&this[Ua].push(s)}return i.connected=!0,i.disconnected=!1,this}disconnect(){if(this[mn].disconnected)return this;super.disconnect&&super.disconnect(),this.stopListening&&this.stopListening();for(let o of this[Ua])o.call(this);return this.disconnected&&this.disconnected(),this[mn]={initialized:!1,rendered:!1,connected:!1,disconnected:!0},this}}}(function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;return class extends a{bindings(o){this[tt]===void 0&&(this[tt]={});const i={};return d.eachKey(o,(s,u)=>{const c=ro(this,u);i[u]={parent:s,child:c}}),this[tt]._connectedBindings=i,this}initialize(o){var i=this[tt]&&this[tt]._connectedBindings;i&&(o=o||{},this[tt]._bindings===void 0&&(this[tt]._bindings=[]),d.eachKey(i,(s,u)=>{const{child:c,parent:l}=s;var f=l!=null&&!!l[Fb],p=l!=null&&!!l[Wb];if(f||p){var v=new pu({child:c,parent:l,queue:"dom",element:this,updateChildName:"update <"+this.nodeName.toLowerCase()+">."+u,updateParentName:"update "+d.getName(l)+" from <"+this.nodeName.toLowerCase()+">."+u});this[tt]._bindings.push({binding:v,siblingBindingData:{parent:{source:"scope",exports:f},child:{source:"viewModel",exports:p,name:u},bindingAttributeName:u}})}else o[u]=l}),this[tt].other=!0),super.initialize&&super.initialize(o)}render(o,i){(this.viewRoot||this).innerHTML="",super.render&&super.render(o,i)}disconnect(){delete this[tt]._bindings,super.disconnect&&super.disconnect()}}}(Eu(function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;return class extends a{initialize(o){var i=this[Zt]&&this[Zt]._bindings;if(i&&i.length){const u=this[fs];this[fs]=!1;const c={element:this};var s=qo.behaviors.initializeViewModel(i,o,l=>(super.initialize(l),this),c);this[Zt]._connectedBindingsTeardown=function(){for(var l in s.onTeardowns)s.onTeardowns[l]()},this[fs]=u}else super.initialize&&super.initialize(o)}disconnect(){this[Zt]&&this[Zt]._connectedBindingsTeardown&&(this[Zt]._connectedBindingsTeardown(),this[Zt]._connectedBindingsTeardown=null),super.disconnect&&super.disconnect()}}}(function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;class o extends a{}return he(o.prototype,Ub,function(){return this}),o}(function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HTMLElement;class o extends a{render(s,u){super.render&&super.render(s);let c=this.constructor[rf];if(!c){const p=this.constructor.view,v=d.getName(this.constructor)+"View";c=typeof p=="function"?p:Bn(v,p||""),this.constructor[rf]=c}const l=c(new He(this,null,{viewModel:!0}),u),f=this.viewRoot||this;be.appendChild.call(f,l)}connect(){super.connect&&super.connect();const s=ue.onNodeRemoved(this,()=>{var u=this.ownerDocument,c=u.contains?u:u.documentElement;c&&c.contains(this)||(s(),this.disconnect())})}[Hb](){return this}}return o.prototype[Symbol.for("can.preventDataBindings")]=!0,o}(Gm(e))))))){[Yb](a,o){const i=qo.behaviors.viewModel(a,o,function(s){for(let u in o.templates)s[u]=Xb(o.templates[u],o);return a.render(s),a});a[af]&&a[af].push(i)}}const n=Gb(t);return Qb(n),n}(),Zb=function(e){return arguments.length?d.setValue(this,e):d.getValue(this)},ds=new WeakMap,mh=function(e){var t=Zb.bind(e);return t.on=t.bind=t.addEventListener=function(n,r){var a=ds.get(r);a||(a=function(o,i){r.call(t,{type:"change"},o,i)},ds.set(r,a)),d.onValue(e,a)},t.off=t.unbind=t.removeEventListener=function(n,r){d.offValue(e,ds.get(r))},d.assignSymbols(t,{"can.getValue":function(){return d.getValue(e)},"can.setValue":function(n){return d.setValue(e,n)},"can.onValue":function(n,r){return d.onValue(e,n,r)},"can.offValue":function(n,r){return d.offValue(e,n,r)},"can.valueHasDependencies":function(){return d.valueHasDependencies(e)},"can.getPriority":function(){return d.getPriority(e)},"can.setPriority":function(n){d.setPriority(e,n)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t};function Du(e){return e&&typeof e=="object"?("serialize"in e?e=e.serialize():typeof e.slice=="function"?e=e.slice():d.assign({},e),d.eachKey(e,function(t,n){e[n]=Du(t)})):e!=null&&typeof e.toString=="function"&&(e=e.toString()),e}var ew=function(e){var t=x.for("can.route.stringCoercingMapDecorator");if(!e.attr[t]){var n=e.attr;e.attr=function(r){var a;return a=typeof r=="string"&&(this.define===void 0||this.define[r]===void 0||this.define[r].serialize)?Du(Array.apply(null,arguments)):arguments,n.apply(this,a)},d.setKeyValue(e.attr,t,!0)}return e},yh={stringCoercingMapDecorator:ew,stringify:Du},tw=yh.stringify,jo={};jo[x.for("can.new")]=function(e){return tw(e)},jo[x.for("can.isMember")]=function(e){return typeof e=="string"};var bh=class extends br{static get propertyDefaults(){return{type:jo}}},Ko=new _e(null);d.setName(Ko,"route.urlData");var nw={defaultBinding:null,urlDataObservable:Ko,bindings:{},call:function(){var e=d.toArray(arguments),t=e.shift(),n=Ko.value;if(n===null)throw new Error("there is no current binding!!!");var r=n[t.indexOf("can.")===0?x.for(t):t];return r.apply?r.apply(n,e):r}},re=nw,Mn={curlies:/\{\s*([\w.]+)\s*\}/g,colon:/\:([\w.]+)/g},Su=function(e,t){var n,r=[];for(var a in n=d.assignMap({},e),d.eachKey(t,function(o,i){e&&e.hasOwnProperty(i)?t[i]!==e[i]&&r.push({key:i,type:"set",value:o}):r.push({key:i,type:"add",value:o}),delete n[i]}),n)r.push({key:a,type:"delete"});return r};function ps(e){return e.replace(/\\/g,"")}function rw(e){return(e+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")}var wh={routes:{},register:function(e,t){var n,r=re.call("root");r.lastIndexOf("/")===r.length-1&&e.indexOf("/")===0&&(e=e.substr(1)),Mn.colon.test(e)?n=Mn.colon:n=Mn.curlies,t=t||{};for(var a,o=n.lastIndex=0,i=[],s="",u=re.call("querySeparator"),c=re.call("matchSlashes");a=n.exec(e);)i.push(a[1]),s+=ps(e.substring(o,n.lastIndex-a[0].length)),s+="([^"+("\\"+(ps(e.substr(n.lastIndex,1))||u+(c?"":"|/")))+"]"+(t[a[1]]?"*":"+")+")",o=n.lastIndex;//!steal-remove-end
return s+=ps(e.substr(o)),wh.routes[e]={test:new RegExp("^"+s+"($|"+rw(u)+")"),route:e,names:i,defaults:t,length:e.split("/").length}}},St=wh,iw=/^\d+$/,aw=/([^\[\]]+)|(\[\])/g,sw=/([^?#]*)(#.*)?$/,ow=/%([^0-9a-f][0-9a-f]|[0-9a-f][^0-9a-f]|[^0-9a-f][^0-9a-f])/i,uw={"#":!0,"?":!0},sf=function(e){uw[e.charAt(0)]===!0&&(e=e.substr(1)),e=e.replace(/\+/g," ");try{return decodeURIComponent(e)}catch{return decodeURIComponent(e.replace(ow,function(n,r){return"%25"+r}))}};function Zr(e){return iw.test(e)||e==="[]"}function cw(e){return e}var ra=M.deparam=function(e,t){t=t||cw;var n,r={};return e&&sw.test(e)&&e.split("&").forEach(function(a){var o=a.split("="),i=sf(o.shift()),s=sf(o.join("=")),u=r;if(i){for(var c=0,l=(o=i.match(aw)).length-1;c<l;c++){var f=o[c],p=o[c+1],v=Zr(f)&&u instanceof Array;u[f]||(v?u.push(Zr(p)?[]:{}):u[f]=Zr(p)?[]:{}),u=v?u[u.length-1]:u[f]}Zr(n=o.pop())?u.push(t(s)):u[n]=t(s)}}),r};function kh(e){var t=re.call("root");return t.lastIndexOf("/")===t.length-1&&e.indexOf("/")===0&&(e=e.substr(1)),e}function xh(e){e=kh(e);var t={length:-1};if(d.eachKey(St.routes,function(n,r){n.test.test(e)&&n.length>t.length&&(t=n)}),t.length>-1)return t}function Eh(e){var t=xh(e),n=re.call("querySeparator"),r=re.call("paramsMatcher");if(e=kh(e),t){var a=e.match(t.test),o=a.shift(),i=e.substr(o.length-(a[a.length-1]===n?1:0)),s=i&&r.test(i)?ra(i.slice(1)):{};return s=d.assignDeep(d.assignDeep({},t.defaults),s),a.forEach(function(u,c){u&&u!==n&&(s[t.names[c]]=function(l){try{return decodeURIComponent(l)}catch{return unescape(l)}}(u))}),s}return e.charAt(0)!==n&&(e=n+e),r.test(e)?ra(e.slice(1)):{}}Eh.getRule=xh;var ia=Eh,aa=ye(function(e){var t=!1;function n(r,a,o){if(Array.isArray(a))for(var i=0,s=a.length;i<s;++i){var u=a[i];n(r+(typeof u=="object"?"["+i+"]":"[]"),u,o)}else if(a&&typeof a=="object")for(var c in a)n(r+"["+c+"]",a[c],o);else o(r,a)}if(M.param)throw new Error("You can't have two versions of can-param, check your dependencies");e.exports=M.param=function(r){var a=[],o=function(s,u){u=t&&u==null?"":u,a.push(encodeURIComponent(s)+"="+encodeURIComponent(u))};for(var i in r)t&&r[i]===void 0||n(i,r[i],o);return a.join("&").replace(/%20/g,"+")},M.param.setStandardsMode=function(r){t=!!r}});function of(e,t){var n=0,r={};for(var a in e.defaults)e.defaults[a]===t[a]&&(r[a]=1,n++);for(var o=0;o<e.names.length;o++){if(!t.hasOwnProperty(e.names[o]))return-1;r[e.names[o]]||n++}return n}function Dh(e,t){var n,r,a=0,o=0;return delete e.route,d.eachKey(e,function(){o++}),d.eachKey(St.routes,function(i,s){if((r=of(i,e))>a&&(n=i,a=r),r>=o)return!1}),St.routes[t]&&of(St.routes[t],e)===a&&(n=St.routes[t]),n}function Sh(e,t){var n,r,a,o;return e?(n=d.assignMap({},t),o=Mn.colon.test(e.route)?Mn.colon:Mn.curlies,r=e.route.replace(o,function(i,s){return delete n[s],t[s]===e.defaults[s]?"":encodeURIComponent(t[s])}).replace("\\",""),d.eachKey(e.defaults,function(i,s){n[s]===i&&delete n[s]}),r+((a=aa(n))?re.call("querySeparator")+a:"")):d.size(t)===0?"":re.call("querySeparator")+aa(t)}function Bo(e,t){return Sh(Dh(e,t),e)}var Dr=Bo;function Th(e,t){for(var n in e){var r=e[n],a=t[n];if(r&&a&&typeof r=="object"&&typeof t=="object")return Th(r,a);if(r!=a)return!1}return!0}function uf(e,t){if(t){var n=ia(re.call("can.getValue"));e=d.assignMap(d.assignMap({},n),e)}return re.call("root")+Dr(e)}Bo.paramFromRoute=Sh,Bo.getMatchedRoute=Dh;var hs={url:uf,link:function(e,t,n,r){return"<a "+function(a){var o=[];return d.eachKey(a,function(i,s){var u=s==="className"?"class":s,c=s==="href"?i:Fd.esc(i);o.push(u+'="'+c+'"')}),o.join(" ")}(d.assignMap({href:uf(t,r)},n))+">"+e+"</a>"},isCurrent:function(e,t){var n=re.call("can.getValue");return t?Th(e,ia(n)):n===Dr(e)}};function zo(){return Mr().href.split(/#!?/)[1]||""}function $e(){var e=this.dispatchHandlers.bind(this),t=this;this._value="",this.handlers=new ht([Object,Array],{onFirst:function(){t._value=zo(),oe.addEventListener(window,"hashchange",e)},onEmpty:function(){oe.removeEventListener(window,"hashchange",e)}})}$e.prototype=Object.create(_e.prototype),$e.constructor=$e,d.assign($e.prototype,{paramsMatcher:/^(?:&[^=]+=[^&]*)+/,querySeparator:"&",matchSlashes:!1,root:"#!",dispatchHandlers:function(){var e=this._value;this._value=zo(),e!==this._value&&T.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e],null,[d.getName(this),"changed to",this._value,"from",e])},get:function(){return P.add(this),zo()},set:function(e){var t=Mr();return(e||t.hash)&&t.hash!=="#"+e&&(t.hash="!"+e),e}}),Object.defineProperty($e.prototype,"value",{get:function(){return d.getValue(this)},set:function(e){d.setValue(this,e)}}),d.assignSymbols($e.prototype,{"can.getValue":$e.prototype.get,"can.setValue":$e.prototype.set,"can.onValue":$e.prototype.on,"can.offValue":$e.prototype.off,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0},"can.getName":function(){return"HashchangeObservable<"+this._value+">"}});var lw=$e,fw=Function;ce.define("isWebWorker",function(){var e=fw("return this")();return typeof WorkerGlobalScope<"u"&&e instanceof WorkerGlobalScope});var Ho,dw=ce.makeExport("isWebWorker"),pw=yh.stringCoercingMapDecorator,cf=new lw;function N(e,t){//!steal-remove-start
return St.register(e,t),N}re.bindings.hashchange=cf,re.defaultBinding="hashchange",re.urlDataObservable.value=cf;var Lh=new Z(function(){var e=re.call("can.getValue");return N.rule(e)});function lf(e){clearTimeout(Ho),Ho=setTimeout(function(){var t=d.serialize(N.data),n=Lh.get(),r=Dr.getMatchedRoute(t,n),a=Dr.paramFromRoute(r,t);re.call("can.setValue",a);var o=N._onStartComplete;o&&(N._onStartComplete=void 0,o())},10)}function hw(){var e=re.call("can.getValue");T.batch.start();var t=N.deparam(e);delete t.route,d.update(N.data,t),T.batch.stop()}Object.defineProperty(N,"routes",{get:function(){return St.routes},set:function(e){return St.routes=e}}),Object.defineProperty(N,"defaultBinding",{get:function(){return re.defaultBinding},set:function(e){re.defaultBinding=e;var t=re.bindings[re.defaultBinding];t&&(re.urlDataObservable.value=t)}}),Object.defineProperty(N,"urlData",{get:function(){return re.urlDataObservable.value},set:function(e){N._teardown(),re.urlDataObservable.value=e}}),d.assignMap(N,{param:Dr,deparam:ia,map:function(e){//!steal-remove-start
N.data=e},start:function(e){if(N.data instanceof bh){var t=N.data,n=function(o,i){var s=o[i],u=s!=null?F.maybeConvert(s.constructor):F.maybeConvert(String);d.defineInstanceKey(t.constructor,i,{type:u})};d.eachKey(N.routes,function(o){d.eachIndex(o.names,function(i){n(o.defaults,i)}),d.eachKey(o.defaults,function(i,s){n(o.defaults,s)})})}if(e!==!0&&(N._setup(),Wd()||dw())){var r=re.call("can.getValue");T.batch.start();var a=N.deparam(r);delete a.route,d.assign(N.data,a),T.batch.stop(),lf()}return N},url:hs.url,link:hs.link,isCurrent:hs.isCurrent,bindings:re.bindings,_setup:function(){if(!N._canBinding){var e={parent:re.urlDataObservable.value,setParent:lf,child:N.serializedObservation,setChild:hw,onInitDoNotUpdateChild:!0,cycles:1,queue:"notify"};//!steal-remove-start
N._canBinding=new pu(e),N._canBinding.start()}},_teardown:function(){N._canBinding&&(N._canBinding.stop(),N._canBinding=null),clearTimeout(Ho)},stop:function(){return this._teardown(),N},currentRule:mh(Lh),register:St.register,rule:function(e){var t=ia.getRule(e);if(t)return t.route}});var Ih,vs,gs,ff=function(e,t){return N.data[e]?N.data[e].apply(N.data,t):N.data.addEventListener.apply(N.data,t)};function df(e){return Ih=e}["addEventListener","removeEventListener","bind","unbind","on","off"].forEach(function(e){N[e]=function(t,n){return t==="__url"?re.call("can.onValue",n):ff(e,arguments)}}),["delegate","undelegate","removeAttr","compute","_get","___get","each"].forEach(function(e){N[e]=function(){return ff(e,arguments)}}),Object.defineProperty(N,"serializedObservation",{get:function(){return vs||(vs=new Z(function(){return d.serialize(N.data)})),vs}}),Object.defineProperty(N,"serializedCompute",{get:function(){return gs||(gs=mh(N.serializedObservation)),gs}});var pf=x.for("can.viewModel");Object.defineProperty(N,"data",{get:function(){return Ih||df(new bh)},set:function(e){d.isConstructorLike(e)&&(e=new e),e&&e[pf]!==void 0&&(e=e[pf]),df("attr"in e?pw(e):e)}}),N.attr=function(e,t){return console.warn("can-route: can-route.attr is deprecated. Use methods on can-route.data instead."),"attr"in N.data?N.data.attr.apply(N.data,arguments):arguments.length>1?(d.setKeyValue(N.data,e,t),N.data):typeof e=="object"?(d.assignDeep(N.data,e),N.data):arguments.length===1?d.getKeyValue(N.data,e):d.unwrap(N.data)},d.setKeyValue(N,x.for("can.isFunctionLike"),!1),N.matched=N.currentRule,N.current=N.isCurrent;var fr=M.route=N,vw=Nn.looksLikeOptions,Ch=function(){var e,t,n;return d.eachIndex(arguments,function(r){typeof r=="boolean"?t=r:r&&typeof r=="object"&&(vw(r)?n=r:e=Nn.resolveHash(r))}),!e&&n&&(e=Nn.resolveHash(n.hash)),{finalParams:e||{},finalMerge:t,optionsArg:n}};Nn.registerHelper("routeUrl",function(){var e=Ch.apply(this,arguments);return fr.url(e.finalParams,typeof e.finalMerge=="boolean"?e.finalMerge:void 0)});var hf=function(){var e=Ch.apply(this,arguments),t=fr.isCurrent(e.finalParams,typeof e.finalMerge=="boolean"?e.finalMerge:void 0);return!e.optionsArg||e.optionsArg instanceof Ze.Call?t:t?e.optionsArg.fn():e.optionsArg.inverse()};hf.callAsMethod=!0,Nn.registerHelper("routeCurrent",hf);var C,vf=function(e){return d.assignSymbols(e,{"can.serialize":function(){return this}})};function gw(e){return function(t,n){return e.call(this,n,t)}}var dr=x.for("can.setComparisons");function gf(e,t,n){var r=e[dr];e[dr]||(r=e[dr]=new Map);var a=r.get(e);a||(a=new Map,r.set(e,a));var o=a.get(t);if(o)for(var i in n)o.hasOwnProperty(i)&&console.warn("Overwriting "+e.name+" "+i+" "+t.name+" comparitor"),o[i]=n[i];else a.set(t,n)}function Wt(){}var mf={number:Wt,string:Wt,undefined:Wt,boolean:Wt},nt={};["intersection","difference","union"].forEach(function(e){nt[e]=function(t,n,r){if(r===C.UNIVERSAL){if(e==="intersection")return n;if(e==="union")return C.UNIVERSAL;if(e==="difference")return C.EMPTY}if(n===C.UNIVERSAL){if(e==="intersection")return n;if(e==="union")return C.UNIVERSAL}if(t&&t[e]){var a=t[e](n,r);return a===void 0&&t.undefinedIsEmptySet===!0?C.EMPTY:a}throw new Error("Unable to perform "+e+" between "+C.getType(n).name+" and "+C.getType(r).name)}}),C={UNIVERSAL:d.assignSymbols({name:"UNIVERSAL"},{"can.serialize":function(){return this},"can.isMember":function(){return!0}}),EMPTY:d.assignSymbols({name:"EMPTY"},{"can.serialize":function(){return this},"can.isMember":function(){return!1}}),UNDEFINABLE:vf({name:"UNDEFINABLE"}),UNKNOWABLE:vf({name:"UNKNOWABLE"}),Identity:Wt,isSpecial:function(e){return e===C.UNIVERSAL||e===C.EMPTY||e===C.UNDEFINABLE||e===C.UNKNOWABLE},isDefinedAndHasMembers:function(e){return e!==C.EMPTY&&e!==C.UNDEFINABLE&&e!==C.UNKNOWABLE&&!!e},getType:function(e){return e===C.UNIVERSAL?C.UNIVERSAL:e===C.EMPTY?C.EMPTY:e===C.UNKNOWABLE?C.UNKNOWABLE:e===null?Wt:mf.hasOwnProperty(typeof e)?mf[typeof e]:e.constructor},ownAndMemberValue:function(e,t){if(e!=null||t!=null){var n=e!=null?e.valueOf():e,r=t!=null?t.valueOf():t;return e==null||t==null||n!=null&&n.constructor===r.constructor||(r=new e.constructor(r).valueOf()),{own:n,member:r}}return{own:t,member:e}},getComparisons:function(e,t){var n=e[dr];if(n){var r=n.get(e);if(r)return r.get(t)}},hasComparisons:function(e){return!!e[dr]},defineComparison:function(e,t,n){if(gf(e,t,n),e!==t){var r={};for(var a in n)a!=="difference"&&(r[a]=gw(n[a]));gf(t,e,r)}},isSubset:function(e,t){if(e===t)return!0;var n=C.getType(e),r=C.getType(t),a=C.getComparisons(n,r);if(a){var o=nt.intersection(a,e,t),i=nt.difference(a,e,t);return o===C.UNKNOWABLE||i===C.UNKNOWABLE?void 0:o!==C.EMPTY&&i===C.EMPTY}throw new Error("Unable to perform subset comparison between "+n.name+" and "+r.name)},isProperSubset:function(e,t){return C.isSubset(e,t)&&!C.isEqual(e,t)},isEqual:function(e,t){if(e===C.UNKNOWABLE||t===C.UNKNOWABLE)return C.UNKNOWABLE;var n=C.isSpecial(e),r=C.isSpecial(t);if(n&&r)return n===r;var a=C.getType(e),o=C.getType(t);if(e===t)return!0;var i=C.getComparisons(a,o),s=C.getComparisons(o,a);if(i&&s){var u=nt.intersection(i,e,t),c=nt.difference(i,e,t);if(u!==C.EMPTY&&c===C.EMPTY){var l=nt.intersection(s,t,e),f=nt.difference(s,t,e);return l!==C.EMPTY&&f===C.EMPTY}return!1}var p=C.ownAndMemberValue(e,t);if(d.isPrimitive(p.own)&&d.isPrimitive(p.member))return p.own===p.member;throw new Error("Unable to perform equal comparison between "+a.name+" and "+o.name)},union:function(e,t){if(e===C.UNIVERSAL||t===C.UNIVERSAL)return C.UNIVERSAL;if(e===C.EMPTY)return t;if(t===C.EMPTY)return e;if(e===C.UNKNOWABLE||t===C.UNKNOWABLE)return C.UNKNOWABLE;var n=C.getType(e),r=C.getType(t),a=C.getComparisons(n,r);return nt.union(a,e,t)},intersection:function(e,t){if(e===C.UNIVERSAL)return t;if(t===C.UNIVERSAL)return e;if(e===C.EMPTY||t===C.EMPTY)return C.EMPTY;if(e===C.UNKNOWABLE||t===C.UNKNOWABLE)return C.UNKNOWABLE;var n=C.getType(e),r=C.getType(t),a=C.getComparisons(n,r);if(a)return nt.intersection(a,e,t);throw new Error("Unable to perform intersection comparison between "+n.name+" and "+r.name)},difference:function(e,t){if(e===C.EMPTY)return C.EMPTY;if(t===C.EMPTY)return e;if(e===C.UNKNOWABLE||t===C.UNKNOWABLE)return C.UNKNOWABLE;var n=C.getType(e),r=C.getType(t),a=C.getComparisons(n,r);if(a)return nt.difference(a,e,t);throw new Error("Unable to perform difference comparison between "+n.name+" and "+r.name)},indexWithEqual:function(e,t){for(var n=0,r=e.length;n<r;n++)if(C.isEqual(e[n],t))return n;return-1}};var yf={intersection:function(e,t){return e===t?e:C.EMPTY},difference:function(e,t){return e===t?C.EMPTY:e},union:function(e,t){return e===t?e:C.UNDEFINABLE}};C.defineComparison(Wt,Wt,yf),C.defineComparison(C.UNIVERSAL,C.UNIVERSAL,yf);var b=C,mw=/\{([^\}]+)\}/g,Oh=function(e,t){if(!e)return{};var n=[],r=e.replace(".","\\.").replace("?","\\?"),a=new RegExp(r.replace(mw,function(i,s){return n.push(s),"([^/]+)"})+"$").exec(t),o={};return a?(a.shift(),n.forEach(function(i){o[i]=a.shift()}),o):null};function bf(e){return e==null?e:e.valueOf()}var An=function(e,t){var n=new Set,r=[],a=[],o=e.slice(0);return e.forEach(function(i){n.add(bf(i)),a.push(i)}),t.forEach(function(i){if(n.has(bf(i))){r.push(i);var s=b.indexWithEqual(o,i);s!==-1&&o.splice(s,1)}else a.push(i)}),{intersection:r,union:a,difference:o}},yw=function(e){return this.constructor.test(this.values,e)},Ph={isMemberThatUsesTestOnValues:yw},zn={};function jt(e){this.value=e}var ms=b.Identity;b.defineComparison(b.UNIVERSAL,ms,{difference:function(e,t){return new jt(t)}}),b.defineComparison(b.UNIVERSAL,jt,{difference:function(e,t){return t.value}}),b.defineComparison(jt,jt,{}),b.defineComparison(jt,ms,{union:function(e,t){if(b.isEqual(e.value,t))return b.UNIVERSAL;throw new Error("Not,Identity Union is not filled out")},intersection:function(e,t){return b.isEqual(!e.value,t)?t:b.EMPTY},difference:function(e,t){return b.isEqual(e.value,t)?e:b.UNDEFINABLE}}),b.defineComparison(ms,jt,{difference:function(e,t){return b.isEqual(e,t.value)?e:b.UNDEFINABLE}}),jt.prototype.isMember=function(e){if(this.value&&typeof this.value.isMember=="function")return!this.value.isMember(e);var t=b.ownAndMemberValue(this.value,e);return t.own!==t.member};var Tu=zn.Not=jt,ma={All:function(e){this.values=e}};ma.All.prototype.isMember=Ph.isMemberThatUsesTestOnValues;var bw=ma;function Ai(e,t,n){return function(){throw new Error("can-query-logic: Cannot perform "+e+" between "+t+" and "+n)}}function _t(e,t){return{union:Ai("union",e,t),difference:Ai("difference",e,t),intersection:Ai("intersection",e,t)}}function Mt(e,t){return{difference:Ai("difference",e,t)}}ma.All.test=function(e,t){return e.every(function(n){return t.some(function(r){var a=b.ownAndMemberValue(n,r);return a.own===a.member})})};var _h={comparisons:ma,comparators:{UNIVERSAL_All:{difference:function(e,t){return new Tu(t)}},All_UNIVERSAL:{difference:function(){return b.EMPTY}},All_All:{union:function(e,t){return new bw.Or([e,t])}},In_All:Mt("In","All"),All_In:_t("All","In"),NotIn_All:Mt("NotIn","All"),All_NotIn:_t("All","NotIn"),GreaterThan_All:Mt("GreaterThan","All"),All_GreaterThan:_t("All","GreaterThan"),GreaterThanEqual_All:Mt("GreaterThanEqual","All"),All_GreaterThanEqual:_t("All","GreaterThanEqual"),LessThan_All:Mt("LessThan","All"),All_LessThan:_t("All","LessThan"),LessThanEqual_All:Mt("LessThanEqual","All"),All_LessThanEqual:_t("All","LessThanEqual"),All_And:Mt("All","And"),And_All:_t("And","All"),All_Or:Mt("All","Or"),Or_All:_t("Or","All")}},ww=x.for("can.isMember"),Q=d.assign(_h.comparisons,{In:function(e){this.values=e},NotIn:function(e){this.values=e},GreaterThan:function(e){this.value=e},GreaterThanEqual:function(e){this.value=e},LessThan:function(e){this.value=e},LessThanEqual:function(e){this.value=e},And:function(e){this.values=e},Or:function(e){this.values=e}});function wf(e){return function(t,n){return t!=null&&n!=null&&e(t,n)}}function kf(e){return function(t,n){return t===n||t!=null&&n!=null&&e(t,n)}}function kw(e){var t=b.ownAndMemberValue(this.value,e);return this.constructor.test(t.member,t.own)}Q.Or.prototype.orValues=function(){return this.values},Q.In.test=function(e,t){return e.some(function(n){var r=b.ownAndMemberValue(n,t);return r.own===r.member})},Q.NotIn.test=function(e,t){return!Q.In.test(e,t)},Q.NotIn.testValue=function(e,t){return!Q.In.testValue(e,t)},Q.GreaterThan.test=wf(function(e,t){return e>t}),Q.GreaterThanEqual.test=kf(function(e,t){return e>=t}),Q.LessThan.test=wf(function(e,t){return e<t}),Q.LessThanEqual.test=kf(function(e,t){return e<=t}),[Q.GreaterThan,Q.GreaterThanEqual,Q.LessThan,Q.LessThanEqual,Q.LessThan].forEach(function(e){e.prototype.isMember=kw}),[Q.In,Q.NotIn].forEach(function(e){e.prototype.isMember=Ph.isMemberThatUsesTestOnValues}),Q.And.prototype.isMember=function(e){return this.values.every(function(t){return t.isMember(e)})},Q.Or.prototype.isMember=function(e){return this.values.some(function(t){return t.isMember(e)})},Object.keys(Q).forEach(function(e){Q[e].prototype[ww]=Q[e].prototype.isMember});var O=Q;function sa(e){return{test:function(t,n){return!e.test(t,n)}}}function rt(e,t,n){return function(r,a){var o=An(r.values,a.values);return o[e].length?new t(o[e]):n||b.EMPTY}}function Lu(e){return function(t,n){return e(n,t)}}function kn(e,t){return function(n,r){return new e(r[t||"value"])}}function xn(e,t){return e.value<t.value?t:e}function En(e,t){return e.value>t.value?t:e}function On(e,t){return function(n,r){return e.test(n.value,r.value)?Rn([n,new t(r.value)]):b.EMPTY}}function xf(e,t){var n=On(e,t);return function(r,a){return r.value===a.value?new O.In([r.value]):n(r,a)}}function oa(e,t,n){return function(r,a){var o=r.values.filter(function(i){return e.test(a,i)});return o.length?new t(o):n||b.EMPTY}}var $t={test:function(e,t){return e.isMember(t)}};function nn(e){return e instanceof O.Or}function me(e){return function(t){return t instanceof O.And}(e)||nn(e)}function ua(e){return function(t,n){var r,a=t.values.filter(function(o){return e.values.test(n,o)});return r=e.complement?b.difference(b.UNIVERSAL,n):e.with?new e.with(n.value):n,a.length?e.combinedUsing([new e.arePut(a),r]):r}}function ei(e,t){return function(n,r){return e.test(n.value,r.value)?t||b.UNIVERSAL:Sr([n,r])}}function ti(e,t){return function(n,r){return e.test(n.value,r.value)?t||b.EMPTY:Rn([n,r])}}function At(e){return function(t,n){return e.test(t.value,n.value)?b.difference(b.UNIVERSAL,n):t}}function Rn(e){return Q.And?new Q.And(e):b.UNDEFINABLE}function Sr(e){return Q.Or?new Q.Or(e):b.UNDEFINABLE}function Ef(e,t,n){var r=new n(t.value),a=e.values.filter(function(o){return!r.isMember(o)});return a.length?a.length<e.values.length?Sr([new O.In(a),r]):Sr([e,t]):r}function Uo(e,t){if(t instanceof O.Or){var n=Uo(e,t.values[0]);if(!(n instanceof O.Or))return b.union(n,t.values[1]);var r=Uo(e,t.values[1]);return r instanceof O.Or?Sr([e,t]):b.union(r,t.values[0])}return t instanceof O.GreaterThan?Ef(e,t,O.GreaterThanEqual):t instanceof O.LessThan?Ef(e,t,O.LessThanEqual):Sr([e,t])}var Df,Dn={union:ua({values:sa($t),arePut:O.In,combinedUsing:function(e){return Uo(e[0],e[1])}}),intersection:oa($t,O.In,b.EMPTY),difference:oa(sa($t),O.In,b.EMPTY)},Sn={difference:Lu(ua({values:$t,arePut:O.NotIn,combinedUsing:Rn}))},Tn=function(){return{union:oa(sa($t),O.NotIn,b.UNIVERSAL),intersection:ua({values:$t,arePut:O.NotIn,combinedUsing:Rn}),difference:ua({values:sa($t),arePut:O.NotIn,combinedUsing:Rn,complement:!0})}},Ln={difference:Lu(oa($t,O.In,b.EMPTY))},ni=function(e,t){var n=b.union(e,t.values[0]),r=b.union(e,t.values[1]);return me(n)||me(r)?new O.Or([e,t]):b.intersection(n,r)},ri=function(e,t){var n=t.values[0],r=t.values[1],a=b.intersection(e,n),o=b.intersection(e,r);return a===b.EMPTY||o===b.EMPTY?b.EMPTY:me(a)?me(o)?new O.And([e,t]):new b.intersection(o,n):new b.intersection(a,r)},ii=function(e,t){var n=t.values[0],r=t.values[1],a=b.difference(e,n),o=b.difference(e,r);return a===b.EMPTY?o:o===b.EMPTY?a:new O.Or([a,o])},ai=function(e,t){var n=e.values[0],r=e.values[1],a=b.difference(n,t),o=b.difference(r,t);return b.intersection(a,o)},si={union:function(e,t){var n=t.values[0],r=t.values[1],a=b.union(e,n);if(!me(a))return b.union(a,r);var o=b.union(e,r);return me(o)?new O.Or([e,t]):b.union(n,o)},intersection:function(e,t){var n=t.values[0],r=t.values[1],a=b.intersection(e,n),o=b.intersection(e,r);return a===b.EMPTY?o:o===b.EMPTY?a:b.union(a,o)},difference:function(e,t){var n=t.values[0],r=t.values[1],a=b.difference(e,n),o=b.difference(e,r);return b.intersection(a,o)}},oi={difference:function(e,t){var n=e.values[0],r=e.values[1],a=b.difference(n,t),o=b.difference(r,t);return b.union(a,o)}},Vt=d.assign(_h.comparators,{In_In:{union:rt("union",O.In),intersection:rt("intersection",O.In),difference:rt("difference",O.In)},UNIVERSAL_In:{difference:kn(O.NotIn,"values")},In_NotIn:{union:Lu(rt("difference",O.NotIn,b.UNIVERSAL)),intersection:rt("difference",O.In),difference:rt("intersection",O.In)},NotIn_In:{difference:rt("union",O.NotIn)},In_GreaterThan:Dn,GreaterThan_In:Sn,In_GreaterThanEqual:Dn,GreaterThanEqual_In:Sn,In_LessThan:Dn,LessThan_In:Sn,In_LessThanEqual:Dn,LessThanEqual_In:Sn,In_And:Dn,And_In:Sn,In_Or:Dn,Or_In:Sn,NotIn_NotIn:{union:rt("intersection",O.NotIn,b.UNIVERSAL),intersection:rt("union",O.NotIn),difference:rt("difference",O.In)},UNIVERSAL_NotIn:{difference:kn(O.In,"values")},NotIn_GreaterThan:Tn(),GreaterThan_NotIn:Ln,NotIn_GreaterThanEqual:Tn(),GreaterThanEqual_NotIn:Ln,NotIn_LessThan:Tn(),LessThan_NotIn:Ln,NotIn_LessThanEqual:Tn(),LessThanEqual_NotIn:Ln,NotIn_And:Tn(),And_NotIn:Ln,NotIn_Or:Tn(),Or_NotIn:Ln,GreaterThan_GreaterThan:{union:En,intersection:xn,difference:On(O.LessThan,O.LessThanEqual)},UNIVERSAL_GreaterThan:{difference:kn(O.LessThanEqual)},GreaterThan_GreaterThanEqual:{union:En,intersection:xn,difference:On(O.LessThan,O.LessThan)},GreaterThanEqual_GreaterThan:{difference:xf(O.LessThan,O.LessThanEqual)},GreaterThan_LessThan:{union:(Df=ei(O.LessThan),function(e,t){return Q.In.test([e.value],t.value)?new O.NotIn([e.value]):Df(e,t)}),intersection:ti(O.GreaterThan),difference:At(O.LessThan)},LessThan_GreaterThan:{difference:At(O.GreaterThan)},GreaterThan_LessThanEqual:{union:ei(O.LessThanEqual),intersection:ti(O.GreaterThanEqual),difference:At(O.LessThanEqual)},LessThanEqual_GreaterThan:{difference:At(O.GreaterThanEqual)},GreaterThan_And:{union:ni,intersection:ri,difference:ii},And_GreaterThan:{difference:ai},GreaterThan_Or:si,Or_GreaterThan:oi,GreaterThanEqual_GreaterThanEqual:{union:En,intersection:xn,difference:On(O.LessThan,O.LessThan)},UNIVERSAL_GreaterThanEqual:{difference:kn(O.LessThan)},GreaterThanEqual_LessThan:{union:ei(O.LessThanEqual),intersection:ti(O.GreaterThanEqual),difference:At(O.LessThanEqual)},LessThan_GreaterThanEqual:{difference:At(O.GreaterThanEqual)},GreaterThanEqual_LessThanEqual:{union:ei(O.LessThanEqual),intersection:function(){var e=ti(O.GreaterThan);return function(t,n){var r=new O.In([t.value]);return r.isMember(n.value)?r:e(t,n)}}(),difference:At(O.LessThanEqual)},LessThanEqual_GreaterThanEqual:{difference:At(O.GreaterThanEqual)},GreaterThanEqual_And:{union:ni,intersection:ri,difference:ii},And_GreaterThanEqual:{difference:ai},GreaterThanEqual_Or:si,Or_GreaterThanEqual:oi,LessThan_LessThan:{union:xn,intersection:En,difference:On(O.GreaterThan,O.GreaterThanEqual)},UNIVERSAL_LessThan:{difference:kn(O.GreaterThanEqual)},LessThan_LessThanEqual:{union:xn,intersection:En,difference:On(O.GreaterThan,O.GreaterThan)},LessThanEqual_LessThan:{difference:xf(O.GreaterThanEqual,O.GreaterThanEqual)},LessThan_And:{union:ni,intersection:ri,difference:ii},And_LessThan:{difference:ai},LessThan_Or:si,Or_LessThan:oi,LessThanEqual_LessThanEqual:{union:xn,intersection:En,difference:function(e,t){return e.value>=t.value?Rn([e,new O.GreaterThan(t.value)]):b.EMPTY}},UNIVERSAL_LessThanEqual:{difference:kn(O.GreaterThan)},LessThanEqual_And:{union:ni,intersection:ri,difference:ii},And_LessThanEqual:{difference:ai},LessThanEqual_Or:si,Or_LessThanEqual:oi,And_And:{union:function(e,t){var n=b.union(e,t.values[0]),r=b.union(e,t.values[1]);return(me(n)||me(r))&&(n=b.union(t,e.values[0]),r=b.union(t,e.values[1])),me(n)||me(r)?new O.Or([e,t]):b.intersection(n,r)},intersection:function(e,t){var n=b.intersection(e.values[0],t.values[0]),r=b.intersection(e.values[1],t.values[1]);return me(n)&&me(r)?(n=b.intersection(e.values[0],t.values[1]),r=b.intersection(e.values[1],t.values[0]),me(n)&&me(r)?new O.And([e,t]):b.intersection(n,r)):b.intersection(n,r)},difference:function(e,t){var n=b.difference(e,t.values[0]),r=b.difference(e,t.values[1]);return b.union(n,r)}},And_Or:{union:function(e,t){var n=b.union(e.values[0],t),r=b.union(e.values[1],t);return me(n)&&me(r)?new O.Or([e,t]):b.intersection(n,r)},intersection:function(e,t){var n=b.intersection(e,t.values[0]),r=b.intersection(e,t.values[1]);return nn(n)||nn(r)?new O.And([e,t]):b.union(n,r)},difference:function(e,t){var n=b.difference(e,t.values[0]),r=b.difference(e,t.values[1]);return b.intersection(n,r)}},Or_And:{difference:function(e,t){var n=b.difference(e,t.values[0]),r=b.difference(e,t.values[1]);return b.union(n,r)}},UNIVERSAL_And:{difference:function(e,t){var n=b.difference(e,t.values[0]),r=b.difference(e,t.values[1]);return b.union(n,r)}},Or_Or:{union:function(e,t){var n=b.union(e.values[0],t.values[0]),r=b.union(e.values[1],t.values[1]);return me(n)&&me(r)?(n=b.union(e.values[0],t.values[1]),r=b.union(e.values[1],t.values[0]),me(n)&&me(r)?new O.Or([e,t]):b.union(n,r)):b.union(n,r)},intersection:function(e,t){var n=t.values[0],r=t.values[1],a=b.intersection(e,n),o=b.intersection(e,r);return nn(a)&&nn(o)?(a=b.union(t,e.values[0]),o=b.union(t,e.values[1]),nn(a)&&nn(o)?new O.Or([e,t]):b.union(a,o)):b.union(a,o)},difference:function(e,t){var n=b.difference(e,t.values[0]),r=b.difference(e,t.values[1]);return b.intersection(n,r)}},UNIVERSAL_Or:{difference:function(e,t){var n=b.difference(e,t.values[0]),r=b.difference(e,t.values[1]);return b.intersection(n,r)}}}),ys=Object.keys(Q);ys.forEach(function(e,t){Vt[e+"_"+e]?b.defineComparison(Q[e],Q[e],Vt[e+"_"+e]):console.warn("no "+e+"_"+e),Vt["UNIVERSAL_"+e]?b.defineComparison(b.UNIVERSAL,Q[e],Vt["UNIVERSAL_"+e]):console.warn("no UNIVERSAL_"+e);for(var n=t+1;n<ys.length;n++){var r=ys[n];Vt[e+"_"+r]?b.defineComparison(Q[e],Q[r],Vt[e+"_"+r]):console.warn("no "+e+"_"+r),Vt[r+"_"+e]?b.defineComparison(Q[r],Q[e],Vt[r+"_"+e]):console.warn("no "+r+"_"+e)}});var R=Q;function Fo(e){this.values=e}Fo.prototype.isMember=function(e){return this.values.some(function(t){return t&&t.isMember?t.isMember(e):t===e})},b.defineComparison(b.UNIVERSAL,Fo,{difference:function(){return b.UNDEFINABLE}});var xw=zn.ValuesOr=Fo;function Wo(e){this.values=e}Wo.prototype.isMember=function(e){return this.values.every(function(t){return t&&t.isMember?t.isMember(e):t===e})},b.defineComparison(b.UNIVERSAL,Wo,{difference:function(){return b.UNDEFINABLE}});var Ew=zn.ValuesAnd=Wo;function Ee(e){var t=this.values={};d.eachKey(e,function(n,r){d.isPlainObject(n)&&!b.isSpecial(n)?t[r]=new Ee(n):t[r]=n})}var Dw=x.for("can.isMember");function Sf(e){return b.isEqual(e,b.UNIVERSAL)?b.UNIVERSAL:e}Ee.prototype.isMember=function(e,t,n){var r=!0,a=n?n+".":"";return d.eachKey(this.values,function(o,i){var s=o&&(o[Dw]||o.isMember);s?s.call(o,fn(e,i),t||e,a+i)||(r=!1):o!==fn(e,i)&&(r=!1)}),r};var bs={};function Mh(e,t){var n=An(Object.keys(e),Object.keys(t));return{aOnlyKeys:n.difference,aAndBKeys:n.intersection,bOnlyKeys:An(Object.keys(t),Object.keys(e)).difference}}function Sw(e){return e!==b.EMPTY}function Tf(e,t){var n=e.values,r=t.values,a=Mh(n,r),o=a.aOnlyKeys,i=a.aAndBKeys,s=a.bOnlyKeys,u={},c={},l={};i.forEach(function(y){var k=b.difference(n[y],r[y]);if(k===b.EMPTY)u[y]=n[y];else{var E=b.intersection(n[y],r[y]);E!==b.EMPTY?c[y]={difference:k,intersection:E}:l[y]=n[y]}});var f,p=Object.keys(c);if(p.length===1&&((f={})[p[0]]=c[p[0]].difference),Object.keys(l).length)return e;if(o.length===0&&s.length===0)return p.length>1?b.UNDEFINABLE:p.length===1?(q(u,f),new Ee(u)):b.EMPTY;if(o.length>0&&s.length===0)return p.length>1?b.UNDEFINABLE:p.length===1?(q(u,f),o.forEach(function(y){u[y]=n[y]}),new Ee(u)):b.EMPTY;if(o.length===0&&s.length>0){if(p.length>1)return b.UNDEFINABLE;var v;if(p.length===1){var g=p[0];(v=q({},u))[g]=c[g].difference,u[g]=c[g].intersection}var h=s.map(function(y){var k=q({},u),E=k[y]=b.difference(b.UNIVERSAL,r[y]);return E===b.EMPTY?E:new Ee(k)}).filter(Sw);return v&&h.push(new Ee(v)),h.length>1?new zn.ValuesOr(h):h.length===1?h[0]:b.EMPTY}if(o.length>0&&s.length>0){if(p.length)throw new Error("Can't handle any productable keys right now");if(o.forEach(function(y){u[y]=n[y]}),s.length===1){var m=s[0],w=q({},u);return w[m]=b.difference(b.UNIVERSAL,r[m]),new Ee(w)}return b.UNDEFINABLE}}b.defineComparison(Ee,Ee,{union:function(e,t){var n=Mh(e.values,t.values),r=[],a={};n.aAndBKeys.forEach(function(c){b.isEqual(e.values[c],t.values[c])?a[c]=e.values[c]:r.push(c)});var o={},i={};if(r.forEach(function(c){o[c]=e.values[c],i[c]=t.values[c]}),!n.aOnlyKeys.length&&!n.bOnlyKeys.length){if(r.length===1){var s=r[0],u=a[s]=b.union(e.values[s],t.values[s]);return d.size(a)===1&&b.isEqual(u,b.UNIVERSAL)?b.UNIVERSAL:new Ee(a)}if(r.length===0)return e}if(r.length===0){if(n.aOnlyKeys.length>0&&n.bOnlyKeys.length===0)return Sf(t);if(n.aOnlyKeys.length===0&&n.bOnlyKeys.length>0)return Sf(e)}return n.aOnlyKeys.length>0&&n.bOnlyKeys.length===0&&b.isSubset(new Ee(o),new Ee(i))?t:n.bOnlyKeys.length>0&&n.aOnlyKeys.length===0&&b.isSubset(new Ee(i),new Ee(o))?e:new zn.ValuesOr([e,t])},intersection:function(e,t){var n=e.values,r=t.values,a=!1,o={};return function(i,s,u,c,l){var f,p=q({},u);for(var v in i){if((f=s(v,i[v],v in u?u[v]:bs,i,u))!==void 0)return f;delete p[v]}for(v in p)if((f=c(v,bs,u[v],i,u))!==void 0)return f}(n,function(i,s,u){o[i]=u===bs?s:b.intersection(s,u),o[i]===b.EMPTY&&(a=!0)},r,function(i,s,u){o[i]=u,o[i]===b.EMPTY&&(a=!0)}),a?b.EMPTY:new Ee(o)},difference:Tf}),b.defineComparison(b.UNIVERSAL,Ee,{difference:function(e,t){return Tf({values:{}},t)}});var ya={KeysAnd:zn.KeysAnd=Ee,ValuesOr:xw,ValuesNot:Tu,ValuesAnd:Ew},Tw={undefined:0,null:1,number:3,string:4,object:5,boolean:6},ui=function(e){var t=typeof e;return e===null&&(t="null"),Tw[t]},$o={$gt:function(e,t){return ui(e)>ui(t)},$lt:function(e,t){return ui(e)<ui(t)}},Lf={$gt:function(e,t){return e==null||t==null?$o.$gt(e,t):e>t},$lt:function(e,t){return e==null||t==null?$o.$gt(e,t):e<t}},Ah={uniqueConcat:function(e,t,n){var r=new Set;return e.concat(t).filter(function(a){var o=n(a);return!r.has(o)&&(r.add(o),!0)})},getIdentityIndex:function(e,t,n,r,a){var o=d.getIdentity(n,a),i=t[r];if(e(n,i)===0&&o===d.getIdentity(i,a))return r;var s,u=this.getIdentityIndexByDirection(e,t,n,r+1,1,a);return u.index?u.index:(s=this.getIdentityIndexByDirection(e,t,n,r-1,-1,a)).index!==void 0?s.index:u.lastIndex},getIdentityIndexByDirection:function(e,t,n,r,a,o){for(var i=r,s=d.getIdentity(n,o);i>=0&&i<t.length;){var u=t[i];if(e(n,u)!==0)return{lastIndex:i-a};if(s===d.getIdentity(u,o))return{index:i};i+=a}return{lastIndex:i-a}},getIndex:function(e,t,n,r){if(t){if(t.length===0||e(n,t[0])===-1)return 0;if(e(n,t[t.length-1])===1)return t.length;for(var a=0,o=t.length;a<o;){var i=a+o>>>1,s=e(n,t[i]);if(s===0)return this.getIdentityIndex(e,t,n,i,r);s===-1?o=i:a=i+1}return o}},sortData:function(e){return e[0]==="-"?{prop:e.slice(1),desc:!0}:{prop:e,desc:!1}},defaultCompare:Lf,typeCompare:$o,sorter:function(e,t){var n,r=Ah.sortData(e);return n=t&&t[r.prop]?t[r.prop]:Lf,function(a,o){var i,s=d.getKeyValue(a,r.prop),u=d.getKeyValue(o,r.prop);return r.desc&&(i=s,s=u,u=i),n.$lt(s,u)?-1:n.$gt(s,u)?1:0}},valueHydrator:function(e){if(d.isBuiltIn(e))return e;throw new Error("can-query-logic doesn't support comparison operator: "+JSON.stringify(e))}},Ye=Ah,Lw=ya.KeysAnd,Iw=ya.ValuesOr,Cw=ya.ValuesNot,Ow=ya.ValuesAnd,Qo=function(e,t){function n(u,c){this.start=arguments.length>0?+u:e,this.end=arguments.length>1?+c:t,this.range=new R.And([new R.GreaterThanEqual(this.start),new R.LessThanEqual(this.end)])}var r=new n(e,t);function a(u){return b.isSubset(r.range,u.range)}function o(u){var c={};if(u.values.forEach(function(l){l instanceof R.GreaterThanEqual&&(c.start=l.value),l instanceof R.GreaterThan&&(c.start=l.value+1),l instanceof R.LessThanEqual&&(c.end=l.value),l instanceof R.LessThan&&(c.end=l.value-1)}),"start"in c&&"end"in c)return new n(c.start,c.end)}function i(u){var c;if(u instanceof R.And&&(c=o(u)),u instanceof R.Or){var l=o(u.values[0]),f=o(u.values[1]);if(!l||!f)return b.UNDEFINABLE;var p=l.range.values,v=f.range.values;if(p[1].value+1===v[0].value)c=new n(p[0].value,v[1].value);else{if(v[1].value+1!==p[0].value)return b.UNDEFINABLE;c=new n(v[0].value,p[1].value)}}return c&&a(c)?b.UNIVERSAL:c}function s(u,c){var l=i(b.difference(u.range,c.range));return l||b.EMPTY}return b.defineComparison(n,n,{union:function(u,c){var l=i(b.union(u.range,c.range));return l||b.EMPTY},intersection:function(u,c){var l=i(b.intersection(u.range,c.range));return l||b.EMPTY},difference:s}),b.defineComparison(b.UNIVERSAL,n,{difference:function(u,c){return a(c)?b.EMPTY:s(r,c)}}),n}(0,1/0);function Vh(e,t){var n=e.keys,r={};function a(o){this.key=o,this.schema=e,this.compare=Ye.sorter(o,r)}return d.eachKey(n,function(o,i){r[i]={$gt:function(s,u){if(s==null||u==null)return Ye.typeCompare.$gt(s,u);var c=t({$gt:u},i,o,Ye.valueHydrator),l=t({$eq:s},i,o,Ye.valueHydrator);return b.isEqual(b.union(c,l),c)},$lt:function(s,u){if(s==null||u==null)return Ye.typeCompare.$lt(s,u);var c=t({$lt:u},i,o,Ye.valueHydrator),l=t({$eq:s},i,o,Ye.valueHydrator);return b.isEqual(b.union(c,l),c)}}}),b.defineComparison(a,a,{intersection:function(o,i){return o.key===i.key?o:b.EMPTY},difference:function(o,i){return o.key===i.key?b.EMPTY:o},union:function(o,i){return o.key===i.key?o:b.UNDEFINABLE}}),a}var Pw=Vh({keys:{},identity:["id"]});function De(e){q(this,e),this.filter||(this.filter=b.UNIVERSAL),this.page||(this.page=new Qo),this.sort||(this.sort="id"),typeof this.sort=="string"&&(this.sort=new Pw(this.sort))}De.KeysAnd=Lw,De.Or=Iw,De.Not=Cw,De.And=Ow,De.RecordRange=Qo,De.makeSort=Vh,d.assignMap(De.prototype,{count:function(){return this.page.end-this.page.start+1},sortData:function(e){return e.slice(0).sort(this.sort.compare)},filterMembersAndGetCount:function(e,t){var n;if(t){if((n=b.isEqual(t.page,b.UNIVERSAL))&&!b.isEqual(t.filter,b.UNIVERSAL)&&!b.isSubset(this,t))throw new Error("can-query-logic: Unable to get members from a set that is not a superset of the current set.")}else t=new De;var r=e.filter(function(i){return this.filter.isMember(i)},this),a=r.length;a&&this.sort.key!==t.sort.key&&(r=this.sortData(r));var o=b.isEqual(this.page,b.UNIVERSAL);if(n==null&&(n=b.isEqual(t.page,b.UNIVERSAL)),n)return o?{data:r,count:a}:{data:r.slice(this.page.start,this.page.end+1),count:a};if(this.sort.key===t.sort.key&&b.isEqual(t.filter,this.filter))return{data:r.slice(this.page.start-t.page.start,this.page.end-t.page.start+1),count:a};throw new Error("can-query-logic: Unable to get members from the parent set for this subset.")},filterFrom:function(e,t){return this.filterMembersAndGetCount(e,t).data},merge:function(e,t,n,r){var a=b.union(this,e);if(a!==b.UNDEFINABLE){var o=Ye.uniqueConcat(t,n,r);return a.sortData(o)}},index:function(e,t){var n=Ye.sortData(this.sort.key);if(d.hasOwnKey(e,n.prop))return Ye.getIndex(this.sort.compare,t,e,this.sort.schema)},isMember:function(e){return this.filter.isMember(e)},removePagination:function(){this.page=new Qo}});var _w=["filter","page","sort"];function If(e,t,n){return!!n[e+"FilterIsSubset"]&&(!!n[t+"PageIsUniversal"]||n[e+"PageIsSubset"]&&n.sortIsEqual)}function Nh(e,t){this.queryA=e,this.queryB=t}function ws(e,t){return new Nh(e,t)}d.eachKey({pageIsEqual:function(){return b.isEqual(this.queryA.page,this.queryB.page)},aPageIsUniversal:function(){return b.isEqual(this.queryA.page,b.UNIVERSAL)},bPageIsUniversal:function(){return b.isEqual(this.queryB.page,b.UNIVERSAL)},pagesAreUniversal:function(){return this.pageIsEqual&&this.aPageIsUniversal},sortIsEqual:function(){return this.queryA.sort.key===this.queryB.sort.key},aFilterIsSubset:function(){return b.isSubset(this.queryA.filter,this.queryB.filter)},bFilterIsSubset:function(){return b.isSubset(this.queryB.filter,this.queryA.filter)},aPageIsSubset:function(){return b.isSubset(this.queryA.page,this.queryB.page)},bPageIsSubset:function(){return b.isSubset(this.queryB.page,this.queryA.page)},filterIsEqual:function(){return b.isEqual(this.queryA.filter,this.queryB.filter)},aIsSubset:function(){return If("a","b",this)},bIsSubset:function(){return If("b","a",this)}},function(e,t){he(Nh.prototype,t,e)}),b.defineComparison(De,De,{union:function(e,t){var n=ws(e,t),r=b.union(e.filter,t.filter);if(n.pagesAreUniversal)return new De({filter:r,sort:n.sortIsEqual?e.sort.key:void 0});if(n.filterIsEqual)return n.sortIsEqual?new De({filter:e.filter,sort:e.sort.key,page:b.union(e.page,t.page)}):n.aIsSubset?t:n.bIsSubset?e:b.UNDEFINABLE;throw new Error("different filters, non-universal pages")},intersection:function(e,t){var n=ws(e,t);if(n.pagesAreUniversal){var r=b.intersection(e.filter,t.filter);return b.isDefinedAndHasMembers(r)?new De({filter:r,sort:n.sortIsEqual?e.sort.key:void 0}):r}return b.intersection(e.filter,t.filter)===b.EMPTY?b.EMPTY:n.filterIsEqual?n.sortIsEqual?new De({filter:e.filter,sort:e.sort.key,page:b.intersection(e.page,t.page)}):n.aIsSubset?e:n.bIsSubset?t:b.UNKNOWABLE:n.aIsSubset?e:n.bIsSubset?t:b.UNDEFINABLE},difference:function(e,t){var n,r=function(s,u){var c=[];return _w.forEach(function(l){b.isEqual(s[l],u[l])||c.push(l)}),c}(e,t),a=ws(e,t);if(r.length>1)return a.aIsSubset?b.EMPTY:a.pagesAreUniversal?new De({filter:b.difference(e.filter,t.filter),sort:e.sort.key}):b.UNDEFINABLE;switch(n=r[0]){case void 0:return b.EMPTY;case"sort":return a.pagesAreUniversal?b.EMPTY:b.UNKNOWABLE;case"page":case"filter":var o=b.difference(e[n],t[n]);if(b.isSpecial(o))return o;var i={filter:e.filter,page:e.page,sort:e.sort.key};return i[n]=o,new De(i)}}});var Te=De,Vi=function(e){var t=this.serializers=new Map;e&&e.forEach(function(n){var r=n[0],a=n[1];t.set(r,a)}),this.serialize=this.serialize.bind(this)};Vi.prototype.add=function(e){d.assign(this.serializers,e instanceof Vi?e.serializers:e)},Vi.prototype.serialize=function(e){if(!e)return e;var t=e.constructor,n=this.serializers.get(t);return n?n(e,this.serialize):d.serialize(e)};var Rh=Vi;function rn(e){return function(t){return new e(t)}}var hn={};function In(e,t){hn[e]=function(n,r){return t(r?r(n[e]):n[e])},Object.defineProperty(hn[e],"name",{value:"hydrate "+e,writable:!0})}function Go(e,t){hn[e]=function(n,r){var a=n[e];return r&&(a=a.map(function(o){return r(o)})),t(a)},Object.defineProperty(hn[e],"name",{value:"hydrate "+e,writable:!0})}In("$eq",function(e){return new R.In([e])}),In("$ne",function(e){return new R.NotIn([e])}),In("$gt",rn(R.GreaterThan)),In("$gte",rn(R.GreaterThanEqual)),Go("$in",rn(R.In)),In("$lt",rn(R.LessThan)),In("$lte",rn(R.LessThanEqual)),Go("$all",rn(R.All));var Cf={LessThan:{Type:R.GreaterThanEqual,prop:"value"},LessThanEqual:{Type:R.GreaterThan,prop:"value"},GreaterThan:{Type:R.LessThanEqual,prop:"value"},GreaterThanEqual:{Type:R.LessThan,prop:"value"},In:{Type:R.NotIn,prop:"values"},NotIn:{Type:R.In,prop:"values"}};function qh(e,t){if(t||(t=function(){throw new Error("can-query-logic doesn't recognize operator: "+JSON.stringify(e))}),Array.isArray(e))return new R.In(e.map(function(o){return t(o)}));if(e&&typeof e=="object"){var n=Object.keys(e),r=n.every(function(o){return hn[o]});if(r){var a=n.map(function(o){var i={};return i[o]=e[o],(0,hn[o])(i,t)});return a.length>1?new R.And(a):a[0]}return t(e)}return new R.In([t(e)])}hn.$not=function(e,t){var n=qh(e.$not,t),r=n.constructor.name||n.constructor.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];if(Cf[r]){var a=Cf[r];return new a.Type(n[a.prop])}return new Tu(n)},Go("$nin",rn(R.NotIn));var Of,Pn={hydrate:qh,serializer:new Rh([[R.In,function(e,t){return e.values.length===1?t(e.values[0]):{$in:e.values.map(t)}}],[R.NotIn,function(e,t){return e.values.length===1?{$ne:t(e.values[0])}:{$nin:e.values.map(t)}}],[R.GreaterThan,function(e,t){return{$gt:t(e.value)}}],[R.GreaterThanEqual,function(e,t){return{$gte:t(e.value)}}],[R.LessThan,function(e,t){return{$lt:t(e.value)}}],[R.LessThanEqual,function(e,t){return{$lte:t(e.value)}}],[R.And,function(e,t){var n={};return e.values.forEach(function(r){d.assignMap(n,t(r))}),n}],[R.All,function(e,t){return{$all:t(e.values)}}]])},ca=Of={isRangedType:function(e){return e&&d.isConstructorLike(e)&&!b.hasComparisons(e)&&!e[x.for("can.SetType")]&&e.prototype.valueOf&&e.prototype.valueOf!==Object.prototype.valueOf},categorizeOrValues:function(e){var t={primitives:[],valueOfTypes:[],others:[]};return e.forEach(function(n){d.isPrimitive(n)?t.primitives.push(n):Of.isRangedType(n)?t.valueOfTypes.push(n):t.others.push(n)}),t}},Pf=x.for("can.ComparisonSetType"),ks=x.for("can.isMember");function jh(e,t){var n;if(t instanceof R.And)return t.values.map(function(i){return jh(e,i)}).reduce(function(i,s){return{range:b.intersection(i.range,s.range),enum:b.intersection(i.enum,s.enum)}},{range:b.UNIVERSAL,enum:e});if(t instanceof R.In){var r=t.values.filter(function(i){return e.isMember(i)});if(r.length){var a=t.values.slice(0);return d.removeValues(a,r),{enum:new R.In(r),range:a.length?new R.In(a):b.EMPTY}}return{enum:b.EMPTY,range:t}}if(t instanceof R.NotIn){n=b.intersection(e,t);var o=t.values.filter(function(i){return!e.isMember(i)});return{range:o.length?new R.NotIn(o):b.UNIVERSAL,enum:n}}return{enum:b.EMPTY,range:t}}function Ni(e,t){var n=new R.In(e);function r(a){var o=jh(n,a.range);if(this.range=o.range||b.EMPTY,a.enum?o.enum!==b.EMPTY?this.enum=b.union(o.enum,a.enum):this.enum=a.enum:this.enum=o.enum,this.enum===b.EMPTY&&this.range===b.EMPTY)return b.EMPTY}return r.prototype.orValues=function(){var a=[];return this.range!==b.EMPTY&&a.push(this.range),this.enum!==b.EMPTY&&a.push(this.enum),a},r.prototype[ks]=function(){var a=this.range[ks]||this.range.isMember,o=this.enum[ks]||this.enum.isMember;return a.apply(this.range,arguments)||o.apply(this.enum,arguments)},b.defineComparison(r,r,{union:function(a,o){return new r({enum:b.union(a.enum,o.enum),range:b.union(a.range,o.range)})},difference:function(a,o){return new r({enum:b.difference(a.enum,o.enum),range:b.difference(a.range,o.range)})},intersection:function(a,o){return new r({enum:b.intersection(a.enum,o.enum),range:b.intersection(a.range,o.range)})}}),r.inValues=e,b.defineComparison(b.UNIVERSAL,r,{difference:function(a,o){var i;if(o.range===b.UNIVERSAL)return new r({range:o.range,enum:b.difference(n,o.enum)});if(o.enum===b.EMPTY){var s=b.difference(b.UNIVERSAL,o.range),u=b.difference(n,o.range);return new r({range:s,enum:b.difference(u,s)})}return i=b.difference(a,o.range),new r({enum:b.difference(n,o.enum),range:i})}}),t=t||function(a){return a},r.hydrate=function(a,o){return new r({range:o(a,t)})},r}Ni.canMakeMaybeSetType=function(e){var t=d.getSchema(e);if(t&&t.type==="Or"){var n=ca.categorizeOrValues(t.values);return n.valueOfTypes.length===1&&n.valueOfTypes.length+n.primitives.length===t.values.length}return!1},Ni.makeMaybeSetTypes=function(e){var t,n=d.getSchema(e),r=ca.categorizeOrValues(n.values);return e[Pf]?t=e[Pf]:(t=function(a){this.setValue=a,this.value=d.new(e,a)},t.prototype.valueOf=function(){return this.value&&typeof this.value.valueOf=="function"?this.value.valueOf():this.value},d.assignSymbols(t.prototype,{"can.serialize":function(){return this.setValue}})),{Maybe:Ni(r.primitives,function(a){return new t(a)}),ComparisonSetType:t}};var _f=Ni,Mw=x.for("can.SetType"),Kh=x.for("can.isMember"),Mf=x.for("can.new");function Bh(e,t){function n(a){var o=Array.isArray(a)?a:[a];this.values=t?o.map(t):o}d.assignSymbols(n.prototype,{"can.serialize":function(){return this.values.length===1?this.values[0]:this.values}}),n.prototype[Kh]=function(a){return this.values.some(function(o){return b.isEqual(o,a)})},n.UNIVERSAL=new n(e);var r=function(a,o){var i=An(a.values,o.values);return i.difference.length?new n(i.difference):b.EMPTY};return b.defineComparison(n,n,{union:function(a,o){var i=An(a.values,o.values);return i.union.length?new n(i.union):b.EMPTY},intersection:function(a,o){var i=An(a.values,o.values);return i.intersection.length?new n(i.intersection):b.EMPTY},difference:r}),b.defineComparison(n,b.UNIVERSAL,{difference:function(a){return r(a,{values:e.slice(0)})}}),b.defineComparison(b.UNIVERSAL,n,{difference:function(a,o){return r({values:e.slice(0)},o)}}),n}function Yo(e,t,n){var r=Bh(t,n);return e[Mw]=r,e[Kh]=function(a){return t.some(function(o){return b.isEqual(o,a)})},r}Yo.canMakeEnumSetType=function(e){var t=d.getSchema(e);return!(!t||t.type!=="Or")&&ca.categorizeOrValues(t.values).primitives.length===t.values.length},Yo.makeEnumSetType=function(e){var t=d.getSchema(e),n=ca.categorizeOrValues(t.values),r=e[Mf]?e[Mf].bind(e):void 0;return Bh(n.primitives,r)};var Jo=Yo,Aw=x.for("can.SetType"),Af=x.for("can.getSchema"),Vf=new Te({});function Vw(e,t,n){var r=e&&typeof e=="object";return r&&"$or"in e?function(a,o,i){var s=a.map(function(c){return Ri(c,o,i)}),u=function(c){var l=Object.keys(c[0].values),f={},p=new R.In(l);l.map(function(y){f[y]=[]});var v=c.every(function(y){return!!b.isEqual(p,new R.In(Object.keys(y.values)))&&(d.eachKey(y.values,function(k,E){f[E].push(k)}),!0)});if(v){var g=[];if(l.forEach(function(y){f[y].reduce(function(k,E){return E!==!1&&(E===void 0||!!b.isEqual(k,E))&&k})||g.push(y)}),g.length===1){var h=g[0],m=f[h].reduce(function(y,k){return b.union(y,k)},b.EMPTY),w={};return l.map(function(y){w[y]=f[y][0]}),w[h]=m,new Te.KeysAnd(w)}}}(s);return u||new Te.Or(s)}(e.$or,t,n):r&&"$and"in e?function(a,o,i){var s=a.map(function(u){return Ri(u,o,i)});return new Te.And(s)}(e.$and,t,n):Ri(e,t,n)}var Cn=new WeakMap;function zh(e,t,n,r){if(n){var a=n[Aw];return a?a.hydrate?a.hydrate(e,Pn.hydrate):b.hasComparisons(a)?new a(e):Pn.hydrate(e,function(o){return new a(o)}):Jo.canMakeEnumSetType(n)?(Cn.has(n)||Cn.set(n,Jo.makeEnumSetType(n)),new(a=Cn.get(n))(e)):_f.canMakeMaybeSetType(n)?(Cn.has(n)||Cn.set(n,_f.makeMaybeSetTypes(n)),(a=Cn.get(n).Maybe).hydrate(e,Pn.hydrate)):Pn.hydrate(e,r)}return Pn.hydrate(e,r)}function Ri(e,t,n){function r(o){if(o){if(Array.isArray(o))return o.map(n);if(d.isPlainObject(o))return Ri(o,function(i){var s=i.constructor;return s&&s[Af]&&s[Af]().keys||{}}(o))}return n?n(o):o}t=t||{};var a={};return d.eachKey(e,function(o,i){a[i]=zh(o,0,t[i],r)}),new Te.KeysAnd(a)}function Hh(e,t,n,r){t.orValues().forEach(function(a){if(typeof a.orValues=="function")Hh(e,a,n,r);else{var o={};o[r]=n(a),e.push(o)}})}var Nw=function(e){var t=e.identity&&e.identity[0],n=e.keys,r=[[Te.Or,function(i,s){return i.values.map(function(u){return s(u)})}],[Te.And,function(i,s){return{$and:i.values.map(function(u){return s(u)})}}],[Te.Not,function(i,s){return{$not:s(i.value)}}],[Te.KeysAnd,function(i,s){var u=[],c={};return d.eachKey(i.values,function(l,f){typeof l.orValues=="function"?Hh(u,l,s,f):c[f]=s(l)}),u.length?u.length===1?u[0]:{$or:u.map(function(l){return d.assign(d.serialize(c),l)})}:c}],[Te.RecordRange,function(i){return{start:i.start,end:i.end}}],[Te,function(i,s){var u=b.isEqual(i.filter,b.UNIVERSAL)?{}:s(i.filter),c={};return d.size(u)!==0&&(c.filter=u),b.isEqual(i.page,Vf.page)||(c.page={start:i.page.start},i.page.end!==Vf.page.end&&(c.page.end=i.page.end)),i.sort.key!==t&&(c.sort=i.sort.key),c}]],a=Te.makeSort(e,zh),o=new Rh(r);return o.add(Pn.serializer),{hydrate:function(i){//!steal-remove-start
var s={filter:Vw(d.serialize(i.filter),n,Ye.valueHydrator)};return i.page&&(s.page=new Te.RecordRange(i.page.start,i.page.end)),i.sort?s.sort=new a(i.sort):s.sort=new a(t),new Te(s)},serializer:o}},Nf=x.for("can.getSchema"),Rw=x.for("can.new");function Se(e,t){e=e||{};var n,r=t&&t.toQuery,a=t&&t.toParams;(n=e[Nf]?e[Nf]():e).identity&&n.identity[0]||(n.identity=["id"]);var o,i,s=Nw(n);o=r?function(u){return s.hydrate(r(u))}:s.hydrate,i=a?function(u){return a(s.serializer.serialize(u))}:s.serializer.serialize,this.hydrate=o,this.serialize=i,this.schema=n}function xs(e){return function(t,n){var r=this.hydrate(t),a=this.hydrate(n),o=b[e](r,a);return this.serialize(o)}}function Es(e){return function(t,n){var r=this.hydrate(t),a=this.hydrate(n);return b[e](r,a)}}for(var Ds in d.assignSymbols(Se.prototype,{"can.getSchema":function(){return this.schema}}),d.assign(Se.prototype,{union:xs("union"),difference:xs("difference"),intersection:xs("intersection"),isEqual:Es("isEqual"),isProperSubset:Es("isProperSubset"),isSubset:Es("isSubset"),isSpecial:b.isSpecial,isDefinedAndHasMembers:b.isDefinedAndHasMembers,count:function(e){var t=this.hydrate(e);return t.page.end-t.page.start+1},identityKeys:function(){return this.schema.identity},filterMembers:function(e,t,n){var r=this.hydrate(e);if(arguments.length>=3){var a=this.hydrate(t);return r.filterFrom(n,a)}return r.filterFrom(t)},filterMembersAndGetCount:function(e,t,n){var r=this.hydrate(e),a=this.hydrate(t);return r.filterMembersAndGetCount(n,a)},unionMembers:function(e,t,n,r){var a=this.hydrate(e),o=this.hydrate(t),i=this.schema;return a.merge(o,n,r,function(s){return d.getIdentity(s,i)})},isMember:function(e,t){return this.hydrate(e).isMember(t)},memberIdentity:function(e){return d.getIdentity(e,this.schema)},index:function(e,t,n){return this.hydrate(e).index(n,t)},insert:function(e,t,n){var r=this.index(e,t,n);r===void 0&&(r=t.length);var a=t.slice(0);return a.splice(r,0,n),a},isPaginated:function(e){var t=this.hydrate(e);return!b.isEqual(t.page,b.UNIVERSAL)},removePagination:function(e){var t=this.hydrate(e);return t.removePagination(),this.serialize(t)}}),b)Se[Ds]===void 0&&(Se[Ds]=b[Ds]);Se.makeEnum=function(e){var t=function(){};return t[Rw]=function(n){return n},Jo(t,e),t},Se.KeysAnd=Te.KeysAnd,Se.ValuesOr=Te.Or,Se.In=R.In,Se.NotIn=R.NotIn,Se.GreaterThan=R.GreaterThan,Se.GreaterThanEqual=R.GreaterThanEqual,Se.LessThan=R.LessThan,Se.LessThanEqual=R.LessThanEqual,Se.ValueAnd=R.And,Se.ValueOr=R.Or;var pt=Se;function Xo(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.every(function(r,a){return Xo(r,t[a])});if(e&&t&&d.isPlainObject(e)&&d.isPlainObject(t)){for(var n in e)if(!t.hasOwnProperty(n)||!Xo(e[n],t[n]))return!1;return!0}return!1}function Rf(e){if(e.fixture||e.xhr||e.data){var t=d.serialize(e);return delete t.fixture,delete t.xhr,delete t.data,t}return e}var qw={intersection:function(e,t){return e.value===t.value?e:b.EMPTY},difference:function(e,t){return e.value===t.value?b.EMPTY:e},union:function(e,t){return e.value===t.value?e:b.UNDEFINABLE}};function Uh(e){var t=function(){},n=function(r){this.value=r};return n.prototype.isMember=function(r,a,o){return e(this.value,r,a,o)},d.assignSymbols(t,{"can.SetType":n}),b.defineComparison(n,n,qw),b.defineComparison(b.UNIVERSAL,n,{difference:function(){return b.UNDEFINABLE}}),t}function Fh(e,t){var n=e.data,r=t.data;if(n&&r&&!Xo(n,r))return!1;var a=new pt.KeysAnd(Rf(e)),o=new pt.KeysAnd(Rf(t));return b.isEqual(a,o)}var wt={};d.eachKey({IsEmptyOrNull:function(e,t){return e==null&&d.size(t)===0||t==null&&d.size(e)===0||Fh(e,t)},isEmptyOrSubset:function(e,t){return e==null&&d.size(t)===0||t==null&&d.size(e)===0||(n=e,r=t,b.isSubset(new pt.KeysAnd(n),new pt.KeysAnd(r)));var n,r},TemplateUrl:function(e,t){return!!Oh(e,t)},StringIgnoreCase:function(e,t){return t&&e?e.toLowerCase()===t.toLowerCase():t===e},Ignore:function(){return!0}},function(e,t){wt[t]=Uh(e)});var jw={identity:["id"],keys:{url:wt.TemplateUrl,fixture:wt.Ignore,xhr:wt.Ignore,type:wt.StringIgnoreCase,method:wt.StringIgnoreCase,helpers:wt.Ignore,headers:wt.IsEmptyOrNull,data:wt.IsEmptyOrSubset}},Kw=new pt(jw),qf={fixture:Fh,request:function(e,t){return Kw.isMember({filter:t},e)},matches:function(e,t,n){return n?this.fixture(e,t):this.request(e,t)},makeComparatorType:Uh},Wh=function e(t){t.constructor=e;var n=Object.create(t);return d.assignMap(n,{getRecordFromParams:function(r){var a=d.getIdentity(r,this.queryLogic.schema);return this.getRecord(a)},log:function(){this._log=!0},getSets:function(){return this.getQueries()},getQueries:function(){return Promise.resolve(this.getQueriesSync())},getQueriesSync:function(){return this.getQueryDataSync().map(function(r){return r.query})},getListData:function(r){r=r||{};var a=this.getListDataSync(r);return a?Promise.resolve(a):Promise.reject({title:"no data",status:"404",detail:`No data available for this query.
Available queries: `+JSON.stringify(this.getQueriesSync())})},getPaginatedListDataSync:function(r){var a=this.getAllRecords(),o=this.queryLogic.removePagination(r.query),i=this.queryLogic.filterMembersAndGetCount(o,{},a),s=function(c,l,f){for(var p=d.getSchema(f),v=0;v<c.length;v++)if(l===d.getIdentity(c[v],p))return v;return-1}(i.data,r.startIdentity,this.queryLogic),u=i.data.slice(s,s+this.queryLogic.count(r.query));return{count:i.data.length,data:u}},getListDataSync:function(r){for(var a,o=this.getQueryDataSync(),i=this.queryLogic.isPaginated(r),s=0;s<o.length;s++){var u=o[s].query;this.queryLogic.isSubset(r,u)&&(a=o[s])}var c=this.getAllRecords();if(i&&this.queryLogic.isPaginated(a.query)){var l=this.getPaginatedListDataSync(a);return this.queryLogic.filterMembersAndGetCount(r,a.query,l.data)}var f=this.queryLogic.filterMembersAndGetCount(r,{},c);return f&&f.count?f:a?{count:0,data:[]}:void 0},updateListData:function(r,a){var o=this.getQueryDataSync();a=a||{};var i=function(y){return Array.isArray(y)?y:y.data}(d.serialize(r));this.updateRecordsSync(i);var s=this.queryLogic.isPaginated(a),u=i.length?d.getIdentity(i[0],this.queryLogic.schema):void 0;if(s){for(var c=0;c<o.length;c++){var l=o[c].query,f=this.queryLogic.union(l,a);if(this.queryLogic.isDefinedAndHasMembers(f)){var p=this.getPaginatedListDataSync(o[c]),v=this.queryLogic.unionMembers(l,a,p.data,i);return u=d.getIdentity(v[0],this.queryLogic.schema),o[c]={query:f,startIdentity:u},this.updateQueryDataSync(o),Promise.resolve()}}return o.push({query:a,startIdentity:u}),this.updateQueryDataSync(o),Promise.resolve()}var g=this.getAllRecords(),h=this.queryLogic.filterMembers(a,g);if(h.length){var m=new Map;h.forEach(function(y){m.set(d.getIdentity(y,this.queryLogic.schema),y)},this),i.forEach(function(y){m.delete(d.getIdentity(y,this.queryLogic.schema))},this),this.destroyRecords(d.toArray(m))}var w=this.getQueryDataSync().filter(function(y){return!this.queryLogic.isSubset(y.query,a)},this);return w.filter(function(y){return this.queryLogic.isSubset(a,y.query)},this).length?this.updateQueryDataSync(w):this.updateQueryDataSync(w.concat([{query:a,startIdentity:u}])),Promise.resolve()},getData:function(r){var a=d.getIdentity(r,d.getSchema(this.queryLogic)),o=this.getRecord(a);return o?Promise.resolve(o):Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+a+")."})},createData:function(r){return this.updateRecordsSync([r]),Promise.resolve(d.assignMap({},this.getRecordFromParams(r)))},updateData:function(r){if(this.errorOnMissingRecord&&!this.getRecordFromParams(r)){var a=d.getIdentity(r,this.queryLogic.schema);return Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+a+")."})}return this.updateRecordsSync([r]),Promise.resolve(d.assignMap({},this.getRecordFromParams(r)))},destroyData:function(r){var a=d.getIdentity(r,this.queryLogic.schema),o=this.getRecordFromParams(r);return this.errorOnMissingRecord&&!o?Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+a+")."}):(this.destroyRecords([r]),Promise.resolve(d.assignMap({},o||r)))}})},$h=M.memoryStore=function e(t){t.constructor=e;var n=Object.create(Wh(t));return d.assignMap(n,{clear:function(){this._instances={},this._queryData=[]},_queryData:[],updateQueryDataSync:function(r){this._queryData=r},getQueryDataSync:function(){return this._queryData},_instances:{},getRecord:function(r){return this._instances[r]},getAllRecords:function(){var r=[];for(var a in this._instances)r.push(this._instances[a]);return r},destroyRecords:function(r){d.eachIndex(r,function(a){var o=d.getIdentity(a,this.queryLogic.schema);delete this._instances[o]},this)},updateRecordsSync:function(r){r.forEach(function(a){var o=d.getIdentity(a,this.queryLogic.schema);this._instances[o]=a},this)}}),n},ci=function(e,t){return function(n,r){this.connection[e](t.call(this,n.data)).then(function(a){r(a)},function(a){r(parseInt(a.status,10),a)})}},jf=function(e,t){return function(){var n=[],r=0,a="number";return e.forEach(function(o){n.push(d.serialize(o));var i=typeof o[t];i==="number"?r=Math.max(o[t],r):a=i}),{maxId:r,items:n,idType:a}}},pr=function(e,t,n){var r=e.queryLogic.schema,a=r.identity[0],o=r.keys;for(var i in o&&o[a]||console.warn("No type specified for identity key. Going to convert strings to reasonable type."),this.connection=e,this.makeItems=t,this.idProp=n,this.reset(),pr.prototype)this[i]=this[i].bind(this)};function li(e){var t=this.connection.queryLogic.schema,n=this.idType,r=t.identity[0],a=t.keys;a&&a[r]||((a={})[r]=function(i){return n==="string"?""+i:typeof i=="string"?function(s){switch(s){case"NaN":case"Infinity":return+s;case"null":return null;case"undefined":return;case"true":case"false":return s==="true";default:var u=+s;return isNaN(u)?s:u}}(i):i});var o={};return d.eachKey(e,function(i,s){a[s]?o[s]=d.serialize(d.convert(i,a[s])):o[s]=i}),o}function Kf(e){return e&&"identityKeys"in e}d.assignMap(pr.prototype,{getListData:ci("getListData",function(e){return e}),getData:ci("getData",li),createData:function(e,t){var n=this.idProp;e.data[n]=++this.maxId,this.connection.createData(li.call(this,e.data)).then(function(r){t(r)},function(r){t(403,r)})},createInstance:function(e){var t=this.idProp;return t in e||(e[t]=++this.maxId),this.connection.createData(e)},updateData:ci("updateData",li),updateInstance:function(e){return this.connection.updateData(e)},destroyInstance:function(e){return this.connection.destroyData(e)},destroyData:ci("destroyData",li),reset:function(e){e&&(this.makeItems=jf(e,this.idProp));var t=this.makeItems();this.maxId=t.maxId,this.idType=t.idType,this.connection.updateListData(t.items,{})},get:function(e){var t=this.connection.queryLogic.memberIdentity(e);return this.connection.getRecord(t)},getList:function(e){return this.connection.getListDataSync(e)}}),pr.make=function(e,t,n){var r,a;typeof e=="number"?(n?Kf(n)||(n=new pt(n)):n=new pt({}),a=n.identityKeys()[0]||"id",r=function(){for(var i=[],s=0,u=0;u<e;u++){var c=t(u,i);c[a]||(c[a]=u),s=Math.max(c[a],s),i.push(c)}return{maxId:s,items:i}}):Array.isArray(e)&&((n=t)?Kf(n)||(n=new pt(n)):n=new pt({}),a=n.identityKeys()[0]||"id",r=jf(e,a));var o=$h({queryLogic:n,errorOnMissingRecord:!0});return new pr(o,r,a)};var Bw=pr,Je=ye(function(e,t){var n=[];t.fixtures=n;var r={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};function a(u){var c=u.match(/(GET|POST|PUT|DELETE|PATCH) (.+)/i);return c?[c[1],c[2]]:[void 0,u]}function o(u,c){var l={},f=a(u),p=f[0],v=function(A,H){if(H=H||function(pe){var B=pe.match(/\{(.*)\}/);if(B&&B.length===2)return B[1]}(A),!H)return[void 0,A];var te=new RegExp("\\/\\{"+H+"\\}.*"),ae=te.test(A),ve=ae?A.replace(te,""):A;return[ae?A:A.trim()+"/{"+H+"}",ve]}(f[1],c.idProp),g=v[0],h=v[1];if(p){var m=['fixture("'+u+'", fixture) must use a store method, not a store directly.'];if(g){var w=r.item[p];if(w){l[p+" "+g]=c[w];var y='Replace with fixture("'+p+" "+g+'", fixture.'+w+") for items.";m.push(y)}}var k=r.list[p];if(k){l[p+" "+h]=c[k];var E='Replace with fixture("'+p+" "+h+'", fixture.'+k+") for lists.";m.push(E)}m.join(" ")}else{var S=r.item;for(var I in S){var V=S[I];l[I+" "+g]=c[V]}var D=r.list;for(var L in D){var _=D[L];l[L+" "+h]=c[_]}}return l}t.add=function(u,c){if(c===void 0){var l=[];if(!Array.isArray(u))return d.eachKey(u,function(f,p){l=l.concat(t.add(p,f))}),l;d.eachIndex(u,function(f){var p=f.fixture;return delete(f=d.assignMap({},f)).fixture,t.add(f,p)})}return function(f){return f&&(f.getData||f.getListData)}(c)?(u=o(u,c),t.add(u)):(typeof u=="string"&&(u=function(f){var p=a(f),v=p[0],g=p[1];return v?{type:v,url:g}:{url:g}}(u)),function(f,p,v){var g,h=t.index(p,!0);if(h>-1&&(g=n.splice(h,1)),v==null)return g;if(typeof v=="object"){var m=v;v=function(){return m}}return p.fixture=v,n.unshift(p),g}(0,u,c))};var i=t.add;function s(u,c){this.statusCode=c[0],this.responseBody=c[1],this.headers=c[2],this.statusText=c[3],this.fixture=u}i.on=!0,i.delay=10,t.callDynamicFixture=function(u,c,l){//!steal-remove-start
u.data=c.data;//!steal-remove-end
var f=function(){var v=t.extractResponse.apply(u,arguments);//!steal-remove-start
//!steal-remove-end
return dn.log("can-fixture: "+u.type.toUpperCase()+" "+u.url+" ",u.data," => ",new s(c.fixture,v)),l.apply(this,v)},p=function(){var v=c.fixture(u,f,u.headers,c);d.isPromise(v)?v.then(function(g){g!==void 0&&f(200,g)}):v!==void 0&&f(200,v)};return u.async?setTimeout(p,i.delay):(p(),null)},t.index=function(u,c){for(var l=0;l<n.length;l++)if(qf.matches(u,n[l],c))return l;return-1},t.get=function(u){if(i.on){var c=t.index(u,!0);c===-1&&(c=t.index(u,!1));var l=c>=0?d.assignMap({},n[c]):void 0;if(l){var f=l.fixture,p=Oh(l.url,u.url);if(typeof l.fixture=="string")p&&(f=function(g,h,m){var w=[];return g=g||"",w.push(g.replace(Ue.strReplacer,function(y,k){var E=fn(h,k);return E==null?(w=null,""):!d.isPrimitive(E)&&w?(w.push(E),""):""+E})),w===null?w:w.length<=1?w[0]:w}(f,p)),l.url=f,l.data=null,l.type="GET",l.error||(l.error=function(g,h,m){throw"fixtures.js Error "+h+" "+m});else if(d.isPlainObject(u.data)||u.data==null){var v=d.assignMap({},u.data||{});l.data=d.assignMap(v,p)}else l.data=u.data}return l}},t.matches=qf,t.extractResponse=function(u,c,l,f){return typeof u!="number"&&(l=c,c=u,u=200),typeof l=="string"&&(f=l,l={}),[u,c,l,f]}});Je.fixtures,Je.add,Je.callDynamicFixture,Je.index,Je.get,Je.matches,Je.extractResponse;var Ss=XMLHttpRequest,Bf=Xs!==void 0?Xs:window,Ts=["type","url","async","response","responseText","responseType","responseXML","responseURL","status","statusText","readyState"],Ls=["abort","error","load","loadend","loadstart","progress","readystatechange"];function fi(e,t){for(var n=e.__events[t]||[],r=0,a=n.length;r<a;r++)n[r].call(e)}function Is(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}(function(){var e=new Ss;for(var t in e)t.indexOf("on")===0?Ls.indexOf(t.substr(2))===-1&&Ls.push(t.substr(2)):Ts.indexOf(t)===-1&&typeof e[t]!="function"&&Ts.push(t)})(),Bf.XMLHttpRequest=function(){var e=this,t=new Ss;Is(this,"_xhr",t),Is(this,"_requestHeaders",{}),Is(this,"__events",{}),Ls.forEach(function(n){t["on"+n]=function(){if(fi(e,n),e["on"+n])return e["on"+n].apply(e,arguments)}}),this.onload=null},Bf.XMLHttpRequest._XHR=Ss,d.assignMap(XMLHttpRequest.prototype,{setRequestHeader:function(e,t){this._requestHeaders[e]=t},open:function(e,t,n){this.type=e,this.url=t,this.async=n!==!1},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders.apply(this._xhr,arguments)},addEventListener:function(e,t){(this.__events[e]=this.__events[e]||[]).push(t)},removeEventListener:function(e,t){var n=this.__events[e]=this.__events[e]||[],r=n.indexOf(t);r>=0&&n.splice(r,1)},setDisableHeaderCheck:function(e){this._disableHeaderCheck=!!e},getResponseHeader:function(e){return this._xhr.getResponseHeader(e)},abort:function(){var e=this._xhr;return this.timeoutId!==void 0&&(clearTimeout(this.timeoutId),e.open(this.type,this.url,this.async!==!1),e.send()),e.abort()},send:function(e){var t=this.type.toLowerCase()||"get",n={url:this.url,data:e,headers:this._requestHeaders,type:t,method:t,async:this.async,xhr:this};if((!n.data&&n.type==="get"||n.type==="delete")&&(n.data=ra(n.url.split("?")[1]),n.url=n.url.split("?")[0]),typeof n.data=="string")try{n.data=JSON.parse(n.data)}catch{n.data=ra(n.data)}var r=Je.get(n),a=this;if(!r||typeof r.fixture!="function"){var o=function(){return a._xhr.open(a._xhr.type,a._xhr.url,a._xhr.async),a._requestHeaders&&Object.keys(a._requestHeaders).forEach(function(i){a._xhr.setRequestHeader(i,a._requestHeaders[i])}),a._xhr.send(e)};return r&&typeof r.fixture=="number"?(dn.log("can-fixture: "+n.url+" => delay "+r.fixture+"ms"),void(this.timeoutId=setTimeout(o,r.fixture))):(r&&(dn.log("can-fixture: "+n.url+" => "+r.url),d.assignMap(a,r)),o())}this.timeoutId=Je.callDynamicFixture(n,r,function(i,s,u,c){s=typeof s=="string"?s:JSON.stringify(s),a._xhr={open:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},d.assignMap(a,{readyState:4,status:i}),i>=200&&i<300||i===304?d.assignMap(a,{statusText:c||"OK",responseText:s}):d.assignMap(a,{statusText:c||"error",responseText:s}),a.getAllResponseHeaders=function(){var l=[];return d.eachKey(u||{},function(f,p){Array.prototype.push.apply(l,[p,": ",f,`\r
`])}),l.join("")},a.onreadystatechange&&a.onreadystatechange({target:a}),fi(a,"progress"),a.onprogress&&a.onprogress(),fi(a,"load"),a.onload&&a.onload(),fi(a,"loadend"),a.onloadend&&a.onloadend()})}}),Ts.forEach(function(e){Object.defineProperty(XMLHttpRequest.prototype,e,{get:function(){return this._xhr[e]},set:function(t){try{this._xhr[e]=t}catch{}}})});var Cs=Je.add,Yn=function(){};d.assignMap(Cs,{rand:function e(t,n,r){if(typeof t=="number")return typeof n=="number"?t+Math.floor(Math.random()*(n-t+1)):Math.floor(Math.random()*(t+1));var a=t.slice(0);n===void 0?(n=1,r=a.length):r===void 0&&(r=n);for(var o=[],i=n+Math.round(e(r-n)),s=0;s<i;s++){var u=e(a.length-1),c=a.splice(u,1)[0];o.push(c)}return o},xhr:function(e){return d.assignMap({},{abort:Yn,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:Yn,overrideMimeType:Yn,readyState:4,responseText:"",responseXML:null,send:Yn,setRequestHeader:Yn,status:200,statusText:"OK"},e)},store:Bw.make,fixtures:Je.fixtures}),typeof window<"u"&&typeof Vd.resolve!="function"&&(window.fixture=function(){return Cs.apply(this,arguments)}),M.fixture=Cs;var Qh={};function Gh(e,t){typeof e!="string"&&(t=e,e=void 0);var n=function(r){var a=function(){};Object.defineProperty(a,"name",{value:e,configurable:!0}),a.prototype=r;var o=new a,i=typeof t=="function"?t.apply(o,arguments):t;for(var s in i)i.hasOwnProperty(s)?Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(i,s)):o[s]=i[s];return o.__behaviorName=e,o};return e&&(n.behaviorName=e,Qh[e]=n),n.isBehavior=!0,n}Gh.map=Qh;var Hn=Gh,zw=Hn,Ut=function(e,t){e=e.map(function(r,a){var o=-1;return typeof r=="string"?(o=Ut.order.indexOf(r),r=r.map[r]):r.isBehavior?o=Ut.order.indexOf(r.behaviorName):r=Ut.behavior(r),{originalIndex:a,sortedIndex:o,behavior:r}}),e.sort(function(r,a){return~r.sortedIndex&&~a.sortedIndex?r.sortedIndex-a.sortedIndex:r.originalIndex-a.originalIndex}),e=e.map(function(r){return r.behavior});var n=Ut.base(Ut.behavior("options",function(){return t})());return e.forEach(function(r){n=r(n)}),n.init&&n.init(),n};Ut.order=["data/localstorage-cache","data/url","data/parse","cache-requests","data/combine-requests","constructor","constructor/store","can/map","can/ref","fall-through-cache","data/worker","real-time","data/callbacks-cache","data/callbacks","constructor/callbacks-once"],Ut.behavior=zw;var Yh=Ut,Jh=Hn("base",function(e){var t;return{id:function(n){if(this.queryLogic)return d.getIdentity(n,this.queryLogic.schema);if(this.idProp)return n[this.idProp];throw new Error("can-connect/base/base - Please add a queryLogic option.")},listQuery:function(n){return n[this.listQueryProp]},listQueryProp:x.for("can.listQuery"),init:function(){},get queryLogic(){return t||(e.queryLogic?e.queryLogic:e.algebra?e.algebra:void 0)},set queryLogic(n){t=n}}});Yh.base=Jh;var Y=M.connect=Yh,Xh=function(){this.set={}};(0,d.assignMap)(Xh.prototype,{has:function(e){return!!this.set[e]},addReference:function(e,t,n){if(e===void 0)throw new Error("can-connect: You must provide a key to store a value in a WeakReferenceMap");var r=this.set[e];r||(r=this.set[e]={item:t,referenceCount:0,key:e}),r.referenceCount+=n||1},referenceCount:function(e){var t=this.set[e];if(t)return t.referenceCount},deleteReference:function(e){var t=this.set[e];t&&(t.referenceCount--,t.referenceCount===0&&delete this.set[e])},get:function(e){var t=this.set[e];if(t)return t.item},forEach:function(e){for(var t in this.set)e(this.set[t].item,t)}});var la=Xh,Zo=function(e,t,n){if(n||(n=d.getSchema(e)),!n)throw new Error("can-diff/update-except-id is unable to update without a schema.");n.identity.forEach(function(r){var a=d.getKeyValue(e,r);a!==void 0&&d.setKeyValue(t,r,a)}),d.updateDeep(e,t)},Hw=function(e,t,n,r){Kn(e,t,function(a,o){return n(a)===n(o)}).forEach(function(a){d.splice(e,a.index,a.deleteCount,a.insert.map(r))})},Uw=d.toArray,Os=d.assignMap,Tr=Hn("constructor",function(e){var t={cidStore:new la,_cid:0,get:function(n){var r=this;return this.getData(n).then(function(a){return r.hydrateInstance(a)})},getList:function(n){n=n||{};var r=this;return this.getListData(n).then(function(a){return r.hydrateList(a,n)})},hydrateList:function(n,r){Array.isArray(n)&&(n={data:n});for(var a=[],o=0;o<n.data.length;o++)a.push(this.hydrateInstance(n.data[o]));if(n.data=a,this.list)return this.list(n,r);var i=n.data.slice(0);return i[this.listQueryProp||"__listQuery"]=r,zf(n,i),i},hydrateInstance:function(n){return this.instance?this.instance(n):Os({},n)},save:function(n){var r=this.serializeInstance(n),a=this.id(n),o=this;if(a===void 0){var i=this._cid++;return this.cidStore.addReference(i,n),this.createData(r,i).then(function(s){return T.batch.start(),s!==void 0&&o.createdInstance(n,s),o.cidStore.deleteReference(i,n),T.batch.stop(),n})}return this.updateData(r).then(function(s){return T.batch.start(),s!==void 0&&o.updatedInstance(n,s),T.batch.stop(),n})},destroy:function(n){var r=this.serializeInstance(n),a=this;return this.id(n)!==void 0?this.destroyData(r).then(function(o){return o!==void 0&&a.destroyedInstance(n,o),n}):(this.destroyedInstance(n,{}),Promise.resolve(n))},createdInstance:function(n,r){Os(n,r)},updatedInstance:function(n,r){Zo(n,r,this.queryLogic.schema)},updatedList:function(n,r,a){for(var o=[],i=0;i<r.data.length;i++)o.push(this.hydrateInstance(r.data[i]));Hw(n,o,this.id.bind(this),this.hydrateInstance.bind(this)),zf(r,n)},destroyedInstance:function(n,r){Zo(n,r,this.queryLogic.schema)},serializeInstance:function(n){return Os({},n)},serializeList:function(n){var r=this;return Uw(n).map(function(a){return r.serializeInstance(a)})},isNew:function(n){var r=this.id(n);return!(r||r===0)}};return t});function zf(e,t){for(var n in e)n!=="data"&&(typeof t.set=="function"?t.set(n,e[n]):typeof t.attr=="function"?t.attr(n,e[n]):t[n]=e[n])}function Zh(e,t){return t=d.serialize(t),d.isMoreListLikeThanMapLike(e)?ev(e,t):fa(e,t),e}function fa(e,t){d.eachKey(e,function(n,r){if(d.hasKey(t,r)){var a=d.getKeyValue(t,r);if(d.deleteKeyValue(t,r),d.isPrimitive(n))d.setKeyValue(e,r,a);else{var o=Array.isArray(a),i=d.isMoreListLikeThanMapLike(n);if(i&&o)ev(n,a);else if(!o&&!i&&d.isMapLike(n)&&d.isPlainObject(a)){var s=d.getSchema(n);if(s&&s.identity&&s.identity.length){var u=d.getIdentity(n,s);if(u!=null&&u===d.getIdentity(a,s))return void fa(n,a)}d.setKeyValue(e,r,d.new(n.constructor,a))}else d.setKeyValue(e,r,a)}}else d.deleteKeyValue(e,r)}),d.eachKey(t,function(n,r){d.setKeyValue(e,r,n)})}function ev(e,t){var n,r,a,o=d.getSchema(e);o&&(n=o.values),n&&(r=d.getSchema(n)),!r&&d.size(e)>0&&(r=d.getSchema(d.getKeyValue(e,0))),a=r&&r.identity&&r.identity.length?function(u,c){var l=d.getIdentity(u,r)===d.getIdentity(c,r);return l&&fa(u,c),l}:function(u,c){var l=u===c;return l&&(d.isPrimitive(u)||fa(u,c)),l};var i=Kn(e,t,a),s=n?d.new.bind(d,n):function(u){return u};if(!i.length)return e;i.forEach(function(u){tv(e,u,s)})}function tv(e,t,n){var r=n&&t.insert.map(function(o){return n(o)})||t.insert,a=[t.index,t.deleteCount].concat(r);return e.splice.apply(e,a),e}Zh.applyPatch=tv;var nv=Zh,Fw=function(e){var t=e.reduce(function(n,r){return n.concat(r)},[]);return function(n){var r=t.reduce(function(a,o){return o in n?a:a.concat(o)},[]);return r.length?{message:"missing expected properties",related:r}:void 0}},Ww=function(e,t){var n=function(r,a,o,i){return function(){var s=Fw(o)(arguments[a]);return s&&i&&i(s,arguments[a]),r.apply(this,arguments)}}(e,0,t,function(r,a){throw new qi(a,e,r)});return Object.keys(e).forEach(function(r){n[r]=e[r]}),n.__interfaces=t,n};function qi(e,t,n){var r='can-connect: Extending behavior "'+(t.behaviorName||"anonymous behavior")+'" found base behavior "'+(e.__behaviorName||"anonymous behavior")+'" was missing required properties: '+JSON.stringify(n.related),a=new Error(r);return Object.setPrototypeOf&&Object.setPrototypeOf(a,Object.getPrototypeOf(this)),a}qi.prototype=Object.create(Error.prototype,{constructor:{value:Error}}),Object.setPrototypeOf?Object.setPrototypeOf(qi,Error):qi.__proto__=Error;var Lr=ye(function(e){var t=d.each,n=d.isPlainObject,r=x.for("can.getName"),a=Hn("can/map",function(u){var c={init:function(){if(!this.Map){if(!this.ObjectType)throw new Error("can-connect/can/map/map must be configured with a Map or ObjectType type");this.Map=this.ObjectType}this[r]||(this[r]=function(){return this.name?"Connection{"+this.name+"}":this.Map?"Connection{"+d.getName(this.Map)+"}":typeof this.url=="string"?"Connection{"+this.url+"}":"Connection{}"}),this.List=this.List||this.ArrayType||this.Map.List;var l=!!this.List;l||Object.defineProperty(this,"List",{get:function(){throw new Error("can-connect/can/map/map - "+d.getName(this)+" should be configured with an ArrayType or List type.")}}),s(this,this.Map,o),l&&s(this,this.List,i),this.queryLogic||(this.queryLogic=new pt(this.Map));var f=this;if(this.Map[x.for("can.onInstanceBoundChange")]){var p=function(g,h){var m=h?"addInstanceReference":"deleteInstanceReference";f[m]&&f[m](g)};//!steal-remove-start
Object.defineProperty(p,"name",{value:d.getName(this.Map)+" boundChange",configurable:!0}),this.Map[x.for("can.onInstanceBoundChange")](p)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the Map type");if(l)if(this.List[x.for("can.onInstanceBoundChange")]){var v=function(g,h){var m=h?"addListReference":"deleteListReference";f[m]&&f[m](g)};//!steal-remove-start
Object.defineProperty(v,"name",{value:d.getName(this.List)+" boundChange",configurable:!0}),this.List[x.for("can.onInstanceBoundChange")](v)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the List type");this.Map[x.for("can.onInstancePatches")]?this.Map[x.for("can.onInstancePatches")](function(g,h){h.forEach(function(m){m.type!=="add"&&m.type!=="set"||m.key!==f.idProp||!g[x.for("can.isBound")]()||f.addInstanceReference(g)})}):console.warn("can-connect/can/map is unable to listen to onInstancePatches on the Map type"),u.init.apply(this,arguments)},serializeInstance:function(l){return d.serialize(l)},serializeList:function(l){return d.serialize(l)},instance:function(l){return new this.Map(l)},list:function(l,f){var p=this.List||this.Map&&this.Map.List,v=d.new(p,l.data);return d.eachKey(l,function(g,h){h!=="data"&&d.setKeyValue(v,h,g)}),v[this.listQueryProp]=f,v},updatedList:function(l,f,p){T.batch.start();var v={};//!steal-remove-start
T.mutateQueue.enqueue(u.updatedList,this,arguments,v),T.batch.stop()},save:function(l){d.setKeyValue(l,"_saving",!0);var f=function(){d.setKeyValue(l,"_saving",!1)},p=u.save.apply(this,arguments);return p.then(f,f),p},destroy:function(l){d.setKeyValue(l,"_destroying",!0);var f=function(){d.setKeyValue(l,"_destroying",!1)},p=u.destroy.apply(this,arguments);return p.then(f,f),p}};return t(["created","updated","destroyed"],function(l){c[l+"Instance"]=function(f,p){p&&typeof p=="object"&&(l==="destroyed"&&d.size(p)===0||(this.constructor.removeAttr?Zo(f,p,this.queryLogic.schema):this.updateInstanceWithAssignDeep?function(v,g,h){if(h||(h=d.getSchema(v)),!h)throw new Error("can-diff/update-except-id is unable to update without a schema.");h.identity.forEach(function(m){var w=d.getKeyValue(v,m);w!==void 0&&d.setKeyValue(g,m,w)}),d.assignDeep(v,g)}(f,p,this.queryLogic.schema):function(v,g,h){if(h||(h=d.getSchema(v)),!h)throw new Error("can-connect/can/map/ is unable to update without a schema.");h.identity.forEach(function(m){var w=d.getKeyValue(v,m);w!==void 0&&d.setKeyValue(g,m,w)}),nv(v,g)}(f,p,this.queryLogic.schema))),l==="created"&&this.moveCreatedInstanceToInstanceStore&&this.moveCreatedInstanceToInstanceStore(f),a.callbackInstanceEvents(l,f)}}),c});a.callbackInstanceEvents=function(u,c){var l=c.constructor;T.batch.start(),ee.dispatch.call(c,{type:u,target:c}),ee.dispatch.call(l,u,[c]),T.batch.stop()};var o={static:{getList:function(u,c){return function(l){return c.getList(l)}},findAll:function(u,c){return function(l){return c.getList(l)}},get:function(u,c){return function(l){return c.get(l)}},findOne:function(u,c){return function(l){return c.get(l)}}},prototype:{isNew:function(u,c){return function(){return c.isNew(this)}},isSaving:function(u,c){return function(){return!!d.getKeyValue(this,"_saving")}},isDestroying:function(u,c){return function(){return!!d.getKeyValue(this,"_destroying")}},save:function(u,c){return function(l,f){var p=c.save(this);return p.then(l,f),p}},destroy:function(u,c){return function(l,f){var p=c.destroy(this);return p.then(l,f),p}}},properties:{_saving:{enumerable:!1,value:!1,configurable:!0,writable:!0},_destroying:{enumerable:!1,value:!1,configurable:!0,writable:!0}}},i={static:{_bubbleRule:function(u,c){return function(l,f){var p=u(l,f);return p.push("destroyed"),p}}},prototype:{setup:function(u,c){return function(l){n(l)&&!Array.isArray(l)?(this[c.listQueryProp]=l,u.apply(this),this.replace(d.isPromise(l)?l:c.getList(l))):u.apply(this,arguments)}}},properties:{}},s=function(u,c,l){var f;for(f in l.properties)d.defineInstanceKey(c,f,l.properties[f]);for(f in l.prototype)c.prototype[f]=l.prototype[f](c.prototype[f],u);if(l.static)for(f in l.static)c[f]=l.static[f](c[f],u)};//!steal-remove-start
e.exports=a;//!steal-remove-end
}),rv=function(){this.set=[]};(0,d.assignMap)(rv.prototype,{has:function(e){return this._getIndex(e)!==-1},addReference:function(e,t){var n=this._getIndex(e),r=this.set[n];r||(r={item:e,referenceCount:0},this.set.push(r)),r.referenceCount+=t||1},deleteReference:function(e){var t=this._getIndex(e),n=this.set[t];n&&(n.referenceCount--,n.referenceCount===0&&this.set.splice(t,1))},delete:function(e){var t=this._getIndex(e);t!==-1&&this.set.splice(t,1)},get:function(e){var t=this.set[this._getIndex(e)];if(t)return t.item},referenceCount:function(e){var t=this.set[this._getIndex(e)];if(t)return t.referenceCount},_getIndex:function(e){var t;return this.set.every(function(n,r){return n.item!==e||(t=r,!1)}),t!==void 0?t:-1},forEach:function(e){return this.set.forEach(e)}});var $w=rv,un=function(e){return e==null?e:JSON.stringify(d.cloneKeySort(e))},qn=ye(function(e){var t=0,n=null,r={increment:function(o){t++,clearTimeout(n)},decrement:function(o){--t===0&&(n=setTimeout(function(){r.dispatch("end")},e.exports.requestCleanupDelay)),t<0&&(t=0)},count:function(){return t}};ee(r);var a=Y.behavior("constructor/store",function(o){var i={instanceStore:new la,newInstanceStore:new $w,listStore:new la,init:function(){o.init&&o.init.apply(this,arguments),this.hasOwnProperty("_requestInstances")||(this._requestInstances={}),this.hasOwnProperty("_requestLists")||(this._requestLists={}),r.on("end",function(){var s;for(s in this._requestInstances)this.instanceStore.deleteReference(s);for(s in this._requestInstances={},this._requestLists)this.listStore.deleteReference(s),this._requestLists[s].forEach(this.deleteInstanceReference.bind(this));this._requestLists={}}.bind(this))},_finishedRequest:function(){r.decrement(this)},addInstanceReference:function(s,u){var c=u||this.id(s);c===void 0?this.newInstanceStore.addReference(s):this.instanceStore.addReference(c,s)},createdInstance:function(s,u){o.createdInstance.apply(this,arguments),this.moveCreatedInstanceToInstanceStore(s)},moveCreatedInstanceToInstanceStore:function(s){var u=this.id(s);if(this.newInstanceStore.has(s)&&u!==void 0){var c=this.newInstanceStore.referenceCount(s);this.newInstanceStore.delete(s),this.instanceStore.addReference(u,s,c)}},addInstanceMetaData:function(s,u,c){var l=this.instanceStore.set[this.id(s)];l&&(l[u]=c)},getInstanceMetaData:function(s,u){var c=this.instanceStore.set[this.id(s)];if(c)return c[u]},deleteInstanceMetaData:function(s,u){delete this.instanceStore.set[this.id(s)][u]},deleteInstanceReference:function(s){this.id(s)===void 0?this.newInstanceStore.deleteReference(s):this.instanceStore.deleteReference(this.id(s),s)},addListReference:function(s,u){var c=un(u||this.listQuery(s));c&&(this.listStore.addReference(c,s),s.forEach(function(l){this.addInstanceReference(l)}.bind(this)))},deleteListReference:function(s,u){var c=un(u||this.listQuery(s));c&&(this.listStore.deleteReference(c,s),s.forEach(this.deleteInstanceReference.bind(this)))},hydratedInstance:function(s){if(r.count()>0){var u=this.id(s);this._requestInstances[u]||(this.addInstanceReference(s),this._requestInstances[u]=s)}},hydrateInstance:function(s){var u=this.id(s);if((u||u===0)&&this.instanceStore.has(u)){var c=this.instanceStore.get(u);return this.updatedInstance(c,s),c}var l=o.hydrateInstance.call(this,s);return this.hydratedInstance(l),l},hydratedList:function(s,u){if(r.count()>0){var c=un(u||this.listQuery(s));c&&(this._requestLists[c]||(this.addListReference(s,u),this._requestLists[c]=s))}},hydrateList:function(s,u){u=u||this.listQuery(s);var c=un(u);if(c&&this.listStore.has(c)){var l=this.listStore.get(c);return this.updatedList(l,s,u),l}var f=o.hydrateList.call(this,s,u);return this.hydratedList(f,u),f},getList:function(s){var u=this;r.increment(this);var c=o.getList.call(this,s);return c.then(function(l){u._finishedRequest()},function(){u._finishedRequest()}),c},get:function(s){var u=this;r.increment(this);var c=o.get.call(this,s);return c.then(function(l){u._finishedRequest()},function(){u._finishedRequest()}),c},save:function(s){var u=this;r.increment(this);var c=!this.isNew(s);c&&this.addInstanceReference(s);var l=o.save.call(this,s);return l.then(function(f){c&&u.deleteInstanceReference(s),u._finishedRequest()},function(){u._finishedRequest()}),l},destroy:function(s){var u=this;this.addInstanceReference(s),r.increment(this);var c=o.destroy.call(this,s);return c.then(function(l){u._finishedRequest(),u.deleteInstanceReference(l)},function(){u._finishedRequest()}),c},updatedList:function(s,u,c){var l=s.slice(0);u.data||typeof u.length!="number"||(u={data:u}),o.updatedList?(o.updatedList.call(this,s,u,c),s.forEach(function(f){this.addInstanceReference(f)}.bind(this))):u.data&&u.data.forEach(function(f){this.addInstanceReference(f)}.bind(this)),l.forEach(this.deleteInstanceReference.bind(this))}};return i});//!steal-remove-start
a.requests=r,a.requestCleanupDelay=10,e.exports=a;//!steal-remove-end
}),ba=ye(function(e){var t=d.each,n={getListData:"gotListData",createData:"createdData",updateData:"updatedData",destroyData:"destroyedData"},r=Y.behavior("data/callbacks",function(a){var o={};return t(n,function(i,s){o[s]=function(u,c){var l=this;return a[s].call(this,u).then(function(f){return l[i]?l[i].call(l,f,u,c):f})}}),o});//!steal-remove-start
e.exports=r;//!steal-remove-end
}),Qw=d.each,Ir=Hn("data/parse",function(e){var t={parseListData:function(n){var r;if(e.parseListData&&(n=e.parseListData.apply(this,arguments)),Array.isArray(n))r={data:n};else{var a=this.parseListProp||"data";if(n.data=fn(n,a),r=n,a!=="data"&&delete n[a],!Array.isArray(r.data))throw new Error("Could not get any raw data while converting using .parseListData")}for(var o=[],i=0;i<r.data.length;i++)o.push(this.parseInstanceData(r.data[i]));return r.data=o,r},parseInstanceData:function(n){return e.parseInstanceData&&(n=e.parseInstanceData.apply(this,arguments)||n),this.parseInstanceProp&&fn(n,this.parseInstanceProp)||n}};return Qw(Gw,function(n,r){t[r]=function(a){var o=this;return e[r].call(this,a).then(function(){return o[n].apply(o,arguments)})}}),t}),Gw={getListData:"parseListData",getData:"parseInstanceData",createData:"parseInstanceData",updateData:"parseInstanceData",destroyData:"parseInstanceData"},Hf=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],Ps=null,Uf=ta(et().location.href),iv={},Ff="application/json",Yw="application/x-www-form-urlencoded",_s=function(e,t){try{var n=t.dataType||e.getResponseHeader("Content-Type").split(";")[0];if(!n||!e.responseText&&!e.responseXML)return e;switch(n){case"text/xml":case"xml":return e.responseXML;case"text/json":case"application/json":case"text/javascript":case"application/javascript":case"application/x-javascript":case"json":return e.responseText&&JSON.parse(e.responseText);default:return e.responseText}}catch{return e}},eu=M.ajax=function(e){var t,n,r,a=function(){if(Ps!=null)return Ps();for(var k=0,E=Hf.length;k<E;k++)try{var S=Hf[k],I=S();if(I!=null)return Ps=S,I}catch{continue}return function(){}}(),o=0,i={},s=new Promise(function(k,E){i.resolve=k,i.reject=E}),u=!1;s.abort=function(){u=!0,a.abort()};var c=(e=[{userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,dataType:"json"},iv,e].reduce(function(k,E,S){return d.assignDeep(k,E)})).async!==!1;if(e.contentType||(e.contentType=e.type.toUpperCase()==="GET"?Yw:Ff),e.crossDomain==null)try{r=ta(e.url),e.crossDomain=!!(r.protocol&&r.protocol!==Uf.protocol||r.host&&r.host!==Uf.host)}catch{e.crossDomain=!0}e.timeout&&(t=setTimeout(function(){a.abort(),e.timeoutFn&&e.timeoutFn(e.url)},e.timeout)),a.onreadystatechange=function(){try{a.readyState===4?(t&&clearTimeout(t),a.status<300?e.success&&e.success(_s(a,e)):e.error&&e.error(a,a.status,a.statusText),e.complete&&e.complete(a,a.statusText),a.status>=200&&a.status<300?i.resolve(_s(a,e)):i.reject(_s(a,e))):e.progress&&e.progress(++o)}catch(k){i.reject(k)}};var l=e.url,f=null,p=e.type.toUpperCase(),v=e.contentType===Ff,g=p==="POST"||p==="PUT"||p==="PATCH";!g&&e.data&&(l+="?"+(v?JSON.stringify(e.data):aa(e.data))),a.open(p,l,c);var h=e.crossDomain&&["GET","POST","HEAD"].indexOf(p)!==-1;if(n=typeof FormData<"u"&&e.data instanceof FormData,g?n?f=e.data:v&&!h?(f=typeof e.data=="object"?JSON.stringify(e.data):e.data,a.setRequestHeader("Content-Type","application/json")):(f=aa(e.data),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):a.setRequestHeader("Content-Type",e.contentType),h||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.xhrFields)for(var m in e.xhrFields)a[m]=e.xhrFields[m];function w(){u||a.send(f)}if(e.beforeSend){var y=e.beforeSend.call(e,a,e);if(d.isPromise(y))return y.then(w).catch(i.reject),s}return w(),s};eu.ajaxSetup=function(e){iv=e||{}};var Jw={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}},Wf=function(e,t){var n={};return d.eachKey(function(r,a){a=a||function(u){var c=u.match(/\{(.*)\}/);if(c&&c.length===2)return c[1]}(r)||"id";var o=new RegExp("\\/\\{"+a+"\\}.*"),i=o.test(r),s=i?r.replace(o,""):r;return{item:i?r:r.trim()+"/{"+a+"}",list:s}}(e,t),function(r,a){d.eachKey(Jw[a],function(o,i){n[o]={method:i,url:r}})}),n},Ms=function(e){return e&&typeof e.then=="function"&&!d.isPromise(e)?new Promise(function(t,n){e.then(t,n)}):e},Cr=ye(function(e){var t=Wf("/resource/{id}"),n=Hn("data/url",function(s){var u={};return d.eachKey(t,function(c,l){u[l]=function(f){var p,v=r[l];if(typeof this.url=="object"){if(p=this.url.beforeSend,typeof this.url[l]=="function")return Ms(this.url[l](f));if(this.url[l]){var g=i(this.url[l],f,c.method,this.ajax||eu,a(this.url,c.method),v,p);return Ms(g)}}var h=typeof this.url=="string"?this.url:this.url.resource;if(h){var m=d.getSchema(this.queryLogic).identity,w=h.replace(/\/+$/,""),y=Wf(w,m[0])[l];return Ms(i(y.url,f,y.method,this.ajax||eu,a(this.url,y.method),v,p))}return s[name].call(this,f)}}),u}),r={getListData:{},getData:{},createData:{},updateData:{},destroyData:{includeData:!1}},a=function(s,u){if(typeof s=="object"&&s.contentType){if(s.contentType==="application/x-www-form-urlencoded"||s.contentType==="application/json")return s.contentType;//!steal-remove-start
//!steal-remove-end
}return u==="GET"?"application/x-www-form-urlencoded":"application/json"};function o(s,u){return encodeURIComponent(u)}var i=function(s,u,c,l,f,p,v){var g={};if(typeof s=="string"){var h=s.split(/\s+/);g.url=h.pop(),h.length&&(g.type=h.pop())}else d.assignMap(g,s);return g.data=typeof u!="object"||Array.isArray(u)?u:d.assignMap(g.data||{},u),g.url=Ad(g.url,g.data,o,!0),g.contentType=f,p.includeData===!1&&delete g.data,l(d.assignMap({type:c||"post",dataType:"json",beforeSend:v},g))};//!steal-remove-start
e.exports=n;//!steal-remove-end
}),Iu=function(e,t,n){var r=d.size(e);if(!n&&r>0&&(n=d.getSchema(e[0])),n||(n=d.getSchema(t)),!n)throw new Error("No schema to use to get identity.");for(var a=d.getIdentity(t,n),o=0;o<r;o++)if(a===d.getIdentity(e[o],n))return o;return-1},Xw=x.for("can.splice");function $f(e,t,n,r){n===-1?r!==-1?d.splice(e,r,0,[t()]):d.splice(e,0,0,[t()]):r===-1?d.splice(e,n,1,[]):r!==n&&(n<r?(d.splice(e,r,0,[t()]),d.splice(e,n,1,[])):(d.splice(e,n,1,[]),d.splice(e,r,0,[t()])))}function da(e,t,n,r,a,o){if(r===void 0&&(r=-1),n===-1||r!==n+1&&r!==n)if(e[Xw]!==void 0)$f(e,function(){return a.hydrateInstance(t)},n,r);else{var i=a.serializeList(e);$f(i,function(){return t},n,r),a.updatedList(e,{data:i},o)}}var wa=Y.behavior("real-time",function(e){var t,n=Promise.resolve();//!steal-remove-end
return t={createData:function(){var r=e.createData.apply(this,arguments),a=r.catch(function(){return""});return n=Promise.all([n,a]),r},createInstance:function(r){var a=this;return new Promise(function(o,i){n.then(function(){setTimeout(function(){var s,u=a.id(r),c=a.instanceStore.get(u);c?o(a.updateInstance(r)):(c=a.hydrateInstance(r),s=a.serializeInstance(c),a.addInstanceReference(c),Promise.resolve(a.createdData(r,s)).then(function(){a.deleteInstanceReference(c),o(c)}))},1)})})},createdData:function(r,a,o){var i;i=o!==void 0?this.cidStore.get(o):this.instanceStore.get(this.id(r)),this.addInstanceReference(i,this.id(r)),this.createdInstance(i,r),Zw.call(this,this.serializeInstance(i)),this.deleteInstanceReference(i)},updatedData:function(r,a){var o=this.instanceStore.get(this.id(a));this.updatedInstance(o,r),ek.call(this,this.serializeInstance(o))},updateInstance:function(r){var a=this.id(r),o=this.instanceStore.get(a);o||(o=this.hydrateInstance(r)),this.addInstanceReference(o);var i=this.serializeInstance(o),s=this;return Promise.resolve(this.updatedData(r,i)).then(function(){return s.deleteInstanceReference(o),o})},destroyedData:function(r,a){var o=this.id(a||r),i=this.instanceStore.get(o);i||(i=this.hydrateInstance(r));var s=this.serializeInstance(i);this.destroyedInstance(i,r),tk.call(this,s)},destroyInstance:function(r){var a=this.id(r),o=this.instanceStore.get(a);o||(o=this.hydrateInstance(r)),this.addInstanceReference(o);var i=this.serializeInstance(o),s=this;return Promise.resolve(this.destroyedData(r,i)).then(function(){return s.deleteInstanceReference(o),o})}},t}),Zw=function(e){var t=this;this.listStore.forEach(function(n,r){var a=JSON.parse(r),o=Iu(n,e,t.queryLogic.schema);if(t.queryLogic.isMember(a,e)){var i=t.queryLogic.index(a,n,e);da(n,e,o,i,t,a)}})},ek=function(e){var t=this;this.listStore.forEach(function(n,r){var a=JSON.parse(r),o=Iu(n,e,t.queryLogic.schema);if(t.queryLogic.isMember(a,e)){var i=t.queryLogic.index(a,n,e);da(n,e,o,i,t,a)}else o!==-1&&da(n,e,o,-1,t,a)})},tk=function(e){var t=this;this.listStore.forEach(function(n,r){var a=JSON.parse(r),o=Iu(n,e,t.queryLogic.schema);o!==-1&&da(n,e,o,-1,t,a)})},ka=ye(function(e){var t=[].forEach,n=["createdInstance","updatedInstance","destroyedInstance"],r=Y.behavior("constructor/callbacks-once",function(a){var o={};return t.call(n,function(i){o[i]=function(s,u){var c=this.getInstanceMetaData(s,"last-data-"+i),l=un(u);if(c!==l){var f=a[i].apply(this,arguments);return this.addInstanceMetaData(s,"last-data-"+i,l),f}}}),o});//!steal-remove-start
e.exports=r;//!steal-remove-end
});M.realtimeRestModel=function(e){var t=typeof e=="string"?{url:e}:e;return t.ObjectType===void 0&&(t.ObjectType=class extends br{}),t.ArrayType===void 0&&(t.ArrayType=class extends jc{static get items(){return F.convert(t.ObjectType)}}),Y([Tr,Lr,qn,ba,Ir,Cr,wa,ka],t)},M.restModel=function(e){var t=typeof e=="string"?{url:e}:e;t.ObjectType===void 0&&(t.ObjectType=class extends br{}),t.ArrayType===void 0&&(t.ArrayType=class extends jc{static get items(){return F.convert(t.ObjectType)}});var n=[Jh,Cr,Ir,Tr,Lr].reduce(function(r,a){return a(r)},t);return n.init(),n};var ar=function(e){return Array.isArray(e)?e:e.data},nk=ye(function(e){var t=Array.prototype.forEach,n=Y.behavior("cache-requests",function(r){return{getDiff:function(a,o){var i,s=this;return t.call(o,function(u){var c,l=s.queryLogic.difference(a,u);if(s.queryLogic.isDefinedAndHasMembers(l)){var f=s.queryLogic.intersection(a,u);c={needed:l,cached:!!s.queryLogic.isDefinedAndHasMembers(f)&&f,count:s.queryLogic.count(l)}}else s.queryLogic.isSubset(a,u)&&(c={cached:a,count:0});c&&(!i||c.count<i.count)&&(i=c)}),i?{needed:i.needed,cached:i.cached}:{needed:a}},unionMembers:function(a,o,i,s){return{data:this.queryLogic.unionMembers(o.needed,o.cached,ar(i),ar(s))}},getListData:function(a){a=a||{};var o=this;return this.cacheConnection.getSets(a).then(function(i){var s=o.getDiff(a,i);if(s.needed){if(s.cached){var u=o.cacheConnection.getListData(s.cached),c=r.getListData(s.needed),l=c.then(function(p){return o.cacheConnection.updateListData(ar(p),s.needed).then(function(){return p})}),f=Promise.all([u,c]).then(function(p){var v=p[0],g=p[1];return o.unionMembers(a,s,g,v)});return Promise.all([f,l]).then(function(p){return p[0]})}return r.getListData(s.needed).then(function(p){return o.cacheConnection.updateListData(ar(p),s.needed).then(function(){return p})})}return o.cacheConnection.getListData(s.cached)})}}});//!steal-remove-start
e.exports=n;//!steal-remove-end
}),av=ye(function(e){var t=d.assignMap,n=d.each,r={createdData:"createData",updatedData:"updateData",destroyedData:"destroyData"},a=Y.behavior("data/callbacks-cache",function(o){var i={};return n(r,function(s,u){i[u]=function(c,l,f){return this.cacheConnection[s](t(t({},l),c)),o[u]?o[u].call(this,c,l,f):c}}),i});//!steal-remove-start
e.exports=a;//!steal-remove-end
}),As=[].forEach,rk=Y.behavior("data/combine-requests",function(e){var t;return{unionPendingRequests:function(n){var r=this;n.sort(function(i,s){return r.queryLogic.isSubset(i.set,s.set)?1:r.queryLogic.isSubset(s.set,i.set)?-1:0});var a,o=[];return ak(n,{start:function(i){a={set:i.set,pendingRequests:[i]},o.push(a)},iterate:function(i){var s=r.queryLogic.union(a.set,i.set);if(r.queryLogic.isDefinedAndHasMembers(s))return a.set=s,a.pendingRequests.push(i),!0}}),Promise.resolve(o)},time:1,getListData:function(n){n=n||{};var r=this;t||(t=[],setTimeout(function(){var i=r.unionPendingRequests(t);t=null,i.then(function(s){As.call(s,function(u){var c=d.serialize(u.set);e.getListData(c).then(function(l){u.pendingRequests.length===1?u.pendingRequests[0].deferred.resolve(l):As.call(u.pendingRequests,function(f){f.deferred.resolve({data:r.queryLogic.filterMembers(f.set,u.set,ar(l))})})},function(l){u.pendingRequests.length===1?u.pendingRequests[0].deferred.reject(l):As.call(u.pendingRequests,function(f){f.deferred.reject(l)})})})})},this.time||1));var a,o=((a={}).promise=new Promise(function(i,s){a.resolve=i,a.reject=s}),a);return t.push({deferred:o,set:n}),o.promise}}}),ik=Ww(rk,["getListData"]),ak=function(e,t){for(var n=0;n<e.length;){t.start(e[n]);for(var r=n+1;r<e.length;)t.iterate(e[r])===!0?e.splice(r,1):r++;n++}},sv=ik,sk=M.localStore=function e(t){t.constructor=e;var n=Object.create(Wh(t));return d.assignMap(n,{clear:function(){return localStorage.removeItem(this.name+"/queries"),localStorage.removeItem(this.name+"/records"),this._recordsMap=null,Promise.resolve()},updateQueryDataSync:function(r){localStorage.setItem(this.name+"/queries",JSON.stringify(r))},getQueryDataSync:function(){return JSON.parse(localStorage.getItem(this.name+"/queries"))||[]},getRecord:function(r){return this._recordsMap||this.getAllRecords(),this._recordsMap[r]},getAllRecords:function(){if(!this.cacheLocalStorageReads||!this._recordsMap){var r=JSON.parse(localStorage.getItem(this.name+"/records"))||{};this._recordsMap=r}var a=[];for(var o in this._recordsMap)a.push(this._recordsMap[o]);return a},destroyRecords:function(r){this._recordsMap||this.getAllRecords(),d.eachIndex(r,function(a){var o=d.getIdentity(a,this.queryLogic.schema);delete this._recordsMap[o]},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))},updateRecordsSync:function(r){this._recordsMap||this.getAllRecords(),r.forEach(function(a){var o=d.getIdentity(a,this.queryLogic.schema);this._recordsMap[o]=a},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))}}),n},ov=sk,ok=$h,uv=ye(function(e){var t=Y.behavior("fall-through-cache",function(n){var r={hydrateList:function(a,o){o=o||this.listQuery(a);var i=un(o),s=n.hydrateList.call(this,a,o);return this._getHydrateListCallbacks[i]&&(this._getHydrateListCallbacks[i].shift()(s),this._getHydrateListCallbacks[i].length||delete this._getHydrateListCallbacks[i]),s},_getHydrateListCallbacks:{},_getHydrateList:function(a,o){var i=un(a);this._getHydrateListCallbacks[i]||(this._getHydrateListCallbacks[i]=[]),this._getHydrateListCallbacks[i].push(o)},getListData:function(a){a=a||{};var o=this;return this.cacheConnection.getListData(a).then(function(i){return o._getHydrateList(a,function(s){o.addListReference(s,a),setTimeout(function(){n.getListData.call(o,a).then(function(u){o.cacheConnection.updateListData(u,a),o.updatedList(s,u,a),o.deleteListReference(s,a)},function(u){dn.log("REJECTED",u)})},1)}),i},function(){var i=n.getListData.call(o,a);return i.then(function(s){o.cacheConnection.updateListData(s,a)}),i})},hydrateInstance:function(a){var o=this.id(a),i=n.hydrateInstance.apply(this,arguments);return this._getMakeInstanceCallbacks[o]&&(this._getMakeInstanceCallbacks[o].shift()(i),this._getMakeInstanceCallbacks[o].length||delete this._getMakeInstanceCallbacks[o]),i},_getMakeInstanceCallbacks:{},_getMakeInstance:function(a,o){this._getMakeInstanceCallbacks[a]||(this._getMakeInstanceCallbacks[a]=[]),this._getMakeInstanceCallbacks[a].push(o)},getData:function(a){var o=this;return this.cacheConnection.getData(a).then(function(i){return o._getMakeInstance(o.id(i)||o.id(a),function(s){o.addInstanceReference(s),setTimeout(function(){n.getData.call(o,a).then(function(u){o.cacheConnection.updateData(u),o.updatedInstance(s,u),o.deleteInstanceReference(s)},function(u){dn.log("REJECTED",u)})},1)}),i},function(){var i=n.getData.call(o,a);return i.then(function(s){o.cacheConnection.updateData(s)}),i})}};return r});//!steal-remove-start
e.exports=t;//!steal-remove-end
});function Qf(e){return e==null?e:!(e==="false"||e==="0"||!e)}var uk=d.assignSymbols(Qf,{"can.new":Qf,"can.getSchema":function(){return{type:"Or",values:[!0,!1,void 0,null]}},"can.getName":function(){return"MaybeBoolean"},"can.isMember":function(e){return e==null||typeof e=="boolean"}});function tu(e){var t=typeof e;return t==="string"?(e=Date.parse(e),isNaN(e)?null:new Date(e)):t==="number"?new Date(e):e}function nu(e){this.setValue=e;var t=tu(e);this.value=t==null?t:t.getTime()}nu.prototype.valueOf=function(){return this.value},d.assignSymbols(nu.prototype,{"can.serialize":function(){return this.setValue}});var ck=d.assignSymbols(tu,{"can.new":tu,"can.getSchema":function(){return{type:"Or",values:[Date,void 0,null]}},"can.ComparisonSetType":nu,"can.getName":function(){return"MaybeDate"},"can.isMember":function(e){return e==null||e instanceof Date}});function Gf(e){return e==null?e:+e}var lk=d.assignSymbols(Gf,{"can.new":Gf,"can.getSchema":function(){return{type:"Or",values:[Number,void 0,null]}},"can.getName":function(){return"MaybeNumber"},"can.isMember":function(e){return e==null||typeof e=="number"}});function Yf(e){return e==null?e:""+e}var qe,K,J,ru,cv,hr,fk=d.assignSymbols(Yf,{"can.new":Yf,"can.getSchema":function(){return{type:"Or",values:[String,void 0,null]}},"can.getName":function(){return"MaybeString"},"can.isMember":function(e){return e==null||typeof e=="string"}}),iu=x.for("can.new"),Jf=x.for("can.serialize"),sr=x.for("can.initializing");function lv(e){return e&&(e.canDefineType===!0||e[iu])}var fv=P.ignore(d.getValue.bind(d)),Xf=Object.defineProperty;//!steal-remove-end
function xa(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}function dv(e,t,n,r){t.value===void 0||typeof t.value=="function"&&t.value.length!==0||(t.default=t.value,delete t.value),t.Value!==void 0&&(t.Default=t.Value,delete t.Value)}function Zf(e){return typeof e.value=="function"&&e.value.length}//!steal-remove-start
var dk=K=M.define=function(e,t,n){var r,a=Object.create(n?n.dataInitializers:null),o=Object.create(n?n.computedInitializers:null),i=cv(t,n,e);if(i.dataInitializers=a,i.computedInitializers=o,d.eachKey(i.definitions,function(u,c){K.property(e,c,u,a,o,i.defaultDefinition)}),e.hasOwnProperty("_data"))for(r in a)he(e._data,r,a[r].bind(e),!0);else he(e,"_data",function(){var u={};for(var c in a)he(u,c,a[c].bind(this),!0);return u});if(e.hasOwnProperty("_computed"))for(r in o)he(e._computed,r,o[r].bind(e));else he(e,"_computed",function(){var u=Object.create(null);for(var c in o)he(u,c,o[c].bind(this));return u});(function(u){var c=Object.getOwnPropertyNames(u),l="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(u):[];return c.concat(l)})(qe).forEach(function(u){Object.defineProperty(e,u,{enumerable:!1,value:qe[u],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:i,configurable:!0,writable:!0});var s=x.iterator||x.for("iterator");return e[s]||xa(e,s,function(){return new K.Iterator(this)}),i};K.extensions=function(){},K.property=function(e,t,n,r,a,o){var i=K.extensions.apply(this,arguments);i&&(n=ru(t,i,o||{},e));var s=n.type;//!steal-remove-start
if(s&&function(h){for(var m in h)if(m!=="type")return!1;return!0}(n)&&s===K.types["*"])Xf(e,t,{get:J.get.data(t),set:J.set.events(t,J.get.data(t),J.set.data(t),J.eventType.data(t)),enumerable:!0,configurable:!0});else{n.type=s;var u,c=n.get||Zf(n)?"computed":"data",l=J.read[c](t),f=J.get[c](t),p=J.set[c](t);//!steal-remove-start
//!steal-remove-end
var v=function(h){return h};n.Type&&(v=J.set.Type(t,n.Type,v)),s&&(v=J.set.type(t,s,v));var g=J.set.events(t,l,p,J.eventType[c](t));Zf(n)?a[t]=J.valueResolver(t,n,v):n.default===void 0&&n.Default===void 0||(u=P.ignore(J.get.defaultValue(t,n,v,g))),n.get?a[t]=J.compute(t,n.get,u):u&&(r[t]=u),n.get&&n.set?(p=J.set.setter(t,n.set,J.read.lastSet(t),p,!0),n.get.length):n.set?p=J.set.setter(t,n.set,l,g,!1):c==="data"?p=g:n.get&&n.get.length<1&&(p=function(){//!steal-remove-start
//!steal-remove-end
}),s&&(p=J.set.type(t,s,p)),n.Type&&(p=J.set.Type(t,n.Type,p)),Xf(e,t,{get:f,set:p,enumerable:"serialize"in n?!!n.serialize:!n.get,configurable:!0})}},K.makeDefineInstanceKey=function(e){e[x.for("can.defineInstanceKey")]=function(t,n){var r=this.prototype._define;typeof n=="object"&&dv(t,n);var a=hr(t,n,r.defaultDefinition,this);a&&typeof a=="object"?(K.property(e.prototype,t,a,r.dataInitializers,r.computedInitializers,r.defaultDefinition),r.definitions[t]=a):r.methods[t]=a,this.prototype.dispatch({action:"can.keys",type:"can.keys",target:this.prototype})}},K.Constructor=function(e,t){var n=function(a){Object.defineProperty(this,sr,{configurable:!0,enumerable:!1,value:!0,writable:!0}),K.setup.call(this,a,t),this[sr]=!1},r=K(n.prototype,e);return fu(n),K.makeDefineInstanceKey(n,r),n},J={computeObj:function(e,t,n){var r={oldValue:void 0,compute:n,count:0,handler:function(a){var o=r.oldValue;r.oldValue=a,e.dispatch({action:"set",key:"prop",target:e,value:a,oldValue:o,type:t},[a,o])}};return r},valueResolver:function(e,t,n){var r=J.get.defaultValue(e,t,n);return function(){var a=r.call(this),o=J.computeObj(this,e,new Yd(t.value,this,a));//!steal-remove-end
//!steal-remove-start
return o}},compute:function(e,t,n){return function(){var r,a,o=this,i=n&&n.call(this);//!steal-remove-end
return r=t.length===0?new Z(t,o):t.length===1?new vt(t,o,i):new Gd(t,o,i),a=J.computeObj(o,e,r),a}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){d.setValue(this._computed[e].compute,t)}},events:function(e,t,n,r){return function(a){if(this[sr])n.call(this,a);else{var o,i=t.call(this);if(a===i)return;//!steal-remove-start
n.call(this,a),o={patches:[{type:"set",key:e,value:a}],target:this,action:"set",value:a,oldValue:i,key:e,type:e};//!steal-remove-end
this.dispatch(o,[a,i])}}},setter:function(e,t,n,r,a){return function(o){//!steal-remove-start
var i=this;//!steal-remove-end
T.batch.start();var s=!1,u=n.call(this),c=t.call(this,o,function(l){r.call(i,l),s=!0},u);if(s)T.batch.stop();else if(a)if(c!==void 0)u!==c&&r.call(this,c),T.batch.stop();else{if(t.length===0)return r.call(this,o),void T.batch.stop();if(t.length!==1)return void T.batch.stop();T.batch.stop()}else if(c!==void 0)r.call(this,c),T.batch.stop();else{if(t.length===0)return r.call(this,o),void T.batch.stop();if(t.length!==1)return void T.batch.stop();r.call(this,void 0),T.batch.stop()}}},type:function(e,t,n){function r(a){return n.call(this,t.call(this,a,e))}return lv(t)?t.canDefineType?r:function(a){return n.call(this,d.convert(a,t))}:typeof t=="object"?J.set.Type(e,t,n):r},Type:function(e,t,n){return Array.isArray(t)&&K.DefineList?t=K.DefineList.extend({"#":t[0]}):typeof t=="object"&&(t=K.DefineMap?K.DefineMap.extend(t):K.Constructor(t)),function(r){return r instanceof t||r==null?n.call(this,r):n.call(this,new t(r))}}},eventType:{data:function(e){return function(t,n){return n!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return d.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){var t=this._computed[e].compute;if(t.lastSetValue)return d.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,n,r){return function(){var a=t.default;if(a!==void 0)typeof a=="function"&&(a=a.call(this)),a=n.call(this,a);else{var o=t.Default;o&&(a=n.call(this,new o))}if(t.set){var i,s=!0,u=J.set.setter(e,t.set,function(){},function(c){s?i=c:r.call(this,c)},t.get);return u.call(this,a),s=!1,i}return a}},data:function(e){return function(){return this[sr]||P.add(this,e),this._data[e]}},computed:function(e){return function(t){var n=this._computed[e].compute;return P.isRecording()&&(P.add(this,e),d.isBound(n)||Z.temporarilyBind(n)),fv(n)}}}},K.behaviors=["get","set","value","Value","type","Type","serialize"];function pv(e,t){var n=e._computed&&e._computed[t];n&&n.compute&&(n.count?n.count++:(n.count=1,d.onValue(n.compute,n.handler,"notify"),n.oldValue=fv(n.compute)))}function hv(e,t){var n=e._computed&&e._computed[t];n&&(n.count===1?(n.count=0,d.offValue(n.compute,n.handler,"notify")):n.count--)}ru=function(e,t,n,r){var a={};if(d.eachKey(t,function(u,c){(function(l,f,p){if(f==="enumerable")l.serialize=!!p;else if(f==="type"){var v=p;typeof v=="string"&&(typeof(v=K.types[v])!="object"||lv(v)||(q(l,v),v=v[f])),v!==void 0&&(l[f]=v)}else l[f]=p})(a,c,u)}),d.eachKey(n,function(u,c){a[c]===void 0&&c!=="type"&&c!=="Type"&&(a[c]=u)}),t.Type){var o=t.Type,i=o[Jf];i&&(a.serialize=function(u){return i.call(u)}),o[iu]&&(a.type=o,delete a.Type)}if(typeof t.type!="string"){if(!a.type&&!a.Type){var s=d.assignMap({},n);a=d.assignMap(s,a)}d.size(a)===0&&(a.type=K.types["*"])}return dv(e,a),a},hr=function(e,t,n,r){var a;return typeof t=="string"?a={type:t}:t&&(t[Jf]||t[iu])?a={Type:t}:typeof t=="function"?d.isConstructorLike(t)&&(a={Type:t}):Array.isArray(t)?a={Type:t}:d.isPlainObject(t)&&(a=t),a?ru(e,a,n,r):t},cv=function(e,t,n){var r,a=Object.create(t?t.definitions:null),o={},i=e["*"];return i?(delete e["*"],r=hr("*",i,{})):r=Object.create(null),function(s,u){for(var c in s)s.hasOwnProperty(c)&&u.call(s,c,Object.getOwnPropertyDescriptor(s,c))}(e,function(s,u){var c;if(c=u.get||u.set?{get:u.get,set:u.set}:u.value,s!=="constructor"){var l=hr(s,c,r,n);l&&typeof l=="object"&&d.size(l)>0?a[s]=l:typeof l=="function"&&(o[s]=l)}else o[s]=c}),i&&xa(e,"*",i),{definitions:a,methods:o,defaultDefinition:r}},qe=ee({});var pk=x.for("can.meta");q(qe,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e,t,n){return pv(this,e),ee.addEventListener.apply(this,arguments)},removeEventListener:function(e,t){return hv(this,e),ee.removeEventListener.apply(this,arguments)}}),qe.on=qe.bind=qe.addEventListener,qe.off=qe.unbind=qe.removeEventListener;var hk=x.for("can.onKeyValue"),vk=x.for("can.offKeyValue");d.assignSymbols(qe,{"can.onKeyValue":function(e){return pv(this,e),ee[hk].apply(this,arguments)},"can.offKeyValue":function(e){return hv(this,e),ee[vk].apply(this,arguments)}}),delete qe.one,K.setup=function(e,t){Object.defineProperty(this,"constructor",{value:this.constructor,enumerable:!1,writable:!1}),Object.defineProperty(this,pk,{value:Object.create(null),enumerable:!1,writable:!1});var n=this._define.definitions,r=Object.create(null),a=this;d.eachKey(e,function(o,i){n[i]!==void 0?a[i]=o:K.expando(a,i,o)}),d.size(r)>0&&xa(this,"_instanceDefinitions",r)};var ed=function(e){return e};K.expando=function(e,t,n){if(K._specialKeys[t])return!0;var r=e._define.definitions;if(!r||!r[t]){var a=e._instanceDefinitions;if(!a){if(Object.isSealed(e))return;Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),a=e._instanceDefinitions}if(!a[t]){var o=e._define.defaultDefinition||{type:K.types.observable};return K.property(e,t,o,{},{}),o.type?e._data[t]=K.make.set.type(t,o.type,ed).call(e,n):o.Type&&d.isConstructorLike(o.Type)?e._data[t]=K.make.set.Type(t,o.Type,ed).call(e,n):e._data[t]=K.types.observable(n),a[t]=o,e[sr]||(T.batch.start(),e.dispatch({action:"can.keys",target:e,type:"can.keys"}),Object.prototype.hasOwnProperty.call(e._data,t)?e.dispatch({action:"add",target:e,value:e._data[t],oldValue:void 0,key:t,type:t,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]):e.dispatch({type:"set",target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]),T.batch.stop()),!0}}},K.replaceWith=he,K.eventsProto=qe,K.defineConfigurableAndNotEnumerable=xa,K.make=J,K.getDefinitionOrMethod=hr,K._specialKeys={_data:!0,_computed:!0};var Vs={};function Ns(e){return d.isValueLike(e)&&d.isObservableLike(e)}K.makeSimpleGetterSetter=function(e){if(Vs[e]===void 0){var t=J.set.events(e,J.get.data(e),J.set.data(e),J.eventType.data(e));Vs[e]={get:J.get.data(e),set:function(n){return t.call(this,K.types.observable(n))},enumerable:!0,configurable:!0}}return Vs[e]},K.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet=typeof e.get=="function"},K.Iterator.prototype.next=function(){var e;if(this.definitions.length){if(e=this.definitions.shift(),this.obj._define.definitions[e].get)return this.next()}else{if(!this.instanceDefinitions.length)return{value:void 0,done:!0};e=this.instanceDefinitions.shift()}return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}},K.types={date:ck,number:lk,boolean:uk,observable:function(e){return Array.isArray(e)&&K.DefineList?e=new K.DefineList(e):d.isPlainObject(e)&&K.DefineMap&&(e=new K.DefineMap(e)),e},stringOrObservable:function(e){return Array.isArray(e)?new K.DefaultList(e):d.isPlainObject(e)?new K.DefaultMap(e):d.convert(e,K.types.string)},htmlbool:function(e){return e===""||!!function(t){switch(t){case"NaN":case"Infinity":return+t;case"null":return null;case"undefined":return;case"true":case"false":return t==="true";default:var n=+t;return isNaN(n)?t:n}}(e)},"*":function(e){return e},any:function(e){return e},string:fk,compute:{set:function(e,t,n,r){return Ns(e)?e:Ns(r)?(d.setValue(r,e),r):e},get:function(e){return Ns(e)?d.getValue(e):e}}},K.updateSchemaKeys=function(e,t){for(var n in t){var r=t[n];r.serialize!==!1&&(r.Type?e.keys[n]=r.Type:r.type?e.keys[n]=r.type:e.keys[n]=function(a){return a},t[n].identity===!0&&e.identity.push(n))}return e};var vv=Y.behavior("can/ref",function(e){return{init:function(){e.init.apply(this,arguments),this.Map.Ref=function(t){var n=d.getSchema(t.queryLogic).identity[0],r=function(s,u){typeof s=="object"&&(s=(u=s)[n]);var c=r.store.get(s);if(c)return u&&!c._value&&(u instanceof t.Map?c._value=u:c._value=t.hydrateInstance(u)),c;this[n]=s,u&&(u instanceof t.Map?this._value=u:this._value=t.hydrateInstance(u)),qn.requests.count()>0&&(r._requestInstances[s]||(r.store.addReference(s,this),r._requestInstances[s]=this))};r.store=new la,r._requestInstances={},r.type=function(s){return s&&typeof s!="object"?new r(s):new r(s[n],s)};var a={promise:{get:function(){if(this._value)return Promise.resolve(this._value);var s={};return s[n]=this[n],t.Map.get(s)}},_state:{get:function(s,u){return u&&this.promise.then(function(){u("resolved")},function(){u("rejected")}),"pending"}},value:{get:function(s,u){if(this._value)return this._value;u&&this.promise.then(function(c){u(c)})}},reason:{get:function(s,u){this._value||this.promise.catch(function(c){u(c)})}}};a[n]={type:"*",set:function(){this._value=void 0}},dk(r.prototype,a),r.prototype.unobservedId=P.ignore(function(){return this[n]}),r.prototype.isResolved=function(){return!!this._value||this._state==="resolved"},r.prototype.isRejected=function(){return this._state==="rejected"},r.prototype.isPending=function(){return!this._value&&(this._state!=="resolved"||this._state!=="rejected")},r.prototype.serialize=function(){return this[n]},d.assignSymbols(r.prototype,{"can.serialize":r.prototype.serialize,"can.getName":function(){return d.getName(this.constructor)+"{"+this[n]+"}"}});var o=r.prototype._eventSetup;r.prototype._eventSetup=function(){return r.store.addReference(this.unobservedId(),this),o.apply(this,arguments)};var i=r.prototype._eventTeardown;//!steal-remove-end
return r.prototype._eventTeardown=function(){return r.store.deleteReference(this.unobservedId(),this),i.apply(this,arguments)},qn.requests.on("end",function(){for(var s in r._requestInstances)r.store.deleteReference(s);r._requestInstances={}}),Object.defineProperty(r,"name",{value:d.getName(t.Map)+"Ref",configurable:!0}),r}(this)}}}),Rs=et().$;Y.superMap=function(e){var t=[Tr,Lr,vv,qn,ba,sv,Ir,Cr,wa,ka];return typeof localStorage<"u"&&(e.cacheConnection||(e.cacheConnection=Y([ov],{name:e.name+"Cache",idProp:e.idProp,queryLogic:e.queryLogic})),t.push(av,uv)),Rs&&Rs.ajax&&(e.ajax=Rs.ajax),Y(t,e)};var gk=Y.superMap,qs=et().$;Y.baseMap=function(e){var t=[Tr,Lr,vv,qn,ba,Ir,Cr,wa,ka];return qs&&qs.ajax&&(e.ajax=qs.ajax),Y(t,e)};var mk=Y.baseMap;Y.cacheRequests=nk,Y.constructor=Tr,Y.constructorCallbacksOnce=ka,Y.constructorStore=qn,Y.dataCallbacks=ba,Y.dataCallbacksCache=av,Y.dataCombineRequests=sv,Y.dataLocalStorageCache=ov,Y.dataMemoryCache=ok,Y.dataParse=Ir,Y.dataUrl=Cr,Y.fallThroughCache=uv,Y.realTime=wa,Y.canMap=Lr,Y.superMap=gk,Y.baseMap=mk;var td=["pushState","replaceState"],yk=x.for("can.dispatch");function gv(){var e=Mr(),t=e.protocol+"//"+e.host,n=re.call("root");return n.indexOf(t)===0?n.substr(t.length):n}function di(){var e=gv(),t=Mr(),n=t.pathname+t.search,r=n.indexOf(e);return n.substr(r+e.length)}function kt(){this.replaceStateOnceKeys=[],this.replaceStateKeys=[],this.dispatchHandlers=this.dispatchHandlers.bind(this),this.anchorClickHandler=function(e){kt.prototype.shouldCallPushState.call(this,this,e)&&kt.prototype.anchorClickHandler.call(this,this,e)},this.keepHash=!0}function bk(e,t,n,r){var a,o,i=d.getSchema(e),s=d.size(e);return i!=null&&i.values!=null&&(a=d.getSchema(i.values)),a==null&&s>0&&(a=d.getSchema(d.getKeyValue(e,0))),a&&(o=function(u){if(u.identity&&u.identity.length)return function(c,l){return d.getIdentity(c,u)===d.getIdentity(l,u)}}(a)),function(u,c,l){if(d.isPrimitive(u)||d.isPrimitive(c))return u===c;if(o&&o(u,c)){var f=pa(u,c,n?n+"."+l:""+l);return r.push.apply(r,f),!0}return pa(u,c).length===0}}function pa(e,t,n){if(e&&d.isMoreListLikeThanMapLike(e)){var r=[],a=bk(e,0,n,r),o=Kn(e,t,a).map(function(u){return n&&(u.key=n),u});return r.concat(o)}n=n?n+".":"";var i=Su(e,t),s=[];return i.forEach(function(u){var c=u.key;u.key=n+u.key;var l=e&&d.getKeyValue(e,c),f=t&&d.getKeyValue(t,c);if(function(v,g,h){return v.type==="set"&&g&&h&&typeof g=="object"&&typeof h=="object"}(u,l,f)){var p=pa(l,f,u.key);s.push.apply(s,p)}else s.push(u)}),s}kt.prototype=Object.create(_e.prototype),kt.constructor=kt,d.assign(kt.prototype,{root:"/",matchSlashes:!1,paramsMatcher:/^\?(?:[^=]+=[^&]*&)*[^=]+=[^&]*/,querySeparator:"?",dispatchHandlers:function(){var e=this._value;this._value=di(),e!==this._value&&this[yk](this._value,e)},shouldCallPushState:function(e,t){if(!(t.isDefaultPrevented?t.isDefaultPrevented():t.defaultPrevented===!0)){if(e.href==="javascript://"||e.target==="_blank"||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;var n=e.host||window.location.host;if(window.location.host===n){var r,a,o,i=gv();if(e instanceof HTMLAnchorElement?(r=e.pathname,a=e.href,o=r+e.search):e.namespaceURI==="http://www.w3.org/1999/xlink"&&(r=a=e.getAttributeNS("http://www.w3.org/1999/xlink","href"),o=a),r!==void 0&&r.indexOf(i)===0){var s=o.substr(i.length);return fr.rule(s)!==void 0&&(a.indexOf("#")>=0&&(this.keepHash=!0),(o!==window.location.pathname+window.location.search||e.hash===window.location.hash)&&t.preventDefault&&t.preventDefault(),!0)}}}},anchorClickHandler:function(e,t){var n=e.href?e.href:e.getAttributeNS("http://www.w3.org/1999/xlink","href");window.history.pushState(null,null,n)},onBound:function(){if(!so()){var e=ie(),t=et();this._value=di(),oe.addDelegateListener(e.documentElement,"click","a",this.anchorClickHandler);var n=this.originalMethods={},r=this.dispatchHandlers;d.eachKey(td,function(a){this.originalMethods[a]=t.history[a],t.history[a]=function(o,i,s){var u=s.indexOf("http")===0,c=Mr(),l=c.search+c.hash;(!u&&s!==c.pathname+l||u&&s!==c.href+l)&&(n[a].apply(t.history,arguments),r())}},this),oe.addEventListener(t,"popstate",this.dispatchHandlers)}},onUnbound:function(){if(!so()){var e=ie(),t=et();oe.removeDelegateListener(e.documentElement,"click","a",this.anchorClickHandler),d.eachKey(td,function(n){t.history[n]=this.originalMethods[n]},this),oe.removeEventListener(t,"popstate",this.dispatchHandlers)}},get:function(){return P.add(this),di()},set:function(e){var t=fr.deparam(e),n=fr.deparam(di()),r="pushState",a={};this.keepHash&&e.indexOf("#")===-1&&window.location.hash&&(e+=window.location.hash),Su(n,t).forEach(function(o){return a[o.key]=!0}),this.replaceStateKeys.length&&this.replaceStateKeys.forEach(function(o){a[o]&&(r="replaceState")}),this.replaceStateOnceKeys.length&&this.replaceStateOnceKeys.forEach(function(o,i,s){a[o]&&(r="replaceState",s.splice(i,1))}),window.history[r](null,null,re.call("root")+e)},replaceStateOn:function(){d.addValues(this.replaceStateKeys,d.toArray(arguments))},replaceStateOnce:function(){d.addValues(this.replaceStateOnceKeys,d.toArray(arguments))},replaceStateOff:function(){d.removeValues(this.replaceStateKeys,d.toArray(arguments)),d.removeValues(this.replaceStateOnceKeys,d.toArray(arguments))}}),d.assignSymbols(kt.prototype,{"can.getValue":kt.prototype.get,"can.setValue":kt.prototype.set});var wk={deep:pa,list:Kn,map:Su,mergeDeep:nv,Patcher:$p};function js(e,t,n){var r=new Map;return{_subscriptions:r,defaultEventType:e,addEventListener:function(a,o,i){var s=this.dispatch,u=r.get(a);u||(u={removeListener:null,listeners:new Set},r.set(a,u)),u.listeners.size===0&&(u.removeListener=t(a,function(c){var l={type:o};for(var f in c)l[f]=c[f];s(a,l,n!==!1)})),u.listeners.add(i),a.addEventListener(o,i)},removeEventListener:function(a,o,i){a.removeEventListener(o,i);var s=r.get(a);s&&(s.listeners.delete(i),s.listeners.size===0&&(s.removeListener(),r.delete(a)))}}}M.diff=wk,M.addJQueryEvents=function(e){var t=e.event.special,n=[];for(var r in t)if(!oe._eventRegistry.has(r)){var a={defaultEventType:r,addEventListener:function(i,s,u){$(i).on(s,u)},removeEventListener:function(i,s,u){$(i).off(s,u)}},o=oe.addEvent(a);n.push(o)}return function(){n.forEach(function(i){i()})}};var kk=M.domMutateDomEvents={attributes:js("attributes",ue.onNodeAttributeChange),inserted:js("inserted",ue.onNodeConnected,!1),removed:js("removed",ue.onNodeDisconnected)};M.domMutateDomEvents=kk;x.for("can.onValue");x.for("can.offValue");x.for("can.onKeyValue");x.for("can.offKeyValue");Lt.getKeyValue("global");function jn(e){if(!e)return e;if(e instanceof Date)return new Date(e.getTime()+60*e.getTimezoneOffset()*1e3);if(e.split(/\D/).length===3)throw new Error("Unable to parse "+e);return new Date(e)}function nd(e){let t=e.split(/\D/).map(n=>parseInt(n));return t[1]=t[1]-1,new Date(...t)}function rd(e){return e&&new Date(e)}//!steal-remove-start
const id=864e5,mv={QA:!0,"In QA":!0,"QA Complete":!0},yv={"Partner Review":!0,UAT:!0},xk={Idea:!0,"To Do":!0,Open:!0},Cu={Done:!0,Cancelled:!0},Ek={Blocked:!0,blocked:!0,delayed:!0,Delayed:!0},ad=function(){const e=[["qa",mv],["uat",yv],["todo",xk],["done",Cu],["blocked",Ek]],t={};for(let[n,r]of e)for(let a in r)t[a]=n;return t}(),sd=0;function bv(e){return ad[e.status]?ad[e.status]:"dev"}function Dk(e){return Object.assign(e.dateData.rollup,function(t){return t.dateData.children.issues.filter(function(r){return r.dateData.rollup.status!=="complete"}).length===0?{status:"complete",statusData:{message:"All initiatives are complete"}}:au(t)}(e)),Object.assign(e.dateData.dev,function(t){return Ou(t)}(e)),Object.assign(e.dateData.qa,function(t){return Pu(t)}(e)),Object.assign(e.dateData.uat,function(t){return _u(t)}(e)),e}function Sk(e){var t,n;return n=e,Object.assign(n.dateData.rollup,au(n)),Object.assign(n.dateData.dev,Ou(n)),Object.assign(n.dateData.qa,Pu(n)),Object.assign(n.dateData.uat,_u(n)),(t=e.dateData)!==null&&t!==void 0&&(t=t.children)!==null&&t!==void 0&&(t=t.issues)!==null&&t!==void 0&&t.length&&e.dateData.children.issues.forEach(function(r){Object.assign(r.dateData.rollup,au(r))}),e}function au(e){var t,n;if(e["Issue key"],Cu[e.Status])return{status:"complete",statusData:{message:"Status is `DONE`"}};const r=[Ou(e).status,Pu(e).status,_u(e).status];if(r.every(i=>i==="complete"))return{status:"complete",statusData:{warning:!0,message:"Some epics have due dates in the past, but are not `DONE`"}};if(r.some(i=>i.toLowerCase()==="blocked")||e.Status&&e.Status.toLowerCase()==="blocked")return{status:"blocked",statusData:{message:"Some epics are blocked"}};const a=Ea(e.dateData.rollup),o=a==="complete"&&((t=e.dateData.rollup)===null||t===void 0||(t=t.issues)===null||t===void 0?void 0:t.length)&&((n=e.dateData.rollup)===null||n===void 0||(n=n.issues)===null||n===void 0?void 0:n.every(i=>!vr(i)));return{status:a,statusData:{warning:o,message:o?"Some epics have due dates in the past, but are not `DONE`":null}}}function Ks(e){return mv[e.Status]||ji(e)}function ji(e){return yv[e.Status]||vr(e)}function vr(e){return Cu[e.Status]}function Ea(e){return e.due?+e.due<new Date?"complete":e.lastPeriod&&+e.due>sd+ +e.lastPeriod.due?"behind":e.lastPeriod&&+e.due+sd<+e.lastPeriod.due?"ahead":e.lastPeriod?e.start>new Date?"notstarted":"ontrack":"new":"unknown"}function Ou(e){var t,n,r,a,o;if(Ks(e))return{status:"complete",statusData:{message:"initiative status is `DEV` complete"}};const i=e.dateData.dev;if(i!=null&&(t=i.issues)!==null&&t!==void 0&&t.length&&i!==null&&i!==void 0&&(n=i.issues)!==null&&n!==void 0&&n.every(c=>Ks(c)))return{status:"complete",statusData:{warning:!!e.Status,message:"All epics are dev complete. Move the issue to a `QA` status"}};if(i!=null&&(r=i.issues)!==null&&r!==void 0&&r.some(c=>c.Status.toLowerCase()==="blocked"))return{status:"blocked",statusData:{message:"An epic is blocked"}};if(!i)return{status:"unknown",statusData:{warning:!1,message:"Did not break down dev work on this level"}};const s=Ea(i),u=s==="complete"&&(i==null||(a=i.issues)===null||a===void 0?void 0:a.length)&&(i==null||(o=i.issues)===null||o===void 0?void 0:o.every(c=>!Ks(c)));return{status:s,statusData:{warning:u,message:u?"Some epics have due dates in the past, but are not `DEV` complete":null}}}function Pu(e){var t,n,r;if(ji(e))return{status:"complete",statusData:{message:"initiative status is `QA` complete"}};const a=e.dateData.qa;if(!a)return{status:"unknown",statusData:{warning:!1,message:"Did not break down qa work within this issue"}};if(a.issues.length&&a.issues.every(s=>ji(s)))return{status:"complete",statusData:{warning:!!e.Status,message:"All QA epics are `QA` complete. Move the initiative to a `UAT` status"}};if(e!=null&&(t=e.qa)!==null&&t!==void 0&&(t=t.issues)!==null&&t!==void 0&&t.some(s=>s.Status.toLowerCase()==="blocked"))return{status:"blocked",statusData:{message:"An epic is blocked"}};const o=Ea(a),i=o==="complete"&&(a==null||(n=a.issues)===null||n===void 0?void 0:n.length)&&(a==null||(r=a.issues)===null||r===void 0?void 0:r.every(s=>!ji(s)));return{status:o,statusData:{warning:i,message:i?"Some epics have due dates in the past, but are not `QA` complete":null}}}function _u(e){var t,n,r;if(vr(e))return{status:"complete",statusData:{message:"initiative status is `UAT` complete"}};const a=e.dateData.uat;if(!a)return{status:"unknown",statusData:{warning:!1,message:"Did not break down uat work within this issue"}};if(a.issues.length&&a.issues.every(s=>vr(s)))return{status:"complete",statusData:{warning:!!e.Status,message:"All UAT epics are `UAT` complete. Move the initiative to a `DONE` status"}};if(a!=null&&(t=a.issues)!==null&&t!==void 0&&t.some(s=>s.Status.toLowerCase()==="blocked"))return{status:"blocked",statusData:{message:"An epic is blocked"}};const o=Ea(a),i=o==="complete"&&(a==null||(n=a.issues)===null||n===void 0?void 0:n.length)&&(a==null||(r=a.issues)===null||r===void 0?void 0:r.every(s=>!vr(s)));return{status:o,statusData:{warning:i,message:i?"Some epics have due dates in the past, but are not `UAT` complete":null}}}function Jn(e,t){let n=0;const r=new Date(e.getTime());for(;r<=t;){const a=r.getDay();a!==0&&a!==6&&n++,r.setDate(r.getDate()+1)}return n}var j,wv={exports:{}};wv.exports=(j=function(e,t){var n=Array.prototype.concat,r=Array.prototype.slice,a=Object.prototype.toString;function o(h,m){var w=h>m?h:m;return e.pow(10,17-~~(e.log(w>0?w:-w)*e.LOG10E))}var i=Array.isArray||function(h){return a.call(h)==="[object Array]"};function s(h){return a.call(h)==="[object Function]"}function u(h){return typeof h=="number"&&h-h==0}function c(h){return n.apply([],h)}function l(){return new l._init(arguments)}function f(){return 0}function p(){return 1}function v(h,m){return h===m?1:0}l.fn=l.prototype,l._init=function(h){if(i(h[0]))if(i(h[0][0])){s(h[1])&&(h[0]=l.map(h[0],h[1]));for(var m=0;m<h[0].length;m++)this[m]=h[0][m];this.length=h[0].length}else this[0]=s(h[1])?l.map(h[0],h[1]):h[0],this.length=1;else if(u(h[0]))this[0]=l.seq.apply(null,h),this.length=1;else{if(h[0]instanceof l)return l(h[0].toArray());this[0]=[],this.length=1}return this},l._init.prototype=l.prototype,l._init.constructor=l,l.utils={calcRdx:o,isArray:i,isFunction:s,isNumber:u,toVector:c},l._random_fn=e.random,l.setRandom=function(h){if(typeof h!="function")throw new TypeError("fn is not a function");l._random_fn=h},l.extend=function(h){var m,w;if(arguments.length===1){for(w in h)l[w]=h[w];return this}for(m=1;m<arguments.length;m++)for(w in arguments[m])h[w]=arguments[m][w];return h},l.rows=function(h){return h.length||1},l.cols=function(h){return h[0].length||1},l.dimensions=function(h){return{rows:l.rows(h),cols:l.cols(h)}},l.row=function(h,m){return i(m)?m.map(function(w){return l.row(h,w)}):h[m]},l.rowa=function(h,m){return l.row(h,m)},l.col=function(h,m){if(i(m)){var w=l.arange(h.length).map(function(){return new Array(m.length)});return m.forEach(function(E,S){l.arange(h.length).forEach(function(I){w[I][S]=h[I][E]})}),w}for(var y=new Array(h.length),k=0;k<h.length;k++)y[k]=[h[k][m]];return y},l.cola=function(h,m){return l.col(h,m).map(function(w){return w[0]})},l.diag=function(h){for(var m=l.rows(h),w=new Array(m),y=0;y<m;y++)w[y]=[h[y][y]];return w},l.antidiag=function(h){for(var m=l.rows(h)-1,w=new Array(m),y=0;m>=0;m--,y++)w[y]=[h[y][m]];return w},l.transpose=function(h){var m,w,y,k,E,S=[];for(i(h[0])||(h=[h]),w=h.length,y=h[0].length,E=0;E<y;E++){for(m=new Array(w),k=0;k<w;k++)m[k]=h[k][E];S.push(m)}return S.length===1?S[0]:S},l.map=function(h,m,w){var y,k,E,S,I;for(i(h[0])||(h=[h]),k=h.length,E=h[0].length,S=w?h:new Array(k),y=0;y<k;y++)for(S[y]||(S[y]=new Array(E)),I=0;I<E;I++)S[y][I]=m(h[y][I],y,I);return S.length===1?S[0]:S},l.cumreduce=function(h,m,w){var y,k,E,S,I;for(i(h[0])||(h=[h]),k=h.length,E=h[0].length,S=w?h:new Array(k),y=0;y<k;y++)for(S[y]||(S[y]=new Array(E)),E>0&&(S[y][0]=h[y][0]),I=1;I<E;I++)S[y][I]=m(S[y][I-1],h[y][I]);return S.length===1?S[0]:S},l.alter=function(h,m){return l.map(h,m,!0)},l.create=function(h,m,w){var y,k,E=new Array(h);for(s(m)&&(w=m,m=h),y=0;y<h;y++)for(E[y]=new Array(m),k=0;k<m;k++)E[y][k]=w(y,k);return E},l.zeros=function(h,m){return u(m)||(m=h),l.create(h,m,f)},l.ones=function(h,m){return u(m)||(m=h),l.create(h,m,p)},l.rand=function(h,m){return u(m)||(m=h),l.create(h,m,l._random_fn)},l.identity=function(h,m){return u(m)||(m=h),l.create(h,m,v)},l.symmetric=function(h){var m,w,y=h.length;if(h.length!==h[0].length)return!1;for(m=0;m<y;m++)for(w=0;w<y;w++)if(h[w][m]!==h[m][w])return!1;return!0},l.clear=function(h){return l.alter(h,f)},l.seq=function(h,m,w,y){s(y)||(y=!1);var k,E=[],S=o(h,m),I=(m*S-h*S)/((w-1)*S),V=h;for(k=0;V<=m&&k<w;V=(h*S+I*S*++k)/S)E.push(y?y(V,k):V);return E},l.arange=function(h,m,w){var y,k=[];if(w=w||1,m===t&&(m=h,h=0),h===m||w===0)return[];if(h<m&&w<0)return[];if(h>m&&w>0)return[];if(w>0)for(y=h;y<m;y+=w)k.push(y);else for(y=h;y>m;y+=w)k.push(y);return k},l.slice=function(){function h(w,y,k,E){var S,I=[],V=w.length;if(y===t&&k===t&&E===t)return l.copy(w);if(E=E||1,(y=(y=y||0)>=0?y:V+y)===(k=(k=k||w.length)>=0?k:V+k)||E===0)return[];if(y<k&&E<0)return[];if(y>k&&E>0)return[];if(E>0)for(S=y;S<k;S+=E)I.push(w[S]);else for(S=y;S>k;S+=E)I.push(w[S]);return I}function m(w,y){var k,E;return u((y=y||{}).row)?u(y.col)?w[y.row][y.col]:h(l.rowa(w,y.row),(k=y.col||{}).start,k.end,k.step):u(y.col)?h(l.cola(w,y.col),(E=y.row||{}).start,E.end,E.step):(E=y.row||{},k=y.col||{},h(w,E.start,E.end,E.step).map(function(S){return h(S,k.start,k.end,k.step)}))}return m}(),l.sliceAssign=function(h,m,w){var y,k;if(u(m.row)){if(u(m.col))return h[m.row][m.col]=w;m.col=m.col||{},m.col.start=m.col.start||0,m.col.end=m.col.end||h[0].length,m.col.step=m.col.step||1,y=l.arange(m.col.start,e.min(h.length,m.col.end),m.col.step);var E=m.row;return y.forEach(function(I,V){h[E][I]=w[V]}),h}if(u(m.col)){m.row=m.row||{},m.row.start=m.row.start||0,m.row.end=m.row.end||h.length,m.row.step=m.row.step||1,k=l.arange(m.row.start,e.min(h[0].length,m.row.end),m.row.step);var S=m.col;return k.forEach(function(I,V){h[I][S]=w[V]}),h}return w[0].length===t&&(w=[w]),m.row.start=m.row.start||0,m.row.end=m.row.end||h.length,m.row.step=m.row.step||1,m.col.start=m.col.start||0,m.col.end=m.col.end||h[0].length,m.col.step=m.col.step||1,k=l.arange(m.row.start,e.min(h.length,m.row.end),m.row.step),y=l.arange(m.col.start,e.min(h[0].length,m.col.end),m.col.step),k.forEach(function(I,V){y.forEach(function(D,L){h[I][D]=w[V][L]})}),h},l.diagonal=function(h){var m=l.zeros(h.length,h.length);return h.forEach(function(w,y){m[y][y]=w}),m},l.copy=function(h){return h.map(function(m){return u(m)?m:m.map(function(w){return w})})};var g=l.prototype;return g.length=0,g.push=Array.prototype.push,g.sort=Array.prototype.sort,g.splice=Array.prototype.splice,g.slice=Array.prototype.slice,g.toArray=function(){return this.length>1?r.call(this):r.call(this)[0]},g.map=function(h,m){return l(l.map(this,h,m))},g.cumreduce=function(h,m){return l(l.cumreduce(this,h,m))},g.alter=function(h){return l.alter(this,h),this},function(h){for(var m=0;m<h.length;m++)(function(w){g[w]=function(y){var k,E=this;return y?(setTimeout(function(){y.call(E,g[w].call(E))}),this):(k=l[w](this),i(k)?l(k):k)}})(h[m])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(h){for(var m=0;m<h.length;m++)(function(w){g[w]=function(y,k){var E=this;return k?(setTimeout(function(){k.call(E,g[w].call(E,y))}),this):l(l[w](this,y))}})(h[m])}("row col".split(" ")),function(h){for(var m=0;m<h.length;m++)(function(w){g[w]=function(){return l(l[w].apply(null,arguments))}})(h[m])}("create zeros ones rand identity".split(" ")),l}(Math),function(e,t){var n=e.utils.isFunction;function r(i,s){return i-s}function a(i,s,u){return t.max(s,t.min(i,u))}e.sum=function(i){for(var s=0,u=i.length;--u>=0;)s+=i[u];return s},e.sumsqrd=function(i){for(var s=0,u=i.length;--u>=0;)s+=i[u]*i[u];return s},e.sumsqerr=function(i){for(var s,u=e.mean(i),c=0,l=i.length;--l>=0;)c+=(s=i[l]-u)*s;return c},e.sumrow=function(i){for(var s=0,u=i.length;--u>=0;)s+=i[u];return s},e.product=function(i){for(var s=1,u=i.length;--u>=0;)s*=i[u];return s},e.min=function(i){for(var s=i[0],u=0;++u<i.length;)i[u]<s&&(s=i[u]);return s},e.max=function(i){for(var s=i[0],u=0;++u<i.length;)i[u]>s&&(s=i[u]);return s},e.unique=function(i){for(var s={},u=[],c=0;c<i.length;c++)s[i[c]]||(s[i[c]]=!0,u.push(i[c]));return u},e.mean=function(i){return e.sum(i)/i.length},e.meansqerr=function(i){return e.sumsqerr(i)/i.length},e.geomean=function(i){var s=i.map(t.log),u=e.mean(s);return t.exp(u)},e.median=function(i){var s=i.length,u=i.slice().sort(r);return 1&s?u[s/2|0]:(u[s/2-1]+u[s/2])/2},e.cumsum=function(i){return e.cumreduce(i,function(s,u){return s+u})},e.cumprod=function(i){return e.cumreduce(i,function(s,u){return s*u})},e.diff=function(i){var s,u=[],c=i.length;for(s=1;s<c;s++)u.push(i[s]-i[s-1]);return u},e.rank=function(i){var s,u=[],c={};for(s=0;s<i.length;s++)c[v=i[s]]?c[v]++:(c[v]=1,u.push(v));var l=u.sort(r),f={},p=1;for(s=0;s<l.length;s++){var v,g=c[v=l[s]],h=(p+(p+g-1))/2;f[v]=h,p+=g}return i.map(function(m){return f[m]})},e.mode=function(i){var s,u=i.length,c=i.slice().sort(r),l=1,f=0,p=0,v=[];for(s=0;s<u;s++)c[s]===c[s+1]?l++:(l>f?(v=[c[s]],f=l,p=0):l===f&&(v.push(c[s]),p++),l=1);return p===0?v[0]:v},e.range=function(i){return e.max(i)-e.min(i)},e.variance=function(i,s){return e.sumsqerr(i)/(i.length-(s?1:0))},e.pooledvariance=function(i){return i.reduce(function(s,u){return s+e.sumsqerr(u)},0)/(i.reduce(function(s,u){return s+u.length},0)-i.length)},e.deviation=function(i){for(var s=e.mean(i),u=i.length,c=new Array(u),l=0;l<u;l++)c[l]=i[l]-s;return c},e.stdev=function(i,s){return t.sqrt(e.variance(i,s))},e.pooledstdev=function(i){return t.sqrt(e.pooledvariance(i))},e.meandev=function(i){for(var s=e.mean(i),u=[],c=i.length-1;c>=0;c--)u.push(t.abs(i[c]-s));return e.mean(u)},e.meddev=function(i){for(var s=e.median(i),u=[],c=i.length-1;c>=0;c--)u.push(t.abs(i[c]-s));return e.median(u)},e.coeffvar=function(i){return e.stdev(i)/e.mean(i)},e.quartiles=function(i){var s=i.length,u=i.slice().sort(r);return[u[t.round(s/4)-1],u[t.round(s/2)-1],u[t.round(3*s/4)-1]]},e.quantiles=function(i,s,u,c){var l,f,p,v,g,h=i.slice().sort(r),m=[s.length],w=i.length;for(u===void 0&&(u=3/8),c===void 0&&(c=3/8),l=0;l<s.length;l++)p=w*(f=s[l])+(u+f*(1-u-c)),v=t.floor(a(p,1,w-1)),g=a(p-v,0,1),m[l]=(1-g)*h[v-1]+g*h[v];return m},e.percentile=function(i,s,u){var c=i.slice().sort(r),l=s*(c.length+(u?1:-1))+(u?0:1),f=parseInt(l),p=l-f;return f+1<c.length?c[f-1]+p*(c[f]-c[f-1]):c[f-1]},e.percentileOfScore=function(i,s,u){var c,l,f=0,p=i.length,v=!1;for(u==="strict"&&(v=!0),l=0;l<p;l++)c=i[l],(v&&c<s||!v&&c<=s)&&f++;return f/p},e.histogram=function(i,s){s=s||4;var u,c=e.min(i),l=(e.max(i)-c)/s,f=i.length,p=[];for(u=0;u<s;u++)p[u]=0;for(u=0;u<f;u++)p[t.min(t.floor((i[u]-c)/l),s-1)]+=1;return p},e.covariance=function(i,s){var u,c=e.mean(i),l=e.mean(s),f=i.length,p=new Array(f);for(u=0;u<f;u++)p[u]=(i[u]-c)*(s[u]-l);return e.sum(p)/(f-1)},e.corrcoeff=function(i,s){return e.covariance(i,s)/e.stdev(i,1)/e.stdev(s,1)},e.spearmancoeff=function(i,s){return i=e.rank(i),s=e.rank(s),e.corrcoeff(i,s)},e.stanMoment=function(i,s){for(var u=e.mean(i),c=e.stdev(i),l=i.length,f=0,p=0;p<l;p++)f+=t.pow((i[p]-u)/c,s);return f/i.length},e.skewness=function(i){return e.stanMoment(i,3)},e.kurtosis=function(i){return e.stanMoment(i,4)-3};var o=e.prototype;(function(i){for(var s=0;s<i.length;s++)(function(u){o[u]=function(c,l){var f=[],p=0,v=this;if(n(c)&&(l=c,c=!1),l)return setTimeout(function(){l.call(v,o[u].call(v,c))}),this;if(this.length>1){for(v=c===!0?this:this.transpose();p<v.length;p++)f[p]=e[u](v[p]);return f}return e[u](this[0],c)}})(i[s])})("cumsum cumprod".split(" ")),function(i){for(var s=0;s<i.length;s++)(function(u){o[u]=function(c,l){var f=[],p=0,v=this;if(n(c)&&(l=c,c=!1),l)return setTimeout(function(){l.call(v,o[u].call(v,c))}),this;if(this.length>1){for(u!=="sumrow"&&(v=c===!0?this:this.transpose());p<v.length;p++)f[p]=e[u](v[p]);return c===!0?e[u](e.utils.toVector(f)):f}return e[u](this[0],c)}})(i[s])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(i){for(var s=0;s<i.length;s++)(function(u){o[u]=function(){var c,l=[],f=0,p=this,v=Array.prototype.slice.call(arguments);if(n(v[v.length-1])){c=v[v.length-1];var g=v.slice(0,v.length-1);return setTimeout(function(){c.call(p,o[u].apply(p,g))}),this}c=void 0;var h=function(m){return e[u].apply(p,[m].concat(v))};if(this.length>1){for(p=p.transpose();f<p.length;f++)l[f]=h(p[f]);return l}return h(this[0])}})(i[s])}("quantiles percentileOfScore".split(" "))}(j,Math),function(e,t){e.gammaln=function(n){var r,a,o,i=0,s=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015;for(o=(a=r=n)+5.5,o-=(r+.5)*t.log(o);i<6;i++)u+=s[i]/++a;return t.log(2.5066282746310007*u/r)-o},e.loggam=function(n){var r,a,o,i,s,u,c,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(r=n,c=0,n==1||n==2)return 0;for(n<=7&&(r=n+(c=t.floor(7-n))),a=1/(r*r),o=2*t.PI,s=l[9],u=8;u>=0;u--)s*=a,s+=l[u];if(i=s/r+.5*t.log(o)+(r-.5)*t.log(r)-r,n<=7)for(u=1;u<=c;u++)i-=t.log(r-1),r-=1;return i},e.gammafn=function(n){var r,a,o,i,s=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],u=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],c=!1,l=0,f=0,p=0,v=n;if(n>171.6243769536076)return 1/0;if(v<=0){if(!(i=v%1+36e-17))return 1/0;c=(1&v?-1:1)*t.PI/t.sin(t.PI*i),v=1-v}for(o=v,a=v<1?v++:(v-=l=(0|v)-1)-1,r=0;r<8;++r)p=(p+s[r])*a,f=f*a+u[r];if(i=p/f+1,o<v)i/=o;else if(o>v)for(r=0;r<l;++r)i*=v,v++;return c&&(i=c/i),i},e.gammap=function(n,r){return e.lowRegGamma(n,r)*e.gammafn(n)},e.lowRegGamma=function(n,r){var a,o=e.gammaln(n),i=n,s=1/n,u=s,c=r+1-n,l=1/1e-30,f=1/c,p=f,v=1,g=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;v<=g;v++)s+=u*=r/++i;return s*t.exp(-r+n*t.log(r)-o)}for(;v<=g;v++)p*=(f=1/(f=(a=-v*(v-n))*f+(c+=2)))*(l=c+a/l);return 1-p*t.exp(-r+n*t.log(r)-o)},e.factorialln=function(n){return n<0?NaN:e.gammaln(n+1)},e.factorial=function(n){return n<0?NaN:e.gammafn(n+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(n,r){return e.factorialln(n)-e.factorialln(r)-e.factorialln(n-r)},e.permutation=function(n,r){return e.factorial(n)/e.factorial(n-r)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(n,r){return e.gammaln(n)+e.gammaln(r)-e.gammaln(n+r)},e.betacf=function(n,r,a){var o,i,s,u,c=1e-30,l=1,f=r+a,p=r+1,v=r-1,g=1,h=1-f*n/p;for(t.abs(h)<c&&(h=c),u=h=1/h;l<=100&&(h=1+(i=l*(a-l)*n/((v+(o=2*l))*(r+o)))*h,t.abs(h)<c&&(h=c),g=1+i/g,t.abs(g)<c&&(g=c),u*=(h=1/h)*g,h=1+(i=-(r+l)*(f+l)*n/((r+o)*(p+o)))*h,t.abs(h)<c&&(h=c),g=1+i/g,t.abs(g)<c&&(g=c),u*=s=(h=1/h)*g,!(t.abs(s-1)<3e-7));l++);return u},e.gammapinv=function(n,r){var a,o,i,s,u,c,l=0,f=r-1,p=1e-8,v=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(u=t.log(f),c=t.exp(f*(u-1)-v),s=n<.5?n:1-n,a=(2.30753+.27061*(o=t.sqrt(-2*t.log(s))))/(1+o*(.99229+.04481*o))-o,n<.5&&(a=-a),a=t.max(.001,r*t.pow(1-1/(9*r)-a/(3*t.sqrt(r)),3))):a=n<(o=1-r*(.253+.12*r))?t.pow(n/o,1/r):1-t.log(1-(n-o)/(1-o));l<12;l++){if(a<=0)return 0;if((a-=o=(i=(e.lowRegGamma(r,a)-n)/(o=r>1?c*t.exp(-(a-f)+f*(t.log(a)-u)):t.exp(-a+f*t.log(a)-v)))/(1-.5*t.min(1,i*((r-1)/a-1))))<=0&&(a=.5*(a+o)),t.abs(o)<p*a)break}return a},e.erf=function(n){var r,a,o,i,s=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],u=s.length-1,c=!1,l=0,f=0;for(n<0&&(n=-n,c=!0),a=4*(r=2/(2+n))-2;u>0;u--)o=l,l=a*l-f+s[u],f=o;return i=r*t.exp(-n*n+.5*(s[0]+a*l)-f),c?i-1:1-i},e.erfc=function(n){return 1-e.erf(n)},e.erfcinv=function(n){var r,a,o,i,s=0;if(n>=2)return-100;if(n<=0)return 100;for(i=n<1?n:2-n,r=-.70711*((2.30753+.27061*(o=t.sqrt(-2*t.log(i/2))))/(1+o*(.99229+.04481*o))-o);s<2;s++)r+=(a=e.erfc(r)-i)/(1.1283791670955126*t.exp(-r*r)-r*a);return n<1?r:-r},e.ibetainv=function(n,r,a){var o,i,s,u,c,l,f,p,v,g,h=1e-8,m=r-1,w=a-1,y=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&a>=1?(s=n<.5?n:1-n,l=(2.30753+.27061*(u=t.sqrt(-2*t.log(s))))/(1+u*(.99229+.04481*u))-u,n<.5&&(l=-l),f=(l*l-3)/6,p=2/(1/(2*r-1)+1/(2*a-1)),v=l*t.sqrt(f+p)/p-(1/(2*a-1)-1/(2*r-1))*(f+5/6-2/(3*p)),l=r/(r+a*t.exp(2*v))):(o=t.log(r/(r+a)),i=t.log(a/(r+a)),l=n<(u=t.exp(r*o)/r)/(v=u+(c=t.exp(a*i)/a))?t.pow(r*v*n,1/r):1-t.pow(a*v*(1-n),1/a)),g=-e.gammaln(r)-e.gammaln(a)+e.gammaln(r+a);y<10;y++){if(l===0||l===1)return l;if((l-=u=(c=(e.ibeta(l,r,a)-n)/(u=t.exp(m*t.log(l)+w*t.log(1-l)+g)))/(1-.5*t.min(1,c*(m/l-w/(1-l)))))<=0&&(l=.5*(l+u)),l>=1&&(l=.5*(l+u+1)),t.abs(u)<h*l&&y>0)break}return l},e.ibeta=function(n,r,a){var o=n===0||n===1?0:t.exp(e.gammaln(r+a)-e.gammaln(r)-e.gammaln(a)+r*t.log(n)+a*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+a+2)?o*e.betacf(n,r,a)/r:1-o*e.betacf(1-n,a,r)/a)},e.randn=function(n,r){var a,o,i,s,u;if(r||(r=n),n)return e.create(n,r,function(){return e.randn()});do a=e._random_fn(),o=1.7156*(e._random_fn()-.5),u=(i=a-.449871)*i+(s=t.abs(o)+.386595)*(.196*s-.25472*i);while(u>.27597&&(u>.27846||o*o>-4*t.log(a)*a*a));return o/a},e.randg=function(n,r,a){var o,i,s,u,c,l,f=n;if(a||(a=r),n||(n=1),r)return(l=e.zeros(r,a)).alter(function(){return e.randg(n)}),l;n<1&&(n+=1),o=n-1/3,i=1/t.sqrt(9*o);do{do u=1+i*(c=e.randn());while(u<=0);u*=u*u,s=e._random_fn()}while(s>1-.331*t.pow(c,4)&&t.log(s)>.5*c*c+o*(1-u+t.log(u)));if(n==f)return o*u;do s=e._random_fn();while(s===0);return t.pow(s,1/f)*o*u},function(n){for(var r=0;r<n.length;r++)(function(a){e.fn[a]=function(){return e(e.map(this,function(o){return e[a](o)}))}})(n[r])}("gammaln gammafn factorial factorialln".split(" ")),function(n){for(var r=0;r<n.length;r++)(function(a){e.fn[a]=function(){return e(e[a].apply(null,arguments))}})(n[r])}("randn".split(" "))}(j,Math),function(e,t){function n(i,s,u,c){for(var l,f=0,p=1,v=1,g=1,h=0,m=0;t.abs((v-m)/v)>c;)m=v,p=g+(l=-(s+h)*(s+u+h)*i/(s+2*h)/(s+2*h+1))*p,v=(f=v+l*f)+(l=(h+=1)*(u-h)*i/(s+2*h-1)/(s+2*h))*v,f/=g=p+l*g,p/=g,v/=g,g=1;return v/s}function r(i){return i/t.abs(i)}function a(i,s,u){var c=12,l=6,f=-30,p=-50,v=60,g=8,h=3,m=2,w=3,y=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],k=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],E=.5*i;if(E>=g)return 1;var S,I=2*e.normal.cdf(E,0,1,1,0)-1;I=I>=t.exp(p/u)?t.pow(I,u):0;for(var V=E,D=(g-E)/(S=i>h?m:w),L=V+D,_=0,A=u-1,H=1;H<=S;H++){for(var te=0,ae=.5*(L+V),ve=.5*(L-V),pe=1;pe<=c;pe++){var B,le=ae+ve*(l<pe?y[(B=c-pe+1)-1]:-y[(B=pe)-1]),ge=le*le;if(ge>v)break;var Me=2*e.normal.cdf(le,0,1,1,0)*.5-2*e.normal.cdf(le,i,1,1,0)*.5;Me>=t.exp(f/A)&&(te+=Me=k[B-1]*t.exp(-.5*ge)*t.pow(Me,A))}_+=te*=2*ve*u/t.sqrt(2*t.PI),V=L,L+=D}return(I+=_)<=t.exp(f/s)?0:(I=t.pow(I,s))>=1?1:I}function o(i,s,u){var c=.322232421088,l=.099348462606,f=-1,p=.588581570495,v=-.342242088547,g=.531103462366,h=-.204231210125,m=.10353775285,w=-453642210148e-16,y=.0038560700634,k=.8832,E=.2368,S=1.214,I=1.208,V=1.4142,D=120,L=.5-.5*i,_=t.sqrt(t.log(1/(L*L))),A=_+((((_*w+h)*_+v)*_+f)*_+c)/((((_*y+m)*_+g)*_+p)*_+l);u<D&&(A+=(A*A*A+A)/u/4);var H=k-E*A;return u<D&&(H+=-S/u+I*A/u),A*(H*t.log(s-1)+V)}(function(i){for(var s=0;s<i.length;s++)(function(u){e[u]=function c(l,f,p){return this instanceof c?(this._a=l,this._b=f,this._c=p,this):new c(l,f,p)},e.fn[u]=function(c,l,f){var p=e[u](c,l,f);return p.data=this,p},e[u].prototype.sample=function(c){var l=this._a,f=this._b,p=this._c;return c?e.alter(c,function(){return e[u].sample(l,f,p)}):e[u].sample(l,f,p)},function(c){for(var l=0;l<c.length;l++)(function(f){e[u].prototype[f]=function(p){var v=this._a,g=this._b,h=this._c;return p||p===0||(p=this.data),typeof p!="number"?e.fn.map.call(p,function(m){return e[u][f](m,v,g,h)}):e[u][f](p,v,g,h)}})(c[l])}("pdf cdf inv".split(" ")),function(c){for(var l=0;l<c.length;l++)(function(f){e[u].prototype[f]=function(){return e[u][f](this._a,this._b,this._c)}})(c[l])}("mean median mode variance".split(" "))})(i[s])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(i,s,u){return i>1||i<0?0:s==1&&u==1?1:s<512&&u<512?t.pow(i,s-1)*t.pow(1-i,u-1)/e.betafn(s,u):t.exp((s-1)*t.log(i)+(u-1)*t.log(1-i)-e.betaln(s,u))},cdf:function(i,s,u){return i>1||i<0?1*(i>1):e.ibeta(i,s,u)},inv:function(i,s,u){return e.ibetainv(i,s,u)},mean:function(i,s){return i/(i+s)},median:function(i,s){return e.ibetainv(.5,i,s)},mode:function(i,s){return(i-1)/(i+s-2)},sample:function(i,s){var u=e.randg(i);return u/(u+e.randg(s))},variance:function(i,s){return i*s/(t.pow(i+s,2)*(i+s+1))}}),e.extend(e.centralF,{pdf:function(i,s,u){var c;return i<0?0:s<=2?i===0&&s<2?1/0:i===0&&s===2?1:1/e.betafn(s/2,u/2)*t.pow(s/u,s/2)*t.pow(i,s/2-1)*t.pow(1+s/u*i,-(s+u)/2):(c=s*i/(u+i*s),s*(u/(u+i*s))/2*e.binomial.pdf((s-2)/2,(s+u-2)/2,c))},cdf:function(i,s,u){return i<0?0:e.ibeta(s*i/(s*i+u),s/2,u/2)},inv:function(i,s,u){return u/(s*(1/e.ibetainv(i,s/2,u/2)-1))},mean:function(i,s){return s>2?s/(s-2):void 0},mode:function(i,s){return i>2?s*(i-2)/(i*(s+2)):void 0},sample:function(i,s){return 2*e.randg(i/2)/i/(2*e.randg(s/2)/s)},variance:function(i,s){if(!(s<=4))return 2*s*s*(i+s-2)/(i*(s-2)*(s-2)*(s-4))}}),e.extend(e.cauchy,{pdf:function(i,s,u){return u<0?0:u/(t.pow(i-s,2)+t.pow(u,2))/t.PI},cdf:function(i,s,u){return t.atan((i-s)/u)/t.PI+.5},inv:function(i,s,u){return s+u*t.tan(t.PI*(i-.5))},median:function(i){return i},mode:function(i){return i},sample:function(i,s){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*s+i}}),e.extend(e.chisquare,{pdf:function(i,s){return i<0?0:i===0&&s===2?.5:t.exp((s/2-1)*t.log(i)-i/2-s/2*t.log(2)-e.gammaln(s/2))},cdf:function(i,s){return i<0?0:e.lowRegGamma(s/2,i/2)},inv:function(i,s){return 2*e.gammapinv(i,.5*s)},mean:function(i){return i},median:function(i){return i*t.pow(1-2/(9*i),3)},mode:function(i){return i-2>0?i-2:0},sample:function(i){return 2*e.randg(i/2)},variance:function(i){return 2*i}}),e.extend(e.exponential,{pdf:function(i,s){return i<0?0:s*t.exp(-s*i)},cdf:function(i,s){return i<0?0:1-t.exp(-s*i)},inv:function(i,s){return-t.log(1-i)/s},mean:function(i){return 1/i},median:function(i){return 1/i*t.log(2)},mode:function(){return 0},sample:function(i){return-1/i*t.log(e._random_fn())},variance:function(i){return t.pow(i,-2)}}),e.extend(e.gamma,{pdf:function(i,s,u){return i<0?0:i===0&&s===1?1/u:t.exp((s-1)*t.log(i)-i/u-e.gammaln(s)-s*t.log(u))},cdf:function(i,s,u){return i<0?0:e.lowRegGamma(s,i/u)},inv:function(i,s,u){return e.gammapinv(i,s)*u},mean:function(i,s){return i*s},mode:function(i,s){if(i>1)return(i-1)*s},sample:function(i,s){return e.randg(i)*s},variance:function(i,s){return i*s*s}}),e.extend(e.invgamma,{pdf:function(i,s,u){return i<=0?0:t.exp(-(s+1)*t.log(i)-u/i-e.gammaln(s)+s*t.log(u))},cdf:function(i,s,u){return i<=0?0:1-e.lowRegGamma(s,u/i)},inv:function(i,s,u){return u/e.gammapinv(1-i,s)},mean:function(i,s){return i>1?s/(i-1):void 0},mode:function(i,s){return s/(i+1)},sample:function(i,s){return s/e.randg(i)},variance:function(i,s){if(!(i<=2))return s*s/((i-1)*(i-1)*(i-2))}}),e.extend(e.kumaraswamy,{pdf:function(i,s,u){return i===0&&s===1?u:i===1&&u===1?s:t.exp(t.log(s)+t.log(u)+(s-1)*t.log(i)+(u-1)*t.log(1-t.pow(i,s)))},cdf:function(i,s,u){return i<0?0:i>1?1:1-t.pow(1-t.pow(i,s),u)},inv:function(i,s,u){return t.pow(1-t.pow(1-i,1/u),1/s)},mean:function(i,s){return s*e.gammafn(1+1/i)*e.gammafn(s)/e.gammafn(1+1/i+s)},median:function(i,s){return t.pow(1-t.pow(2,-1/s),1/i)},mode:function(i,s){if(i>=1&&s>=1&&i!==1&&s!==1)return t.pow((i-1)/(i*s-1),1/i)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(i,s,u){return i<=0?0:t.exp(-t.log(i)-.5*t.log(2*t.PI)-t.log(u)-t.pow(t.log(i)-s,2)/(2*u*u))},cdf:function(i,s,u){return i<0?0:.5+.5*e.erf((t.log(i)-s)/t.sqrt(2*u*u))},inv:function(i,s,u){return t.exp(-1.4142135623730951*u*e.erfcinv(2*i)+s)},mean:function(i,s){return t.exp(i+s*s/2)},median:function(i){return t.exp(i)},mode:function(i,s){return t.exp(i-s*s)},sample:function(i,s){return t.exp(e.randn()*s+i)},variance:function(i,s){return(t.exp(s*s)-1)*t.exp(2*i+s*s)}}),e.extend(e.noncentralt,{pdf:function(i,s,u){var c=1e-14;return t.abs(u)<c?e.studentt.pdf(i,s):t.abs(i)<c?t.exp(e.gammaln((s+1)/2)-u*u/2-.5*t.log(t.PI*s)-e.gammaln(s/2)):s/i*(e.noncentralt.cdf(i*t.sqrt(1+2/s),s+2,u)-e.noncentralt.cdf(i,s,u))},cdf:function(i,s,u){var c=1e-14,l=200;if(t.abs(u)<c)return e.studentt.cdf(i,s);var f=!1;i<0&&(f=!0,u=-u);for(var p=e.normal.cdf(-u,0,1),v=c+1,g=v,h=i*i/(i*i+s),m=0,w=t.exp(-u*u/2),y=t.exp(-u*u/2-.5*t.log(2)-e.gammaln(1.5))*u;m<l||g>c||v>c;)g=v,m>0&&(w*=u*u/(2*m),y*=u*u/(2*(m+.5))),p+=.5*(v=w*e.beta.cdf(h,m+.5,s/2)+y*e.beta.cdf(h,m+1,s/2)),m++;return f?1-p:p}}),e.extend(e.normal,{pdf:function(i,s,u){return t.exp(-.5*t.log(2*t.PI)-t.log(u)-t.pow(i-s,2)/(2*u*u))},cdf:function(i,s,u){return .5*(1+e.erf((i-s)/t.sqrt(2*u*u)))},inv:function(i,s,u){return-1.4142135623730951*u*e.erfcinv(2*i)+s},mean:function(i){return i},median:function(i){return i},mode:function(i){return i},sample:function(i,s){return e.randn()*s+i},variance:function(i,s){return s*s}}),e.extend(e.pareto,{pdf:function(i,s,u){return i<s?0:u*t.pow(s,u)/t.pow(i,u+1)},cdf:function(i,s,u){return i<s?0:1-t.pow(s/i,u)},inv:function(i,s,u){return s/t.pow(1-i,1/u)},mean:function(i,s){if(!(s<=1))return s*t.pow(i,s)/(s-1)},median:function(i,s){return i*(s*t.SQRT2)},mode:function(i){return i},variance:function(i,s){if(!(s<=2))return i*i*s/(t.pow(s-1,2)*(s-2))}}),e.extend(e.studentt,{pdf:function(i,s){return s=s>1e100?1e100:s,1/(t.sqrt(s)*e.betafn(.5,s/2))*t.pow(1+i*i/s,-(s+1)/2)},cdf:function(i,s){var u=s/2;return e.ibeta((i+t.sqrt(i*i+s))/(2*t.sqrt(i*i+s)),u,u)},inv:function(i,s){var u=e.ibetainv(2*t.min(i,1-i),.5*s,.5);return u=t.sqrt(s*(1-u)/u),i>.5?u:-u},mean:function(i){return i>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(i){return e.randn()*t.sqrt(i/(2*e.randg(i/2)))},variance:function(i){return i>2?i/(i-2):i>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(i,s,u){return i<0||s<0||u<0?0:u/s*t.pow(i/s,u-1)*t.exp(-t.pow(i/s,u))},cdf:function(i,s,u){return i<0?0:1-t.exp(-t.pow(i/s,u))},inv:function(i,s,u){return s*t.pow(-t.log(1-i),1/u)},mean:function(i,s){return i*e.gammafn(1+1/s)},median:function(i,s){return i*t.pow(t.log(2),1/s)},mode:function(i,s){return s<=1?0:i*t.pow((s-1)/s,1/s)},sample:function(i,s){return i*t.pow(-t.log(e._random_fn()),1/s)},variance:function(i,s){return i*i*e.gammafn(1+2/s)-t.pow(e.weibull.mean(i,s),2)}}),e.extend(e.uniform,{pdf:function(i,s,u){return i<s||i>u?0:1/(u-s)},cdf:function(i,s,u){return i<s?0:i<u?(i-s)/(u-s):1},inv:function(i,s,u){return s+i*(u-s)},mean:function(i,s){return .5*(i+s)},median:function(i,s){return e.mean(i,s)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(i,s){return i/2+s/2+(s/2-i/2)*(2*e._random_fn()-1)},variance:function(i,s){return t.pow(s-i,2)/12}}),e.extend(e.binomial,{pdf:function(i,s,u){return u===0||u===1?s*u===i?1:0:e.combination(s,i)*t.pow(u,i)*t.pow(1-u,s-i)},cdf:function(i,s,u){var c,l=1e-10;if(i<0)return 0;if(i>=s)return 1;if(u<0||u>1||s<=0)return NaN;var f=u,p=(i=t.floor(i))+1,v=s-i,g=p+v,h=t.exp(e.gammaln(g)-e.gammaln(v)-e.gammaln(p)+p*t.log(f)+v*t.log(1-f));return c=f<(p+1)/(g+2)?h*n(f,p,v,l):1-h*n(1-f,v,p,l),t.round(1/l*(1-c))/(1/l)}}),e.extend(e.negbin,{pdf:function(i,s,u){return i===i>>>0&&(i<0?0:e.combination(i+s-1,s-1)*t.pow(1-u,i)*t.pow(u,s))},cdf:function(i,s,u){var c=0,l=0;if(i<0)return 0;for(;l<=i;l++)c+=e.negbin.pdf(l,s,u);return c}}),e.extend(e.hypgeom,{pdf:function(i,s,u,c){if(i!=i|0)return!1;if(i<0||i<u-(s-c)||i>c||i>u)return 0;if(2*u>s)return 2*c>s?e.hypgeom.pdf(s-u-c+i,s,s-u,s-c):e.hypgeom.pdf(c-i,s,s-u,c);if(2*c>s)return e.hypgeom.pdf(u-i,s,u,s-c);if(u<c)return e.hypgeom.pdf(i,s,c,u);for(var l=1,f=0,p=0;p<i;p++){for(;l>1&&f<c;)l*=1-u/(s-f),f++;l*=(c-p)*(u-p)/((p+1)*(s-u-c+p+1))}for(;f<c;f++)l*=1-u/(s-f);return t.min(1,t.max(0,l))},cdf:function(i,s,u,c){if(i<0||i<u-(s-c))return 0;if(i>=c||i>=u)return 1;if(2*u>s)return 2*c>s?e.hypgeom.cdf(s-u-c+i,s,s-u,s-c):1-e.hypgeom.cdf(c-i-1,s,s-u,c);if(2*c>s)return 1-e.hypgeom.cdf(u-i-1,s,u,s-c);if(u<c)return e.hypgeom.cdf(i,s,c,u);for(var l=1,f=1,p=0,v=0;v<i;v++){for(;l>1&&p<c;){var g=1-u/(s-p);f*=g,l*=g,p++}l+=f*=(c-v)*(u-v)/((v+1)*(s-u-c+v+1))}for(;p<c;p++)l*=1-u/(s-p);return t.min(1,t.max(0,l))}}),e.extend(e.poisson,{pdf:function(i,s){return s<0||i%1!=0||i<0?0:t.pow(s,i)*t.exp(-s)/e.factorial(i)},cdf:function(i,s){var u=[],c=0;if(i<0)return 0;for(;c<=i;c++)u.push(e.poisson.pdf(c,s));return e.sum(u)},mean:function(i){return i},variance:function(i){return i},sampleSmall:function(i){var s=1,u=0,c=t.exp(-i);do u++,s*=e._random_fn();while(s>c);return u-1},sampleLarge:function(i){var s,u,c,l,f,p,v,g,h,m,w=i;for(l=t.sqrt(w),f=t.log(w),p=.02483*(v=.931+2.53*l)-.059,g=1.1239+1.1328/(v-3.4),h=.9277-3.6224/(v-2);;)if(u=t.random()-.5,c=t.random(),m=.5-t.abs(u),s=t.floor((2*p/m+v)*u+w+.43),m>=.07&&c<=h||!(s<0||m<.013&&c>m)&&t.log(c)+t.log(g)-t.log(p/(m*m)+v)<=s*f-w-e.loggam(s+1))return s},sample:function(i){return i<10?this.sampleSmall(i):this.sampleLarge(i)}}),e.extend(e.triangular,{pdf:function(i,s,u,c){return u<=s||c<s||c>u?NaN:i<s||i>u?0:i<c?2*(i-s)/((u-s)*(c-s)):i===c?2/(u-s):2*(u-i)/((u-s)*(u-c))},cdf:function(i,s,u,c){return u<=s||c<s||c>u?NaN:i<=s?0:i>=u?1:i<=c?t.pow(i-s,2)/((u-s)*(c-s)):1-t.pow(u-i,2)/((u-s)*(u-c))},inv:function(i,s,u,c){return u<=s||c<s||c>u?NaN:i<=(c-s)/(u-s)?s+(u-s)*t.sqrt(i*((c-s)/(u-s))):s+(u-s)*(1-t.sqrt((1-i)*(1-(c-s)/(u-s))))},mean:function(i,s,u){return(i+s+u)/3},median:function(i,s,u){return u<=(i+s)/2?s-t.sqrt((s-i)*(s-u))/t.sqrt(2):u>(i+s)/2?i+t.sqrt((s-i)*(u-i))/t.sqrt(2):void 0},mode:function(i,s,u){return u},sample:function(i,s,u){var c=e._random_fn();return c<(u-i)/(s-i)?i+t.sqrt(c*(s-i)*(u-i)):s-t.sqrt((1-c)*(s-i)*(s-u))},variance:function(i,s,u){return(i*i+s*s+u*u-i*s-i*u-s*u)/18}}),e.extend(e.arcsine,{pdf:function(i,s,u){return u<=s?NaN:i<=s||i>=u?0:2/t.PI*t.pow(t.pow(u-s,2)-t.pow(2*i-s-u,2),-.5)},cdf:function(i,s,u){return i<s?0:i<u?2/t.PI*t.asin(t.sqrt((i-s)/(u-s))):1},inv:function(i,s,u){return s+(.5-.5*t.cos(t.PI*i))*(u-s)},mean:function(i,s){return s<=i?NaN:(i+s)/2},median:function(i,s){return s<=i?NaN:(i+s)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(i,s){return(i+s)/2+(s-i)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(i,s){return s<=i?NaN:t.pow(s-i,2)/8}}),e.extend(e.laplace,{pdf:function(i,s,u){return u<=0?0:t.exp(-t.abs(i-s)/u)/(2*u)},cdf:function(i,s,u){return u<=0?0:i<s?.5*t.exp((i-s)/u):1-.5*t.exp(-(i-s)/u)},mean:function(i){return i},median:function(i){return i},mode:function(i){return i},variance:function(i,s){return 2*s*s},sample:function(i,s){var u=e._random_fn()-.5;return i-s*r(u)*t.log(1-2*t.abs(u))}}),e.extend(e.tukey,{cdf:function(i,s,u){var c=1,l=s,f=16,p=8,v=-30,g=1e-14,h=100,m=800,w=5e3,y=25e3,k=1,E=.5,S=.25,I=.125,V=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],D=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(i<=0)return 0;if(u<2||c<1||l<2)return NaN;if(!Number.isFinite(i))return 1;if(u>y)return a(i,c,l);var L,_=.5*u,A=_*t.log(u)-u*t.log(2)-e.gammaln(_),H=_-1,te=.25*u;L=u<=h?k:u<=m?E:u<=w?S:I,A+=t.log(L);for(var ae=0,ve=1;ve<=50;ve++){for(var pe=0,B=(2*ve-1)*L,le=1;le<=f;le++){var ge,Me;p<le?(ge=le-p-1,Me=A+H*t.log(B+V[ge]*L)-(V[ge]*L+B)*te):(ge=le-1,Me=A+H*t.log(B-V[ge]*L)+(V[ge]*L-B)*te),Me>=v&&(pe+=a(p<le?i*t.sqrt(.5*(V[ge]*L+B)):i*t.sqrt(.5*(-V[ge]*L+B)),c,l)*D[ge]*t.exp(Me))}if(ve*L>=1&&pe<=g)break;ae+=pe}if(pe>g)throw new Error("tukey.cdf failed to converge");return ae>1&&(ae=1),ae},inv:function(i,s,u){var c=1e-4,l=50;if(u<2||s<2)return NaN;if(i<0||i>1)return NaN;if(i===0)return 0;if(i===1)return 1/0;var f,p=o(i,s,u),v=e.tukey.cdf(p,s,u)-i;f=v>0?t.max(0,p-1):p+1;for(var g,h=e.tukey.cdf(f,s,u)-i,m=1;m<l;m++)if(g=f-h*(f-p)/(h-v),v=h,p=f,g<0&&(g=0,h=-i),h=e.tukey.cdf(g,s,u)-i,f=g,t.abs(f-p)<c)return g;throw new Error("tukey.inv failed to converge")}})}(j,Math),function(e,t){var n=Array.prototype.push,r=e.utils.isArray;function a(o){return r(o)||o instanceof e}e.extend({add:function(o,i){return a(i)?(a(i[0])||(i=[i]),e.map(o,function(s,u,c){return s+i[u][c]})):e.map(o,function(s){return s+i})},subtract:function(o,i){return a(i)?(a(i[0])||(i=[i]),e.map(o,function(s,u,c){return s-i[u][c]||0})):e.map(o,function(s){return s-i})},divide:function(o,i){return a(i)?(a(i[0])||(i=[i]),e.multiply(o,e.inv(i))):e.map(o,function(s){return s/i})},multiply:function(o,i){var s,u,c,l,f,p,v,g;if(o.length===void 0&&i.length===void 0)return o*i;if(f=o.length,p=o[0].length,v=e.zeros(f,c=a(i)?i[0].length:p),g=0,a(i)){for(;g<c;g++)for(s=0;s<f;s++){for(l=0,u=0;u<p;u++)l+=o[s][u]*i[u][g];v[s][g]=l}return f===1&&g===1?v[0][0]:v}return e.map(o,function(h){return h*i})},outer:function(o,i){return e.multiply(o.map(function(s){return[s]}),[i])},dot:function(o,i){a(o[0])||(o=[o]),a(i[0])||(i=[i]);for(var s,u,c=o[0].length===1&&o.length!==1?e.transpose(o):o,l=i[0].length===1&&i.length!==1?e.transpose(i):i,f=[],p=0,v=c.length,g=c[0].length;p<v;p++){for(f[p]=[],s=0,u=0;u<g;u++)s+=c[p][u]*l[p][u];f[p]=s}return f.length===1?f[0]:f},pow:function(o,i){return e.map(o,function(s){return t.pow(s,i)})},exp:function(o){return e.map(o,function(i){return t.exp(i)})},log:function(o){return e.map(o,function(i){return t.log(i)})},abs:function(o){return e.map(o,function(i){return t.abs(i)})},norm:function(o,i){var s=0,u=0;for(isNaN(i)&&(i=2),a(o[0])&&(o=o[0]);u<o.length;u++)s+=t.pow(t.abs(o[u]),i);return t.pow(s,1/i)},angle:function(o,i){return t.acos(e.dot(o,i)/(e.norm(o)*e.norm(i)))},aug:function(o,i){var s,u=[];for(s=0;s<o.length;s++)u.push(o[s].slice());for(s=0;s<u.length;s++)n.apply(u[s],i[s]);return u},inv:function(o){for(var i,s=o.length,u=o[0].length,c=e.identity(s,u),l=e.gauss_jordan(o,c),f=[],p=0;p<s;p++)for(f[p]=[],i=u;i<l[0].length;i++)f[p][i-u]=l[p][i];return f},det:function o(i){if(i.length===2)return i[0][0]*i[1][1]-i[0][1]*i[1][0];for(var s=0,u=0;u<i.length;u++){for(var c=[],l=1;l<i.length;l++){c[l-1]=[];for(var f=0;f<i.length;f++)f<u?c[l-1][f]=i[l][f]:f>u&&(c[l-1][f-1]=i[l][f])}var p=u%2?-1:1;s+=o(c)*i[0][u]*p}return s},gauss_elimination:function(o,i){var s,u,c,l,f=0,p=0,v=o.length,g=o[0].length,h=1,m=0,w=[];for(s=(o=e.aug(o,i))[0].length,f=0;f<v;f++){for(u=o[f][f],p=f,l=f+1;l<g;l++)u<t.abs(o[l][f])&&(u=o[l][f],p=l);if(p!=f)for(l=0;l<s;l++)c=o[f][l],o[f][l]=o[p][l],o[p][l]=c;for(p=f+1;p<v;p++)for(h=o[p][f]/o[f][f],l=f;l<s;l++)o[p][l]=o[p][l]-h*o[f][l]}for(f=v-1;f>=0;f--){for(m=0,p=f+1;p<=v-1;p++)m+=w[p]*o[f][p];w[f]=(o[f][s-1]-m)/o[f][f]}return w},gauss_jordan:function(o,i){var s,u,c,l=e.aug(o,i),f=l.length,p=l[0].length,v=0;for(u=0;u<f;u++){var g=u;for(c=u+1;c<f;c++)t.abs(l[c][u])>t.abs(l[g][u])&&(g=c);var h=l[u];for(l[u]=l[g],l[g]=h,c=u+1;c<f;c++)for(v=l[c][u]/l[u][u],s=u;s<p;s++)l[c][s]-=l[u][s]*v}for(u=f-1;u>=0;u--){for(v=l[u][u],c=0;c<u;c++)for(s=p-1;s>u-1;s--)l[c][s]-=l[u][s]*l[c][u]/v;for(l[u][u]/=v,s=f;s<p;s++)l[u][s]/=v}return l},triaUpSolve:function(o,i){var s,u=o[0].length,c=e.zeros(1,u)[0],l=!1;return i[0].length!=null&&(i=i.map(function(f){return f[0]}),l=!0),e.arange(u-1,-1,-1).forEach(function(f){s=e.arange(f+1,u).map(function(p){return c[p]*o[f][p]}),c[f]=(i[f]-e.sum(s))/o[f][f]}),l?c.map(function(f){return[f]}):c},triaLowSolve:function(o,i){var s,u=o[0].length,c=e.zeros(1,u)[0],l=!1;return i[0].length!=null&&(i=i.map(function(f){return f[0]}),l=!0),e.arange(u).forEach(function(f){s=e.arange(f).map(function(p){return o[f][p]*c[p]}),c[f]=(i[f]-e.sum(s))/o[f][f]}),l?c.map(function(f){return[f]}):c},lu:function(o){var i,s=o.length,u=e.identity(s),c=e.zeros(o.length,o[0].length);return e.arange(s).forEach(function(l){c[0][l]=o[0][l]}),e.arange(1,s).forEach(function(l){e.arange(l).forEach(function(f){i=e.arange(f).map(function(p){return u[l][p]*c[p][f]}),u[l][f]=(o[l][f]-e.sum(i))/c[f][f]}),e.arange(l,s).forEach(function(f){i=e.arange(l).map(function(p){return u[l][p]*c[p][f]}),c[l][f]=o[i.length][f]-e.sum(i)})}),[u,c]},cholesky:function(o){var i,s=o.length,u=e.zeros(o.length,o[0].length);return e.arange(s).forEach(function(c){i=e.arange(c).map(function(l){return t.pow(u[c][l],2)}),u[c][c]=t.sqrt(o[c][c]-e.sum(i)),e.arange(c+1,s).forEach(function(l){i=e.arange(c).map(function(f){return u[c][f]*u[l][f]}),u[l][c]=(o[c][l]-e.sum(i))/u[c][c]})}),u},gauss_jacobi:function(o,i,s,u){for(var c,l,f,p,v=0,g=0,h=o.length,m=[],w=[],y=[];v<h;v++)for(m[v]=[],w[v]=[],y[v]=[],g=0;g<h;g++)v>g?(m[v][g]=o[v][g],w[v][g]=y[v][g]=0):v<g?(w[v][g]=o[v][g],m[v][g]=y[v][g]=0):(y[v][g]=o[v][g],m[v][g]=w[v][g]=0);for(f=e.multiply(e.multiply(e.inv(y),e.add(m,w)),-1),l=e.multiply(e.inv(y),i),c=s,p=e.add(e.multiply(f,s),l),v=2;t.abs(e.norm(e.subtract(p,c)))>u;)c=p,p=e.add(e.multiply(f,c),l),v++;return p},gauss_seidel:function(o,i,s,u){for(var c,l,f,p,v,g=0,h=o.length,m=[],w=[],y=[];g<h;g++)for(m[g]=[],w[g]=[],y[g]=[],c=0;c<h;c++)g>c?(m[g][c]=o[g][c],w[g][c]=y[g][c]=0):g<c?(w[g][c]=o[g][c],m[g][c]=y[g][c]=0):(y[g][c]=o[g][c],m[g][c]=w[g][c]=0);for(p=e.multiply(e.multiply(e.inv(e.add(y,m)),w),-1),f=e.multiply(e.inv(e.add(y,m)),i),l=s,v=e.add(e.multiply(p,s),f),g=2;t.abs(e.norm(e.subtract(v,l)))>u;)l=v,v=e.add(e.multiply(p,l),f),g+=1;return v},SOR:function(o,i,s,u,c){for(var l,f,p,v,g,h=0,m=o.length,w=[],y=[],k=[];h<m;h++)for(w[h]=[],y[h]=[],k[h]=[],l=0;l<m;l++)h>l?(w[h][l]=o[h][l],y[h][l]=k[h][l]=0):h<l?(y[h][l]=o[h][l],w[h][l]=k[h][l]=0):(k[h][l]=o[h][l],w[h][l]=y[h][l]=0);for(v=e.multiply(e.inv(e.add(k,e.multiply(w,c))),e.subtract(e.multiply(k,1-c),e.multiply(y,c))),p=e.multiply(e.multiply(e.inv(e.add(k,e.multiply(w,c))),i),c),f=s,g=e.add(e.multiply(v,s),p),h=2;t.abs(e.norm(e.subtract(g,f)))>u;)f=g,g=e.add(e.multiply(v,f),p),h++;return g},householder:function(o){for(var i,s,u,c,l=o.length,f=o[0].length,p=0,v=[],g=[];p<l-1;p++){for(i=0,c=p+1;c<f;c++)i+=o[c][p]*o[c][p];for(i=(o[p+1][p]>0?-1:1)*t.sqrt(i),s=t.sqrt((i*i-o[p+1][p]*i)/2),(v=e.zeros(l,1))[p+1][0]=(o[p+1][p]-i)/(2*s),u=p+2;u<l;u++)v[u][0]=o[u][p]/(2*s);g=e.subtract(e.identity(l,f),e.multiply(e.multiply(v,e.transpose(v)),2)),o=e.multiply(g,e.multiply(o,g))}return o},QR:function(){var o=e.sum,i=e.arange;function s(u){var c,l,f,p=u.length,v=u[0].length,g=e.zeros(v,v);for(u=e.copy(u),l=0;l<v;l++){for(g[l][l]=t.sqrt(o(i(p).map(function(h){return u[h][l]*u[h][l]}))),c=0;c<p;c++)u[c][l]=u[c][l]/g[l][l];for(f=l+1;f<v;f++)for(g[l][f]=o(i(p).map(function(h){return u[h][l]*u[h][f]})),c=0;c<p;c++)u[c][f]=u[c][f]-u[c][l]*g[l][f]}return[u,g]}return s}(),lstsq:function(){function o(s){var u=(s=e.copy(s)).length,c=e.identity(u);return e.arange(u-1,-1,-1).forEach(function(l){e.sliceAssign(c,{row:l},e.divide(e.slice(c,{row:l}),s[l][l])),e.sliceAssign(s,{row:l},e.divide(e.slice(s,{row:l}),s[l][l])),e.arange(l).forEach(function(f){var p=e.multiply(s[f][l],-1),v=e.slice(s,{row:f}),g=e.multiply(e.slice(s,{row:l}),p);e.sliceAssign(s,{row:f},e.add(v,g));var h=e.slice(c,{row:f}),m=e.multiply(e.slice(c,{row:l}),p);e.sliceAssign(c,{row:f},e.add(h,m))})}),c}function i(s,u){var c=!1;u[0].length===void 0&&(u=u.map(function(y){return[y]}),c=!0);var l=e.QR(s),f=l[0],p=l[1],v=s[0].length,g=e.slice(f,{col:{end:v}}),h=o(e.slice(p,{row:{end:v}})),m=e.transpose(g);m[0].length===void 0&&(m=[m]);var w=e.multiply(e.multiply(h,m),u);return w.length===void 0&&(w=[[w]]),c?w.map(function(y){return y[0]}):w}return i}(),jacobi:function(o){for(var i,s,u,c,l,f,p,v=1,g=o.length,h=e.identity(g,g),m=[];v===1;){for(l=o[0][1],u=0,c=1,i=0;i<g;i++)for(s=0;s<g;s++)i!=s&&l<t.abs(o[i][s])&&(l=t.abs(o[i][s]),u=i,c=s);for(f=o[u][u]===o[c][c]?o[u][c]>0?t.PI/4:-t.PI/4:t.atan(2*o[u][c]/(o[u][u]-o[c][c]))/2,(p=e.identity(g,g))[u][u]=t.cos(f),p[u][c]=-t.sin(f),p[c][u]=t.sin(f),p[c][c]=t.cos(f),h=e.multiply(h,p),o=e.multiply(e.multiply(e.inv(p),o),p),v=0,i=1;i<g;i++)for(s=1;s<g;s++)i!=s&&t.abs(o[i][s])>.001&&(v=1)}for(i=0;i<g;i++)m.push(o[i][i]);return[h,m]},rungekutta:function(o,i,s,u,c,l){var f,p,v;if(l===2)for(;u<=s;)c+=((f=i*o(u,c))+(p=i*o(u+i,c+f)))/2,u+=i;if(l===4)for(;u<=s;)c+=((f=i*o(u,c))+2*(p=i*o(u+i/2,c+f/2))+2*(v=i*o(u+i/2,c+p/2))+i*o(u+i,c+v))/6,u+=i;return c},romberg:function(o,i,s,u){for(var c,l,f,p,v,g=0,h=(s-i)/2,m=[],w=[],y=[];g<u/2;){for(v=o(i),f=i,p=0;f<=s;f+=h,p++)m[p]=f;for(c=m.length,f=1;f<c-1;f++)v+=(f%2!=0?4:2)*o(m[f]);v=h/3*(v+o(s)),y[g]=v,h/=2,g++}for(l=y.length,c=1;l!==1;){for(f=0;f<l-1;f++)w[f]=(t.pow(4,c)*y[f+1]-y[f])/(t.pow(4,c)-1);l=w.length,y=w,w=[],c++}return y},richardson:function(o,i,s,u){function c(k,E){for(var S,I=0,V=k.length;I<V;I++)k[I]===E&&(S=I);return S}for(var l,f,p,v,g,h=t.abs(s-o[c(o,s)+1]),m=0,w=[],y=[];u>=h;)l=c(o,s+u),f=c(o,s),w[m]=(i[l]-2*i[f]+i[2*f-l])/(u*u),u/=2,m++;for(v=w.length,p=1;v!=1;){for(g=0;g<v-1;g++)y[g]=(t.pow(4,p)*w[g+1]-w[g])/(t.pow(4,p)-1);v=y.length,w=y,y=[],p++}return w},simpson:function(o,i,s,u){for(var c,l=(s-i)/u,f=o(i),p=[],v=i,g=0,h=1;v<=s;v+=l,g++)p[g]=v;for(c=p.length;h<c-1;h++)f+=(h%2!=0?4:2)*o(p[h]);return l/3*(f+o(s))},hermite:function(o,i,s,u){for(var c,l=o.length,f=0,p=0,v=[],g=[],h=[],m=[];p<l;p++){for(v[p]=1,c=0;c<l;c++)p!=c&&(v[p]*=(u-o[c])/(o[p]-o[c]));for(g[p]=0,c=0;c<l;c++)p!=c&&(g[p]+=1/(o[p]-o[c]));h[p]=(1-2*(u-o[p])*g[p])*(v[p]*v[p]),m[p]=(u-o[p])*(v[p]*v[p]),f+=h[p]*i[p]+m[p]*s[p]}return f},lagrange:function(o,i,s){for(var u,c,l=0,f=0,p=o.length;f<p;f++){for(c=i[f],u=0;u<p;u++)f!=u&&(c*=(s-o[u])/(o[f]-o[u]));l+=c}return l},cubic_spline:function(o,i,s){for(var u,c=o.length,l=0,f=[],p=[],v=[],g=[],h=[],m=[],w=[];l<c-1;l++)h[l]=o[l+1]-o[l];for(v[0]=0,l=1;l<c-1;l++)v[l]=3/h[l]*(i[l+1]-i[l])-3/h[l-1]*(i[l]-i[l-1]);for(l=1;l<c-1;l++)f[l]=[],p[l]=[],f[l][l-1]=h[l-1],f[l][l]=2*(h[l-1]+h[l]),f[l][l+1]=h[l],p[l][0]=v[l];for(g=e.multiply(e.inv(f),p),u=0;u<c-1;u++)m[u]=(i[u+1]-i[u])/h[u]-h[u]*(g[u+1][0]+2*g[u][0])/3,w[u]=(g[u+1][0]-g[u][0])/(3*h[u]);for(u=0;u<c&&!(o[u]>s);u++);return i[u-=1]+(s-o[u])*m[u]+e.sq(s-o[u])*g[u]+(s-o[u])*e.sq(s-o[u])*w[u]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(o){var i,s,u=o.length,c=o[0].length,l=0,f=[],p=[],v=[],g=[],h=[],m=[],w=[],y=[],k=[],E=[];for(l=0;l<u;l++)f[l]=e.sum(o[l])/c;for(l=0;l<c;l++)for(w[l]=[],i=0;i<u;i++)w[l][i]=o[i][l]-f[i];for(w=e.transpose(w),l=0;l<u;l++)for(y[l]=[],i=0;i<u;i++)y[l][i]=e.dot([w[l]],[w[i]])/(c-1);for(k=(v=e.jacobi(y))[0],p=v[1],E=e.transpose(k),l=0;l<p.length;l++)for(i=l;i<p.length;i++)p[l]<p[i]&&(s=p[l],p[l]=p[i],p[i]=s,g=E[l],E[l]=E[i],E[i]=g);for(m=e.transpose(w),l=0;l<u;l++)for(h[l]=[],i=0;i<m.length;i++)h[l][i]=e.dot([E[l]],[m[i]]);return[o,p,E,h]}}),function(o){for(var i=0;i<o.length;i++)(function(s){e.fn[s]=function(u,c){var l=this;return c?(setTimeout(function(){c.call(l,e.fn[s].call(l,u))},15),this):typeof e[s](this,u)=="number"?e[s](this,u):e(e[s](this,u))}})(o[i])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(j,Math),function(e,t){var n=[].slice,r=e.utils.isNumber,a=e.utils.isArray;function o(i,s,u,c){if(i>1||u>1||i<=0||u<=0)throw new Error("Proportions should be greater than 0 and less than 1");var l=(i*s+u*c)/(s+c);return(i-u)/t.sqrt(l*(1-l)*(1/s+1/c))}e.extend({zscore:function(){var i=n.call(arguments);return r(i[1])?(i[0]-i[1])/i[2]:(i[0]-e.mean(i[1]))/e.stdev(i[1],i[2])},ztest:function(){var i,s=n.call(arguments);return a(s[1])?(i=e.zscore(s[0],s[1],s[3]),s[2]===1?e.normal.cdf(-t.abs(i),0,1):2*e.normal.cdf(-t.abs(i),0,1)):s.length>2?(i=e.zscore(s[0],s[1],s[2]),s[3]===1?e.normal.cdf(-t.abs(i),0,1):2*e.normal.cdf(-t.abs(i),0,1)):(i=s[0],s[1]===1?e.normal.cdf(-t.abs(i),0,1):2*e.normal.cdf(-t.abs(i),0,1))}}),e.extend(e.fn,{zscore:function(i,s){return(i-this.mean())/this.stdev(s)},ztest:function(i,s,u){var c=t.abs(this.zscore(i,u));return s===1?e.normal.cdf(-c,0,1):2*e.normal.cdf(-c,0,1)}}),e.extend({tscore:function(){var i=n.call(arguments);return i.length===4?(i[0]-i[1])/(i[2]/t.sqrt(i[3])):(i[0]-e.mean(i[1]))/(e.stdev(i[1],!0)/t.sqrt(i[1].length))},ttest:function(){var i,s=n.call(arguments);return s.length===5?(i=t.abs(e.tscore(s[0],s[1],s[2],s[3])),s[4]===1?e.studentt.cdf(-i,s[3]-1):2*e.studentt.cdf(-i,s[3]-1)):r(s[1])?(i=t.abs(s[0]),s[2]==1?e.studentt.cdf(-i,s[1]-1):2*e.studentt.cdf(-i,s[1]-1)):(i=t.abs(e.tscore(s[0],s[1])),s[2]==1?e.studentt.cdf(-i,s[1].length-1):2*e.studentt.cdf(-i,s[1].length-1))}}),e.extend(e.fn,{tscore:function(i){return(i-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(i,s){return s===1?1-e.studentt.cdf(t.abs(this.tscore(i)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(i)),this.cols()-1)}}),e.extend({anovafscore:function(){var i,s,u,c,l,f,p,v,g=n.call(arguments);if(g.length===1){for(l=new Array(g[0].length),p=0;p<g[0].length;p++)l[p]=g[0][p];g=l}for(s=new Array,p=0;p<g.length;p++)s=s.concat(g[p]);for(u=e.mean(s),i=0,p=0;p<g.length;p++)i+=g[p].length*t.pow(e.mean(g[p])-u,2);for(i/=g.length-1,f=0,p=0;p<g.length;p++)for(c=e.mean(g[p]),v=0;v<g[p].length;v++)f+=t.pow(g[p][v]-c,2);return i/(f/=s.length-g.length)},anovaftest:function(){var i,s,u,c,l=n.call(arguments);if(r(l[0]))return 1-e.centralF.cdf(l[0],l[1],l[2]);var f=e.anovafscore(l);for(i=l.length-1,u=0,c=0;c<l.length;c++)u+=l[c].length;return s=u-i-1,1-e.centralF.cdf(f,i,s)},ftest:function(i,s,u){return 1-e.centralF.cdf(i,s,u)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var i,s=0;for(i=0;i<this.length;i++)s+=this[i].length;return e.ftest(this.anovafscore(),this.length-1,s-this.length)}}),e.extend({qscore:function(){var i,s,u,c,l,f=n.call(arguments);return r(f[0])?(i=f[0],s=f[1],u=f[2],c=f[3],l=f[4]):(i=e.mean(f[0]),s=e.mean(f[1]),u=f[0].length,c=f[1].length,l=f[2]),t.abs(i-s)/(l*t.sqrt((1/u+1/c)/2))},qtest:function(){var i,s=n.call(arguments);s.length===3?(i=s[0],s=s.slice(1)):s.length===7?(i=e.qscore(s[0],s[1],s[2],s[3],s[4]),s=s.slice(5)):(i=e.qscore(s[0],s[1],s[2]),s=s.slice(3));var u=s[0],c=s[1];return 1-e.tukey.cdf(i,c,u-c)},tukeyhsd:function(i){for(var s=e.pooledstdev(i),u=i.map(function(g){return e.mean(g)}),c=i.reduce(function(g,h){return g+h.length},0),l=[],f=0;f<i.length;++f)for(var p=f+1;p<i.length;++p){var v=e.qtest(u[f],u[p],i[f].length,i[p].length,s,c,i.length);l.push([[f,p],v])}return l}}),e.extend({normalci:function(){var i,s=n.call(arguments),u=new Array(2);return i=s.length===4?t.abs(e.normal.inv(s[1]/2,0,1)*s[2]/t.sqrt(s[3])):t.abs(e.normal.inv(s[1]/2,0,1)*e.stdev(s[2])/t.sqrt(s[2].length)),u[0]=s[0]-i,u[1]=s[0]+i,u},tci:function(){var i,s=n.call(arguments),u=new Array(2);return i=s.length===4?t.abs(e.studentt.inv(s[1]/2,s[3]-1)*s[2]/t.sqrt(s[3])):t.abs(e.studentt.inv(s[1]/2,s[2].length-1)*e.stdev(s[2],!0)/t.sqrt(s[2].length)),u[0]=s[0]-i,u[1]=s[0]+i,u},significant:function(i,s){return i<s}}),e.extend(e.fn,{normalci:function(i,s){return e.normalci(i,s,this.toArray())},tci:function(i,s){return e.tci(i,s,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(i,s,u,c){var l=o(i,s,u,c);return e.ztest(l,1)},twoSidedDifferenceOfProportions:function(i,s,u,c){var l=o(i,s,u,c);return e.ztest(l,2)}})}(j,Math),j.models=function(){function e(o){var i=o[0].length;return j.arange(i).map(function(s){var u=j.arange(i).filter(function(c){return c!==s});return t(j.col(o,s).map(function(c){return c[0]}),j.col(o,u))})}function t(o,i){var s=o.length,u=i[0].length-1,c=s-u-1,l=j.lstsq(i,o),f=j.multiply(i,l.map(function(w){return[w]})).map(function(w){return w[0]}),p=j.subtract(o,f),v=j.mean(o),g=j.sum(f.map(function(w){return Math.pow(w-v,2)})),h=j.sum(o.map(function(w,y){return Math.pow(w-f[y],2)})),m=g+h;return{exog:i,endog:o,nobs:s,df_model:u,df_resid:c,coef:l,predict:f,resid:p,ybar:v,SST:m,SSE:g,SSR:h,R2:g/m}}function n(o){var i=e(o.exog),s=Math.sqrt(o.SSR/o.df_resid),u=i.map(function(v){var g=v.SST,h=v.R2;return s/Math.sqrt(g*(1-h))}),c=o.coef.map(function(v,g){return(v-0)/u[g]}),l=c.map(function(v){var g=j.studentt.cdf(v,o.df_resid);return 2*(g>.5?1-g:g)}),f=j.studentt.inv(.975,o.df_resid),p=o.coef.map(function(v,g){var h=f*u[g];return[v-h,v+h]});return{se:u,t:c,p:l,sigmaHat:s,interval95:p}}function r(o){var i,s,u,c=o.R2/o.df_model/((1-o.R2)/o.df_resid);return{F_statistic:c,pvalue:1-(i=c,s=o.df_model,u=o.df_resid,j.beta.cdf(i/(u/s+i),s/2,u/2))}}function a(o,i){var s=t(o,i),u=n(s),c=r(s),l=1-(1-s.R2)*((s.nobs-1)/s.df_resid);return s.t=u,s.f=c,s.adjust_R2=l,s}return{ols:a}}(),j.extend({buildxmatrix:function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++){var n=[1];e[t]=n.concat(arguments[t])}return j(e)},builddxmatrix:function(){for(var e=new Array(arguments[0].length),t=0;t<arguments[0].length;t++){var n=[1];e[t]=n.concat(arguments[0][t])}return j(e)},buildjxmatrix:function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return j.builddxmatrix(t)},buildymatrix:function(e){return j(e).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(e,t){var n,r,a,o,i;if(e.cols()==t.rows()){if(t.rows()>1){for(o=[],n=0;n<e.rows();n++)for(o[n]=[],r=0;r<t.cols();r++){for(i=0,a=0;a<e.cols();a++)i+=e.toArray()[n][a]*t.toArray()[a][r];o[n][r]=i}return j(o)}for(o=[],n=0;n<e.rows();n++)for(o[n]=[],r=0;r<t.cols();r++){for(i=0,a=0;a<e.cols();a++)i+=e.toArray()[n][a]*t.toArray()[r];o[n][r]=i}return j(o)}},regress:function(e,t){var n=j.xtranspxinv(e),r=e.transpose(),a=j.matrixmult(j(n),r);return j.matrixmult(a,t)},regresst:function(e,t,n){var r=j.regress(e,t),a={anova:{}},o=j.jMatYBar(e,r);a.yBar=o;var i=t.mean();a.anova.residuals=j.residuals(t,o),a.anova.ssr=j.ssr(o,i),a.anova.msr=a.anova.ssr/(e[0].length-1),a.anova.sse=j.sse(t,o),a.anova.mse=a.anova.sse/(t.length-(e[0].length-1)-1),a.anova.sst=j.sst(t,i),a.anova.mst=a.anova.sst/(t.length-1),a.anova.r2=1-a.anova.sse/a.anova.sst,a.anova.r2<0&&(a.anova.r2=0),a.anova.fratio=a.anova.msr/a.anova.mse,a.anova.pvalue=j.anovaftest(a.anova.fratio,e[0].length-1,t.length-(e[0].length-1)-1),a.anova.rmse=Math.sqrt(a.anova.mse),a.anova.r2adj=1-a.anova.mse/a.anova.mst,a.anova.r2adj<0&&(a.anova.r2adj=0),a.stats=new Array(e[0].length);for(var s,u,c,l=j.xtranspxinv(e),f=0;f<r.length;f++)s=Math.sqrt(a.anova.mse*Math.abs(l[f][f])),u=Math.abs(r[f]/s),c=j.ttest(u,t.length-e[0].length-1,n),a.stats[f]=[r[f],s,u,c];return a.regress=r,a},xtranspx:function(e){return j.matrixmult(e.transpose(),e)},xtranspxinv:function(e){var t=j.matrixmult(e.transpose(),e);return j.inv(t)},jMatYBar:function(e,t){var n=j.matrixmult(e,t);return new j(n)},residuals:function(e,t){return j.matrixsubtract(e,t)},ssr:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},sse:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},sst:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},matrixsubtract:function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++){n[r]=new Array(e[r].length);for(var a=0;a<e[r].length;a++)n[r][a]=e[r][a]-t[r][a]}return j(n)}}),j.jStat=j,j);var Bs=wv.exports;function od(e){let{confidence:t,highConfidenceStds:n=0,highConfidence:r=100,lowConfidenceStds:a=1.3,lowConfidence:o=10}=e;return(100-t)*(-1*(n-a)/(r-o))}function Tk(e){let t,n;return e.startDate&&(t={start:e.startDate,startFrom:{message:"start date",reference:e}}),e.dueDate&&(n={due:e.dueDate,dueTo:{message:"due date",reference:e}}),{startData:t,dueData:n}}function ud(e){const t=[];if(e.sprints)for(const n of e.sprints)n&&n.startDate&&n.endDate&&t.push({startData:{start:n.startDate,startFrom:{message:`${n.name}`,reference:e}},dueData:{due:n.endDate,dueTo:{message:`${n.name}`,reference:e}}});return kv(t)}function kv(e){const t=e.filter(r=>r?.startData).map(r=>r.startData),n=e.filter(r=>r?.dueData).map(r=>r.dueData);return{startData:t.sort((r,a)=>r.start-a.start)[0],dueData:n.sort((r,a)=>a.due-r.due)[0]}}function Lk(e){let{fields:t}=e;return t["Story points confidence"]||t.Confidence}function Ik(e){return 50}function Ck(e){return 10}function Ok(e){let{fields:t}=e;return t["Due date"]}function Pk(e){var t;let{fields:n}=e;return(t=n["Issue Type"])===null||t===void 0?void 0:t.hierarchyLevel}function _k(e){let{key:t}=e;return t}function Mk(e){var t,n;let{fields:r}=e;return((t=r.Parent)===null||t===void 0?void 0:t.key)||((n=r["Parent Link"])===null||n===void 0||(n=n.data)===null||n===void 0?void 0:n.key)}function Ak(e){let{fields:t}=e;return t["Start date"]}function Vk(e){let{fields:t}=e;return t["Story points"]}function Nk(e){return e.velocity/e.parallelWorkLimit}function Rk(e){let{fields:t}=e;return t["Story points median"]}function qk(e){return"javascript://"}function jk(e){let{key:t}=e;return t.replace(/-.*/,"")}function Kk(e){var t;let{fields:n}=e;return(t=n["Issue Type"])===null||t===void 0?void 0:t.name}function Bk(e){return 21}function zk(e){return 1}function Hk(e){let{fields:t}=e;return t.Sprint?t.Sprint.map(n=>({name:n.name,startDate:jn(n.startDate),endDate:jn(n.endDate)})):null}function Uk(e){var t;let{fields:n}=e;return n==null||(t=n.Status)===null||t===void 0?void 0:t.name}function Fk(e){let{fields:t}=e;return t?.labels||[]}function Wk(e){let{fields:t}=e;return(t["Fix versions"]||[]).map(n=>{let{name:r,id:a}=n;return{name:r,id:a}})}function $k(e){let{getDefaultConfidence:t=Ik,getDefaultStoryPoints:n=Nk,getStatusType:r=bv,getWorkType:a=su,uncertaintyWeight:o=80}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=function(B){return B&&B>0&&B<=100}(e.confidence),s=i?e.confidence:t(e.team),u=cd(e.storyPoints),c=u?e.storyPoints:n(e.team),l=c/e.team.pointsPerDayPerTrack,f=cd(e.storyPointsMedian),p=f?e.storyPointsMedian:n(e.team),v=p/e.team.pointsPerDayPerTrack,g=function(B,le,ge){var Me=od({confidence:le});return ge==="average"?B*Bs.jStat.lognormal.mean(0,Me)-B:B*Bs.jStat.lognormal.inv(ge/100,0,Me)-B}(p,s,o),h=g/e.team.pointsPerDayPerTrack,m=p+g,w=m/e.team.pointsPerDayPerTrack,y=function(B,le){const ge=od({confidence:le});return B*Bs.jStat.lognormal.sample(0,ge)-B}(p,s),k=y/e.team.pointsPerDayPerTrack,E=p+y,S=E/e.team.pointsPerDayPerTrack,I=e.dueDate&&e.startDate,V=I?Jn(e.startDate,e.dueDate):null,{startData:D,dueData:L}=ud(e),_=!(!D||!L),A=_?Jn(D.start,L.due):null,{startData:H,dueData:te}=function(B){return kv([Tk(B),ud(B)])}(e);let ae=null;H&&te?ae=Jn(H.start,te.due):f?ae=w:f&&(ae=l);const ve=ae!==null?ae:w,pe=function(B,le,ge){return B&&B.start<new Date?!le||le.due>new Date?Jn(B.start,new Date):Jn(B.start,le.due):le&&le.due<new Date&&ge||0}(H,te,ae);return{...e,derivedWork:{isConfidenceValid:i,usedConfidence:s,isStoryPointsValid:u,defaultOrStoryPoints:c,storyPointsDaysOfWork:l,isStoryPointsMedianValid:f,defaultOrStoryPointsMedian:p,storyPointsMedianDaysOfWork:v,deterministicExtraPoints:g,deterministicExtraDaysOfWork:h,deterministicTotalPoints:m,deterministicTotalDaysOfWork:w,probablisticExtraPoints:y,probablisticExtraDaysOfWork:k,probablisticTotalPoints:E,probablisticTotalDaysOfWork:S,hasStartAndDueDate:I,startAndDueDateDaysOfWork:V,hasSprintStartAndEndDate:_,sprintDaysOfWork:A,sprintStartData:D,endSprintData:L,startData:H,dueData:te,totalDaysOfWork:ae,defaultOrTotalDaysOfWork:ve,completedDaysOfWork:pe,...Gk(e,{getStatusType:r,getWorkTypeDefault:su})}}}const xv=["dev","qa","uat","design"],Qk=xv.map(e=>e+":");function su(e){let t=Qk.find(n=>{var r;return(e==null||(r=e.summary)===null||r===void 0?void 0:r.indexOf(n))===0});return t?t.slice(0,-1):(t=xv.find(n=>e.labels.includes(n)),t||"dev")}function Gk(e,t){let{getStatusType:n=bv,getWorkType:r=su}=t;return{statusType:n(e),workType:r(e)}}function cd(e){return e&&e>=0}function Yk(e){return{...e.issue.fields,changelog:e.issue.changelog,"Project key":e.team.name,"Issue key":e.key,url:e.url,"Issue Type":e.type,"Parent Link":e.parentKey,Status:e.status,workType:e.derivedWork.workType,workingBusinessDays:e.derivedWork.totalDaysOfWork,weightedEstimate:e.derivedWork.deterministicTotalPoints}}window.fieldsSet=new Set;const ld={Sprint:function(e,t,n){let{sprints:r}=n;const a=function(i){return i===""?null:i.split(",").map(s=>+s)}(t.from),o=function(i){return i===""?null:i.split(",").map(s=>s.trim())}(t.fromString);return a===null?null:a.map((i,s)=>r.ids.has(i)?r.ids.get(i):r.names.has(o[s])?r.names.get(o[s]):void console.warn("Can't find sprint ",i,o[s]))},"Fix versions":function(e,t,n){let{versions:r}=n;return t.from?r.ids.has(t.from)?r.ids.get(t.from):r.names.has(t.fromString)?r.names.get(t.fromString):(console.warn("Can't find release version ",t.from,t.fromString),e):[]}},Jk={duedate:"Due date",status:"Status",labels:"Labels",issuetype:"Issue Type","Fix Version":"Fix versions"};function Xk(e,t){const n=function(a){const o=new Map,i=new Map;for(const s of a)for(const u of s.Sprint||[])o.set(u.id,u),i.set(u.name,u);return{ids:o,names:i}}(e),r=function(a){const o=new Map,i=new Map;for(const s of a)for(const u of s["Fix versions"]||[])o.set(u.id,u),i.set(u.name,u);return{ids:o,names:i}}(e);return e.map(a=>function(o,i,s){if(jn(o.Created)>i)return;const u={...o};for(const{items:c,created:l}of o.changelog){if(jn(l)<i)break;c.forEach(f=>{const{field:p,from:v,to:g}=f,h=Jk[p]||p;ld[h]?u[h]=ld[h](u[h],f,s):u[h]=v})}return u}(a,t,{sprints:n,versions:r})).filter(a=>a)}function Zk(e){const t={};e.forEach(a=>{t[a]?t[a]++:t[a]=1});let n=null,r=0;for(const a in t)t[a]>r&&(r=t[a],n=a);return n}function ex(e){let t,n;return e["Start date"]&&(t={start:nd(e["Start date"]),startFrom:{message:"start date",reference:e}}),e["Due date"]&&(n={due:nd(e["Due date"]),dueTo:{message:"due date",reference:e}}),{startData:t,dueData:n}}function tx(e){const t=[];if(e.Sprint)for(const n of e.Sprint)n&&t.push({startData:{start:jn(n.startDate),startFrom:{message:`${n.name}`,reference:e}},dueData:{due:jn(n.endDate),dueTo:{message:`${n.name}`,reference:e}}});return Or(t)}function Or(e){const t=e.filter(r=>r?.startData).map(r=>r.startData),n=e.filter(r=>r?.dueData).map(r=>r.dueData);return{startData:t.sort((r,a)=>r.start-a.start)[0],dueData:n.sort((r,a)=>a.due-r.due)[0]}}const nx={parentFirstThenChildren:function(e,t){const n=e(),r=t();return n.startData&&n.dueData?n:{startData:n.startData||r.startData,dueData:n.dueData||r.dueData}},childrenOnly:function(e,t){return t()},childrenFirstThenParent:function(e,t){const n=t();if(n.startData&&n.dueData)return n;const r=e();return{startData:n.startData||r.startData,dueData:n.dueData||r.dueData}},widestRange:function(e,t){return Or([t(),e()])},parentOnly:function(e,t){return t(),e()}},fd={parentFirstThenChildren:function(e,t){return`From ${e.type}, then ${t.plural}`},childrenOnly:function(e,t){return`From ${t.plural}`},childrenFirstThenParent:function(e,t){return`From ${t.plural}, then ${e.type}`},widestRange:function(e,t){return`From ${e.type} or ${t.plural} (earliest to latest)`},parentOnly:function(e,t){return`From ${e.type}`}};function Ev(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["childrenOnly","parentFirstThenChildren"],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=n[r]?n[r]:"parentOnly";r++;const o=nx[a],i={...e,dateData:{rollup:{}}},s=o(function(){const u=function(c){return Or([ex(c),tx(c)])}(e);return i.dateData.self=zs({},u),u},function(){const u=(t[e["Issue key"]]||[]).map(l=>Ev(l,t,n,r)),c=Or(u.map(Dv));return i.dateData.children=zs({issues:u},c),c});return zs(i.dateData.rollup,s),i}function zs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.assign(e,t.startData),Object.assign(e,t.dueData),e}function Dv(e){let t,n;return e.dateData.rollup.start&&(t={start:e.dateData.rollup.start,startFrom:e.dateData.rollup.startFrom}),e.dateData.rollup.due&&(n={due:e.dateData.rollup.due,dueTo:e.dateData.rollup.dueTo}),{startData:t,dueData:n}}function ln(e){const t=Or(e.map(Dv));return{...t.startData,...t.dueData,issues:e}}function rx(e){const t=function(i){const s=[];for(let u of i)s[u.hierarchyLevel]||(s[u.hierarchyLevel]=[]),s[u.hierarchyLevel].push(u.type);return s.map((u,c)=>({type:Zk(u),hierarchyLevel:c})).filter(u=>u)}(e).reverse(),n=t.map((i,s)=>{let{type:u,hierarchyLevel:c}=i;return t[s+1]?{type:u,hierarchyLevel:c,plural:u+"s",children:[t[s+1].type],availableTimingCalculations:"*"}:{type:u,hierarchyLevel:c,plural:u+"s",children:[],availableTimingCalculations:["parentOnly"]}}),r=[{type:"Release",plural:"Releases",children:t.map(i=>i.type),availableTimingCalculations:["childrenOnly"]},...n],a={};for(const i of r)a[i.type]=i;const o=Object.keys(fd);for(const i of r){i.denormalizedChildren=i.children.map(c=>a[c]);const s=i.availableTimingCalculations==="*"?o:i.availableTimingCalculations,u={};i.timingCalculations=[];for(let c of i.children)u[c]=s.map(l=>({child:c,parent:i.type,calculation:l,name:fd[l](i,a[c])})),i.timingCalculations.push({child:c,calculations:u[c]});i.timingCalculationsMap=u}return{list:r,map:a}}function gr(e,t,n){const r=t[e];if(!r)return[];let a=e,o=r.timingCalculations;const i=[...n],s=[];for(;o.length;){let u=i.shift()||{type:o[0].child,calculation:o[0].calculations[0].calculation};s.push(u),a=u.type,o=t[a].timingCalculations}return s}function dd(e,t){return e.filter(n=>(n.Labels||[]).filter(r=>r.includes(t)).length)}function pd(e){let{baseIssues:t,reportedIssueType:n="Initiative",reportedStatuses:r=function(u){return!["Done"].includes(u)},timingMethods:a,getChildWorkBreakdown:o}=e;const i=function(u){const c={};for(const l of u){const f=l["Parent Link"]||l["Epic Link"];f&&(c[f]||(c[f]=[]),c[f].push(l))}return c}(t);return t.filter(u=>u["Issue Type"].includes(n)&&r(u.Status)).map(u=>{const c=Ev(u,i,a);return Sv(c.dateData,c.dateData.children.issues||[],o),c})}function Sv(e,t,n){const r=n(t);return Object.assign(e,{dev:ln([...r.devWork]),qa:ln([...r.qaWork]),uat:ln([...r.uatWork])})}function ou(e){const t=[...e];for(const r of e){var n;const a=(n=r.dateData)===null||n===void 0||(n=n.children)===null||n===void 0?void 0:n.issues;a&&t.push.apply(t,ou(a))}return t}function hd(e,t){const n=e.dateData;if(t){e.lastPeriod=t;const r=t.dateData;n.rollup.lastPeriod=r.rollup,n.children.lastPeriod=r.children,n.dev&&(n.dev.lastPeriod=r.dev),n.qa&&(n.qa.lastPeriod=r.qa),n.uat&&(n.uat.lastPeriod=r.uat)}else e.lastPeriod=null}function Ki(e){var t,n;return{releaseName:e==null||(t=e["Fix versions"])===null||t===void 0||(t=t[0])===null||t===void 0?void 0:t.name,releaseId:e==null||(n=e["Fix versions"])===null||n===void 0||(n=n[0])===null||n===void 0?void 0:n.id}}function vd(e){return e.filter(t=>Ki(t).releaseName)}function gd(e){const t={Summary:e,release:e,lastPeriod:null,dateData:{children:{issues:[]}}};return t.dateData.rollup=t.dateData.children,t}function md(e,t){const n=e.dateData.children.issues,r=n.map(a=>a.dateData.children.issues).flat();e.dateData.rollup=ln(n),Sv(e.dateData,r,t)}function ix(e){const{currentInitiativesWithStatus:t,priorInitiatives:n}=function(s){const{baseIssues:u,priorTime:c,reportedIssueType:l,reportedStatuses:f,timingMethods:p}=s,v=pd(s),g=Xk(u,c),h=pd({...s,baseIssues:g}),m=ou(v),w=function(y){const k={};for(const E of y)k[E["Issue key"]]=E;return k}(ou(h));for(const y of m)hd(y,w[y["Issue key"]]);return{currentInitiativesWithStatus:v.map(Sk),priorInitiatives:h}}(e),r=vd(t),a=vd(n),o=function(s){const u=new Map;for(const c of s){const{releaseId:l,releaseName:f}=Ki(c);l&&u.set(l,f)}return u}(r),i=function(s){const u=new Map;for(const c of s){const{releaseName:l}=Ki(c);l&&(u.has(l)||u.set(l,gd(l)),u.get(l).dateData.children.issues.push(c))}return u}(r);for(const s of a){const{releaseId:u,releaseName:c}=Ki(s);let l=i.get(c);if(!l){const f=o.get(u);f&&(l=i.get(f))}l?(l.lastPeriod||(l.lastPeriod=gd("PRIOR "+l.release)),l.lastPeriod.dateData.children.issues.push(s)):console.warn("Unable to find current release matching old release",c+".","The initiative",'"'+s.Summary+'"',"timing will be ignored")}for(const[s,u]of i)md(u,e.getChildWorkBreakdown),u.lastPeriod&&(md(u.lastPeriod,e.getChildWorkBreakdown),hd(u,u.lastPeriod));return{releases:[...i.values()].map(Dk),initiatives:t}}var uu=await new Promise((e,t)=>{const n=document.createElement("script");n.src="https://unpkg.com/semver@4.3.6/semver.browser.js",document.head.appendChild(n),n.onload=function(){e(semver)},n.onerror=t});function Tv(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t===""&&(n.last=!0),n.followers.push(e),n.characterMap[t[0]]||(n.characterMap[t[0]]={followers:[],characterMap:{}}),t!==""&&Tv(e,t.substr(1),n.characterMap[t[0]])}function Lv(e){let t=e.match(/(?:\d+\.\d+\.[\dX]+)|(?:\d+\.[\dX]+)|(?:\d+)$/);if(t)return t[0].replace(".X",".0")}function yd(e){let t=Lv(e);if(t&&(t.length===1&&(t+=".0.0"),t.length===3&&(t+=".0"),uu.clean(t)))return t}function ax(e){const t={};for(let a of e)t[a.release]=a;const n=function(a){const o={},i=[];return a.forEach(s=>{const u=yd(s);u&&uu.clean(u)&&(o[u]=s,i.push(u))}),uu.sort(i).map(s=>o[s])}(Object.keys(t)),r=function(a){const o={characterMap:{},followers:[]};for(const u of a)Tv(u,u,o);let i=o,s="";for(;Object.keys(i.characterMap).length===1;){let u=Object.keys(i.characterMap)[0];s+=u,i=i.characterMap[u]}return s.length>3?a.map(u=>u.replace(s,"")):a}(n);return n.map((a,o)=>({...t[a],release:a,shortName:r[o],version:yd(a),shortVersion:Lv(a)}))}function sx(e){return e.ok?e.json():e.json().then(t=>{const n=new Error("HTTP status code: "+e.status);throw Object.assign(n,t),Object.assign(n,e),n})}function ox(e,t){return fetch(e,t).then(sx)}const ux=new Date(2024,1,20),cx=864e5;let pi=null;const lx=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;function Iv(e){return pi===null&&(pi=lx?Promise.resolve([{}]):ox("./examples/bitovi-training.json"),pi.then(function(t){return cu(t,Math.round((e.getTime()-ux.getTime())/cx)-0)})),pi}function cu(e,t){const n=/\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d{1,3})?([-+]\d{2}:\d{2})?)?/;function r(o,i){const s=new Date(o);return s.setDate(s.getDate()+i),s.toISOString()}function a(o,i){return i.includes("T")&&i.includes("-0600")?o.replace("Z","").replace(/\.\d{3}/,"")+"-0600":i.includes("T")?o.replace("Z",""):i.includes("-")?o.split("T")[0]:o.replace("T"," ").replace("Z","").replace(/\.\d{3}/,".0")}for(let o in e)if(typeof e[o]=="string"&&n.test(e[o])){const i=r(e[o],t);e[o]=a(i,e[o])}else typeof e[o]=="object"&&e[o]!==null?cu(e[o],t):Array.isArray(e[o])&&(e[o]=e[o].map(i=>typeof i=="string"&&n.test(i)?a(r(i,t),i):(typeof i=="object"&&i!==null&&cu(i,t),i)));return e}const fx=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;function Nt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:JSON;const{stringify:a,parse:o}=r;return{type:n,value(i){let{lastSet:s,listenTo:u,resolve:c}=i;const l=a(typeof t=="function"?t.call(this):t);if(s.value)c(s.value);else{const f=o(new URL(window.location).searchParams.get(e)||l);f&&fx.test(f)?c(new Date(f)):c(f)}u(s,f=>{const p=a(f);Vn(e,p,l),c(f)})}}}function Vn(e,t,n){const r=new URL(window.location);t!==n?r.searchParams.set(e,t):r.searchParams.delete(e),history.pushState({},"",r)}class Vr extends HTMLElement{static get observedAttributes(){return["for"]}attributeChangedCallback(t,n,r){}connectedCallback(){this.enteredElement=this.enteredElement.bind(this),this.leftElement=this.leftElement.bind(this),this.forElement=this.getAttribute("for"),this.style.display="none",this.style.position="absolute"}disconnectedCallback(){this._forElement&&(this._forElement.removeEventListener("mouseenter",this.enteredElement),this._forElement.removeEventListener("mouseenter",this.leftElement))}set forElement(t){typeof t=="string"&&(t=document.querySelectorAll(t)),this._forElement&&(this._forElement.removeEventListener("mouseenter",this.enteredElement),this._forElement.removeEventListener("mouseenter",this.leftElement)),t&&(t.addEventListener("mouseenter",this.enteredElement),t.addEventListener("mouseenter",this.leftElement)),this._forElement=t}enteredElement(t,n){if(arguments.length>1){this.innerHTML=n;var r=t.currentTarget.getBoundingClientRect();this.style.top=window.scrollY+r.bottom+"px",this.style.left=window.scrollX+r.left+"px",this.style.display=""}}belowElement(t,n){if(arguments.length>1){this.innerHTML="",this.appendChild(n),this.style.top="-1000px",this.style.left="-1000px",this.style.display="";const a=this.clientHeight;var r=t.getBoundingClientRect();const o=window.scrollY+r.bottom;o+a>=window.innerHeight?this.style.top=r.top-a+"px":this.style.top=o+"px",this.style.left=window.scrollX+r.left+"px"}}belowElementInScrollingContainer(t,n){const r=function(c){let l=c.parentElement;for(;l&&l.scrollHeight===l.clientHeight;)l=l.parentElement;return l||document.body}(t);this.innerHTML="",r.appendChild(this),this.style.top="-1000px",this.style.left="-1000px",typeof n=="string"?this.innerHTML=n:this.appendChild(n),this.style.display="";const a=r.getBoundingClientRect(),o=t.getBoundingClientRect(),i=this.getBoundingClientRect(),s=window.getComputedStyle(r);if(o.bottom+i.height>window.innerHeight){const c=o.top-i.height-a.top-parseFloat(s.borderTopWidth,10)+r.scrollTop;this.style.top=c+"px"}else{const c=o.bottom-a.top-parseFloat(s.borderTopWidth,10);this.style.top=c+r.scrollTop+"px"}const u=o.left-a.left;this.style.left=u+"px"}centeredBelowElement(t,n){if(arguments.length>1){this.style.top="-1000px",this.style.left="-1000px",this.innerHTML=n,this.style.display="";const a=this.getBoundingClientRect();var r=t.getBoundingClientRect();this.style.top=window.scrollY+r.bottom+"px",this.style.left=window.scrollX+r.left+r.width/2-a.width/2+"px"}}topRightOnElementBottomRight(t,n){if(arguments.length>1){this.style.top="-1000px",this.style.left="-1000px",typeof n=="string"?this.innerHTML=n:(this.innerHTML="",this.appendChild(n)),this.style.display="";const r=this.getBoundingClientRect(),a=t.getBoundingClientRect();this.style.top=window.scrollY+a.bottom+"px",this.style.left=window.scrollX+a.left+a.width-r.width+"px"}}leftElement(t){this.style.display="none"}}customElements.define("simple-tooltip",Vr);const Bi=new Vr;document.body.append(Bi);class Mu extends Ke{}de(Mu,"view",`
        
        <ul class="max-h-80 overflow-y-auto">
            {{# if(this.data.length) }}
                {{# for(item of this.data) }}
                    <li class="px-2 hover:bg-blue-75 cursor-pointer" on:click="this.add(item)">{{item}}</li>
                {{/ for }}
            {{ else }}
                <li>No matches</li>
            {{/ if }}
        </ul>
    `);customElements.define("auto-complete-suggestions",Mu);class Au extends Ke{remove(t,n){n.preventDefault(),this.selected=this.selected.filter(r=>r!=t)}add(t){this.selected=[...this.selected,t],this.querySelector("input").value="",this.stopShowingSuggestions()}suggestItems(t){const n=this.data.filter(r=>r.toLowerCase().includes(t)&&!this.selected.includes(r));this.showingSuggestions=!0,Bi.belowElementInScrollingContainer(this,new Mu().initialize({searchTerm:t,data:n,add:this.add.bind(this)}))}connected(){this.listenTo(window,"click",t=>{this.showingSuggestions&&this.querySelector("input")!==t.target&&(Bi.contains(t.target)||this.stopShowingSuggestions())})}stopShowingSuggestions(){Bi.leftElement(),this.showingSuggestions=!1}}de(Au,"view",`
        <div class="flex gap-2 align-middle flex-wrap">
            {{# for(item of this.selected) }}
                <div class="border-neutral-800 border-solid border rounded-md whitespace-nowrap">
                    <label class="inline p-1">{{item}}</label>
                    <button class="text-red-500 text-sm py-1 px-2 bg-neutral-30 font-semibold rounded-r shadow-sm hover:bg-neutral-40" on:click="this.remove(item, scope.event)">x</button>
                </div>
            {{/ for }}
            <input class="form-border rounded-md px-1 placeholder:italic placeholder:text-slate-400" 
                placeholder="{{this.inputPlaceholder}}"
                on:focus="this.suggestItems(scope.element.value)"
                on:input="this.suggestItems(scope.element.value)">
        </div>
    `);de(Au,"props",{data:{type:F.Any},selected:{type:F.Any},showingSuggestions:{type:Boolean,default:!1}});customElements.define("auto-complete",Au);customElements.define("status-filter",(Nr=class extends Ke{},de(Nr,"view",`
    <auto-complete 
        data:from="this.statuses" 
        selected:bind="this.selectedStatuses"
        inputPlaceholder:raw="Search for statuses"></auto-complete>
    
    `),de(Nr,"props",{statuses:{get default(){return[]}},param:String,selectedStatuses:{value(e){let{resolve:t,lastSet:n,listenTo:r}=e;const a=i=>{i?Array.isArray(i)&&(i=i.join(",")):i="",Vn(this.param,i,""),o=i===""?[]:i.split(","),t(o)};let o;a(new URL(window.location).searchParams.get(this.param)),r(n,i=>{a(i)})}}}),Nr));customElements.define("status-filter-only",(Rr=class extends Ke{},de(Rr,"view",`
    <auto-complete 
        data:from="this.statuses" 
        selected:bind="this.statusesToShow"
        inputPlaceholder:raw="Search for statuses"></auto-complete>
    
    `),de(Rr,"props",{statuses:{get default(){return[]}},statusesToShow:{value(e){let{resolve:t,lastSet:n,listenTo:r}=e,a;function o(i){i?Array.isArray(i)&&(i=i.join(",")):i="",Vn("statusesToShow",i,""),a=i===""?[]:i.split(","),t(a)}o(new URL(window.location).searchParams.get("statusesToShow")),r(n,i=>{o(i)})}}}),Rr));const bd=864e5,mr=new Vr;document.body.append(mr);let zi=null;const Cv=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short"});function hi(e){return e?Cv.format(e):""}function Ov(e,t){mr.belowElementInScrollingContainer(e,t),mr.querySelector(".remove-button").onclick=()=>{zi=null,mr.leftElement()}}function Pv(e,t){if(console.log(t),zi===t)return zi=null,void mr.leftElement();zi=t;const n=(o,i)=>{var s,u,c,l,f,p,v;const g=o.dateData[i];return`<div class="p-2">
            <div class="release_box_subtitle_wrapper">
                    <span class="release_box_subtitle_key color-text-and-bg-${g.status}">
                        &nbsp;${i.toUpperCase()}&nbsp;
                    </span>
                    ${o[i+"Status"]!=="unknown"?`<span class="release_box_subtitle_value">
                            ${hi(g.start)}
                            ${function(h){const m=h.start,w=h.lastPeriod&&h.lastPeriod.start;return w&&m-bd>w?" ("+hi(w)+")":""}(g)}
                            </span><span>-</span>
                            <span class="release_box_subtitle_value">
                            ${hi(g.due)}
                            ${function(h){const m=h.due,w=h.lastPeriod&&h.lastPeriod.due;return w&&m-bd>w?" ("+hi(w)+")":""}(g)}
                        </span>`:""}
            </div>
            ${((s=g.statusData)===null||s===void 0?void 0:s.warning)===!0?`<div class="color-bg-warning">${g.statusData.message}</div>`:""}
            ${g.status!=="unknown"?`<p>Start: <a href="${g==null||(u=g.startFrom)===null||u===void 0||(u=u.reference)===null||u===void 0?void 0:u.url}" target="_blank" class="link">
                    ${g==null||(c=g.startFrom)===null||c===void 0||(c=c.reference)===null||c===void 0?void 0:c.Summary}</a>'s 
                    ${g==null||(l=g.startFrom)===null||l===void 0?void 0:l.message}
                </p>
                <p>End: <a href="${g==null||(f=g.dueTo)===null||f===void 0||(f=f.reference)===null||f===void 0?void 0:f.url}" target="_blank" class="link">
                    ${g==null||(p=g.dueTo)===null||p===void 0||(p=p.reference)===null||p===void 0?void 0:p.Summary}</a>'s
                    ${g==null||(v=g.dueTo)===null||v===void 0?void 0:v.message}
                </p>`:""}
            
        </div>`},r=document.createElement("div");if(t.dateData){var a;const o=t.dateData.rollup;r.innerHTML=`
        <div class='flex remove-button pointer' style="justify-content: space-between">
            <a class="${t.url?"link":""} text-lg font-bold"
                href="${t.url||""}" target="_blank">${t.Summary||t.release}</a>
            <span>❌</span>
        </div>
        
        ${(o==null||(a=o.statusData)===null||a===void 0?void 0:a.warning)===!0?`<div class="color-bg-warning">${o.statusData.message}</div>`:""}
        ${t.dateData.rollup?n(t,"rollup"):""}
        ${t.dateData.dev?n(t,"dev"):""}
        ${t.dateData.qa?n(t,"qa"):""}
        ${t.dateData.uat?n(t,"uat"):""}
        `}else r.innerHTML=`
        <div class='flex remove-button pointer gap-2' style="justify-content: space-between">
            <a class="${t.url?"link":""} text-lg font-bold"
                href="${t.url||""}" target="_blank">${t.Summary||t.release}</a>
            <span>❌</span>
        </div>`;Ov(e,r)}function dx(e){return function(t){const n=function(i){return i.map(s=>({...s,completionRollup:{totalWorkingDays:0,completedWorkingDays:0}}))}(t),r=function(i,s){const u=i,c=[];for(let l of u)c[l.hierarchyLevel]||(c[l.hierarchyLevel]=[]),c[l.hierarchyLevel].push(l);return c}(n),a=Object.groupBy(n,i=>i.parentKey),o=[];for(let i=Hs;i<r.length;i++){let s=r[i];if(s){let u=o[i]={childCounts:[],totalDaysOfWorkForAverage:[],needsAverageSet:[],averageTotalDays:null,averageChildCount:null,issues:s};for(let l of s)i===Hs&&(l.derivedWork.totalDaysOfWork?(u.totalDaysOfWorkForAverage.push(l.derivedWork.totalDaysOfWork),l.completionRollup.totalWorkingDays=l.derivedWork.totalDaysOfWork):u.needsAverageSet.push(l),l.completionRollup.completedWorkingDays=l.derivedWork.completedDaysOfWork),i>Hs&&px(l,{issueTypeData:u,issueKeyToChildren:a});let c=wd(u.totalDaysOfWorkForAverage)||30;u.averageTotalDays=c,u.averageChildCount=wd(u.childCounts),u.needsAverageSet.forEach(l=>{l.completionRollup.totalWorkingDays=c,l.completionRollup.remainingWorkingDays=l.completionRollup.totalWorkingDays-l.completionRollup.completedWorkingDays})}}return{issues:n,hierarchyData:o}}(e)}const Hs=1;function Hi(e){return e.reduce((t,n)=>t+n,0)}function wd(e){return e.length>0?Hi(e)/e.length:void 0}function px(e,t){let{issueTypeData:n,issueKeyToChildren:r}=t;if(!r[e.key])return void n.needsAverageSet.push(e);const a=r[e.key],o=a.map(s=>s.completionRollup.totalWorkingDays),i=a.map(s=>s.completionRollup.completedWorkingDays);n.childCounts.push(a.length),a.every(s=>s.totalDays)&&(e.completionRollup.totalWorkingDays=Hi(o),n.totalDaysOfWorkForAverage.push(e.completionRollup.totalWorkingDays)),e.completionRollup.completedWorkingDays=Hi(i),e.completionRollup.totalWorkingDays=Hi(o),e.completionRollup.remainingWorkingDays=e.completionRollup.totalWorkingDays-e.completionRollup.completedWorkingDays}function _v(e,t){const n=new Date(e),r=new Date(t);return r.getMonth()-n.getMonth()+12*(r.getFullYear()-n.getFullYear())}function Mv(e,t){const n=new Date(e.getFullYear(),3*Math.floor(e.getMonth()/3)),r=_v(n,new Date(t.getFullYear(),3*Math.floor(t.getMonth()/3)+3)),a=r/3;function o(c){return c.toLocaleString("default",{month:"short"})}Number.isInteger(a)||console.warn("Not an even number of quarters",r,"/ 3");const i=[],s=[];for(let c=0;c<a;c++){const l=new Date(n);l.setMonth(l.getMonth()+3*c);const f=new Date(n);f.setMonth(f.getMonth()+3*c+1);const p=new Date(n);p.setMonth(p.getMonth()+3*+c+2),i.push({number:Math.floor(l.getMonth()/3)+1,name:"Q"+(Math.floor(l.getMonth()/3)+1)}),s.push({first:!0,name:o(l)}),s.push({name:o(f)}),s.push({last:!0,name:o(p)})}const u=new Date(n);return u.setMonth(u.getMonth()+r),{quarters:i,months:s,firstDay:n,lastDay:u}}const hx=Bn(`
    <button class="remove-button">❌</button>
    <div class="grid gap-2" style="grid-template-columns: auto repeat(4, auto);">

            <div class="font-bold">Summary</div>
            <div class="font-bold">Percent Complete</div>
            <div class="font-bold">Completed Working Days</div>
            <div class="font-bold">Remaining Working Days</div>
            <div class="font-bold">Total Working Days</div>
        
            <div class="truncate max-w-96">{{this.issue.Summary}}</div>
            <div class="text-right">{{this.getPercentComplete(this.issue)}}</div>
            <div class="text-right">{{this.round( this.issue.completionRollup.completedWorkingDays) }}</div>
            <div class="text-right">{{this.round(this.issue.completionRollup.remainingWorkingDays)}}</div>
            <div class="text-right">{{this.round(this.issue.completionRollup.totalWorkingDays)}}</div>
        
        {{# for(child of this.children) }}
       
            <div class="pl-4 truncate max-w-96"><a href="{{child.url}}" class="link">{{child.summary}}</a></div>
            <div class="text-right">{{this.getPercentComplete(child)}}</div>
            <div class="text-right">{{this.round(child.completionRollup.completedWorkingDays)}}</div>
            <div class="text-right">{{this.round(child.completionRollup.remainingWorkingDays)}}</div>
            <div class="text-right">{{this.round(child.completionRollup.totalWorkingDays)}}</div>
       
        {{/ for }}
   </div>
`);class Vu extends Ke{get percentComplete(){if(this.derivedIssues)return dx(this.derivedIssues)}get issuesWithPercentComplete(){if(this.showPercentComplete&&this.percentComplete){const t=this.percentComplete,n={};for(const r of t.issues)r.completionRollup.totalWorkingDays,n[r.key]=r;return this.issues.map(r=>{const a=n[r["Issue key"]];return{...r,completionRollup:a?a.completionRollup:{}}})}return this.issues}get lotsOfIssues(){return this.issues.length>20&&!this.breakdown}get textSize(){return this.lotsOfIssues?"text-xs pt-1 pb-0.5 px-1":"p-1"}get bigBarSize(){return this.lotsOfIssues?"h-4":"h-6"}getPercentComplete(t){return this.showPercentComplete&&this.percentComplete?Math.round(100*t.completionRollup.completedWorkingDays/t.completionRollup.totalWorkingDays)+"%":""}showTooltip(t,n){Pv(t.currentTarget,n)}showPercentCompleteTooltip(t,n){const r=Object.groupBy(this.percentComplete.issues,a=>a.parentKey)[n["Issue key"]];Ov(t.currentTarget,hx({issue:n,children:r,getPercentComplete:this.getPercentComplete.bind(this),round:Math.round}))}classForSpecialStatus(t){return t==="complete"||t==="blocked"?"color-text-"+t:""}plus(t,n){return t+n}lastRowBorder(t){return t===this.quartersAndMonths.months.length-1?"border-r-solid-1px-slate-900":""}get quartersAndMonths(){let{start:t,due:n}=ln(this.issues);return t||(t=new Date),n||(n=new Date(t.getTime()+7776e6)),Mv(new Date,n)}get todayMarginLeft(){const{firstDay:t,lastDay:n}=this.quartersAndMonths,r=n-t;return(new Date-t-1728e5)/r*100}getReleaseTimeline(t,n){const r={gridColumn:"3 / span "+this.quartersAndMonths.months.length,gridRow:`${n+3}`},a=document.createElement("div");Object.assign(a.style,{...r,zIndex:0}),a.className=n%2?"color-bg-gray-20":"";const o=document.createElement("div"),i=document.createElement("div");o.appendChild(i),Object.assign(o.style,{...r,position:"relative",zIndex:20}),o.className="py-1",Object.assign(i.style,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}),i.className="py-1 lastPeriod";const{firstDay:s,lastDay:u}=this.quartersAndMonths,c=u-s;if(t.dateData.rollup.start&&t.dateData.rollup.due){let f=function(v){if(v.start==null&&v.due==null)return{start:0,end:1/0,startExtends:!1,endExtends:!1,style:{marginLeft:"1px",marginRight:"1px"}};const g=Math.max(s,v.start),h=Math.min(u,v.due);return{start:g,end:h,startExtends:v.start<s,endExtends:v.due>u,style:{width:Math.max((h-g)/c*100,0)+"%",marginLeft:"max("+(g-s)/c*100+"%, 1px)"}}},p=function(v,g){const h=document.createElement("div");return h.style.backgroundClip="content-box",h.style.opacity="0.9",h.style.position="relative",h.className="border-y-solid-1px",g&&v==="behind"&&(Object.assign(h.style,f(g||{}).style),h.style.zIndex=1,h.classList.add("color-text-and-bg-behind-last-period")),g&&v==="ahead"&&(Object.assign(h.style,f(g||{}).style),h.classList.add("color-text-and-bg-ahead-last-period"),h.style.zIndex=-1),h};if(this.breakdown){const v=p(t.dateData.dev.status,t.dateData.dev.lastPeriod);v.classList.add("h-2","py-[2px]"),i.appendChild(v);const g=document.createElement("div");if(g.className="dev_time h-2 border-y-solid-1px-white color-text-and-bg-"+t.dateData.dev.status,Object.assign(g.style,f(t.dateData.dev).style),o.appendChild(g),this.hasQAEpic){const h=p(t.dateData.qa.status,t.dateData.qa.lastPeriod);h.classList.add("h-2","py-[2px]"),i.appendChild(h);const m=document.createElement("div");m.className="qa_time h-2 border-y-solid-1px-white color-text-and-bg-"+t.dateData.qa.status,Object.assign(m.style,f(t.dateData.qa).style),o.appendChild(m)}if(this.hasUATEpic){const h=p(t.dateData.uat.status,t.dateData.uat.lastPeriod);h.classList.add("h-2","py-[2px]"),i.appendChild(h);const m=document.createElement("div");m.className="uat_time h-2 border-y-solid-1px-white color-text-and-bg-"+t.dateData.uat.status,Object.assign(m.style,f(t.dateData.uat).style),o.appendChild(m)}}else{const v=p(t.dateData.rollup.status,t.dateData.rollup.lastPeriod);v.classList.add(this.bigBarSize,"py-1"),i.appendChild(v);const g=document.createElement("div");g.className=this.bigBarSize+" border-y-solid-1px-white color-text-and-bg-"+t.dateData.rollup.status,Object.assign(g.style,f(t.dateData.rollup).style),g.style.opacity="0.9",o.appendChild(g)}}const l=document.createDocumentFragment();return l.appendChild(a),l.appendChild(o),Bn.safeString(l)}get hasQAEpic(){return!this.issues||this.issues.some(t=>t.dateData.qa.issues.length)}get hasUATEpic(){return!this.issues||this.issues.some(t=>t.dateData.uat.issues.length)}}de(Vu,"view",`
        <div style="display: grid; grid-template-columns: auto auto repeat({{this.quartersAndMonths.months.length}}, [col] 1fr); grid-template-rows: repeat({{this.issues.length}}, auto)"
            class='p-2 mb-10'>
            <div></div><div></div>

            {{# for(quarter of this.quartersAndMonths.quarters) }}
                <div style="grid-column: span 3" class="text-center">{{quarter.name}}</div>
            {{ / for }}

            <div></div><div></div>
            {{# for(month of this.quartersAndMonths.months)}}
                <div class='border-b border-neutral-80 text-center'>{{month.name}}</div>
            {{/ for }}

            <!-- CURRENT TIME BOX -->
            <div style="grid-column: 3 / span {{this.quartersAndMonths.months.length}}; grid-row: 3 / span {{this.issues.length}};">
                <div class='today' style="margin-left: {{this.todayMarginLeft}}%; width: 1px; background-color: orange; z-index: 1000; position: relative; height: 100%;"></div>
            </div>


            <!-- VERTICAL COLUMNS -->
            {{# for(month of this.quartersAndMonths.months)}}
                <div style="grid-column: {{ plus(scope.index, 3) }}; grid-row: 3 / span {{this.issues.length}}; z-index: 10"
                    class='border-l border-b border-neutral-80 {{this.lastRowBorder(scope.index)}}'></div>
            {{/ for }}

            <!-- Each of the issues -->
            {{# for(issue of this.issuesWithPercentComplete) }}
                <div on:click='this.showTooltip(scope.event, issue)' 
                    class='pointer border-y-solid-1px-white text-right {{this.classForSpecialStatus(issue.dateData.rollup.status)}} truncate max-w-96 {{this.textSize}}'>
                    {{issue.Summary}}
                </div>
                <div style="grid-column: 2" class="{{this.textSize}} text-right pointer"
                    on:click="this.showPercentCompleteTooltip(scope.event, issue)">{{this.getPercentComplete(issue)}}
                </div>
                {{ this.getReleaseTimeline(issue, scope.index) }}
            {{/ for }}
        </div>
    `);de(Vu,"props",{breakdown:Boolean,showPercentComplete:{get default(){return!!localStorage.getItem("showPercentComplete")}}});customElements.define("gantt-grid",Vu);const kd=864e5;function vx(e){const t=e.cloneNode(!0),n=document.createElement("div");n.appendChild(t),Object.assign(n.style,{position:"absolute",top:"-1000px",left:"-1000px",width:"700px",visibility:"hidden"}),document.body.appendChild(n);const r=t.getBoundingClientRect().width;return document.body.removeChild(n),r}function gx(e,t){return e.start<t.end&&t.start<e.end}customElements.define("gantt-timeline",(Da=class extends Ke{get quartersAndMonths(){const e=this.issues.map(r=>({dateData:{rollup:{start:r.dateData.rollup.due,startFrom:r.dateData.rollup.dueTo,due:r.dateData.rollup.due,dueTo:r.dateData.rollup.dueTo}}})),{start:t,due:n}=ln(e);return Mv(new Date((t||new Date).getTime()-30*kd),n||new Date(new Date().getTime()+30*kd))}get todayMarginLeft(){const{firstDay:e,lastDay:t}=this.quartersAndMonths,n=t-e;return(new Date-e-1728e5)/n*100}get calendarData(){const{start:e,due:t}=ln(this.issues);return function(n,r){const a=new Date(n.getFullYear(),3*Math.floor(n.getMonth()/3));let o="";const i=_v(a,new Date(r.getFullYear(),3*Math.floor(r.getMonth()/3)+3)),s=i/3;function u(l){return l.toLocaleString("default",{month:"short"})}Number.isInteger(s)||console.warn("Not an even number of quarters",i,"/ 3");for(let l=0;l<s;l++){const f=new Date(a);f.setMonth(f.getMonth()+3*l);const p=new Date(a);p.setMonth(p.getMonth()+3*l+1);const v=new Date(a);v.setMonth(v.getMonth()+3*+l+2),o+=`
			<div class="calendar">
				<div class="calendar_title">Q${Math.floor(f.getMonth()/3)+1}</div>
				<div class="calendar_month_wrapper">
					<div class="calendar_month ">
						<span class="calendar_month_name">${u(f)}</span>
						<span class="calendar_month_line"></span>
					</div>
					<div class="calendar_month dotted-left">
						<span class="calendar_month_name">${u(p)}</span>
						<span class="calendar_month_line"></span>
					</div>
					<div class="calendar_month dotted-left">
						<span class="calendar_month_name">${u(v)}</span>
						<span class="calendar_month_line"></span>
					</div>
				</div>
			</div>
		`}const c=new Date(n);return c.setMonth(c.getMonth()+i),{html:o,firstDay:a,lastDay:c}}(new Date,t)}get calendarHTML(){return Bn.safeString(this.calendarData.html)}get rows(){const{firstDay:e,lastDay:t}=this.quartersAndMonths,n=t-e,r=function(a){let{widthOfArea:o=1230,issues:i,makeElementForIssue:s,firstDay:u,totalTime:c,getWidth:l=vx}=a;const f=[],p=i.map(g=>{const h=s(g),m=l(h),w=100*m/o,y=Math.ceil((g.dateData.rollup.due-u)/c*100),k=y-w;return h.setAttribute("measured-width",m),h.setAttribute("left-p",k),h.setAttribute("right-p",k),{issue:g,element:h,widthInPercent:w,leftPercentStart:k,rightPercentEnd:y}});function v(g){for(let h of f)if(!h.items.some(m=>gx({start:m.leftPercentStart,end:m.rightPercentEnd},{start:g.leftPercentStart,end:g.rightPercentEnd})))return void h.items.push(g);f.push({items:[g]})}return p.sort((g,h)=>g.leftPercentStart-h.leftPercentStart),p.forEach(v),f}({issues:this.issues,firstDay:e,totalTime:n,makeElementForIssue:function(a){const o=document.createElement("div");o.className=" release-timeline-item flex items-center gap-1",Object.assign(o.style,{position:"absolute",padding:"2px 4px 2px 4px",zIndex:"100",top:"4px",background:"rgba(255,255,255, 0.6)"});const i=document.createElement("div");i.className="truncate",Object.assign(i.style,{position:"relative",zIndex:"10",maxWidth:"300px"}),i.appendChild(document.createTextNode(a.shortVersion||a.Summary)),o.appendChild(i);const s=document.createElement("div");return s.className="color-text-and-bg-"+a.dateData.rollup.status,Object.assign(s.style,{height:"10px",width:"10px",transform:"rotate(45deg)"}),o.appendChild(s),o}});for(let a of r)for(let o of a.items)o.element.style.right=(n-(o.issue.dateData.rollup.due-e))/n*100+"%";return r}plus(e,t){return e+t}lastRowBorder(e){return e===this.quartersAndMonths.months.length-1?"border-r-solid-1px-slate-900":""}},de(Da,"view",`
        <div style="display: grid; grid-template-columns: repeat({{this.quartersAndMonths.months.length}}, auto); grid-template-rows: auto auto repeat({{this.rows.length}}, auto)"
        class='p-2 mb-10'>

            {{# for(quarter of this.quartersAndMonths.quarters) }}
                <div style="grid-column: span 3" class="text-center">{{quarter.name}}</div>
            {{ / for }}

            {{# for(month of this.quartersAndMonths.months)}}
                <div 
                    style="grid-column: {{ plus(scope.index, 1) }} / span 1; grid-row: 2 / span 1;"
                    class='border-b border-neutral-80 text-center'>{{month.name}}</div>
            {{/ for }}

            <!-- CURRENT TIME BOX -->
            <div style="grid-column: 1 / span {{this.quartersAndMonths.months.length}}; grid-row: 2 / span {{plus(this.rows.length, 1)}};">
                <div class='today' style="margin-left: {{this.todayMarginLeft}}%; width: 1px; background-color: orange; z-index: 0; position: relative; height: 100%;"></div>
            </div>

            <!-- VERTICAL COLUMNS -->
            {{# for(month of this.quartersAndMonths.months)}}
                <div style="grid-column: {{ plus(scope.index, 1) }} / span 1; grid-row: 3 / span {{this.rows.length}}; z-index: 10"
                    class='border-l border-b border-neutral-80 {{this.lastRowBorder(scope.index)}}'></div>
            {{/ for }}

            
            {{# for(row of this.rows) }}
            <div class="h-10 relative" style="grid-column: 1 / span {{this.quartersAndMonths.months.length}}; grid-row: {{plus(scope.index, 3)}} / span 1;">
                {{# for(item of row.items) }}
                    {{{item.element}}}
                {{/ for }}
            </div>
            {{/ for }}

            
        </div>
    `),Da));const vi="flex gap-2 text-neutral-800 text-sm";class Av extends Ke{get columnDensity(){return this.primaryIssues.length>20?"absurd":this.primaryIssues.length>10?"high":this.primaryIssues.length>4?"medium":"light"}prettyDate(t){return t?Cv.format(t):""}wasReleaseDate(t){const n=t.due,r=t.lastPeriod&&t.lastPeriod.due;return r&&n-id>r?" ("+this.prettyDate(r)+")":""}wasStartDate(t){const n=t.start,r=t.lastPeriod&&t.lastPeriod.start;return r&&n-id>r?" ("+this.prettyDate(r)+")":""}showTooltip(t,n){Pv(t.currentTarget,n)}fontSize(t){return["high","absurd"].includes(this.columnDensity)?"text-xs":t>=7&&this.columnDensity==="medium"?"text-sm":t<=4?"text-base":void 0}}de(Av,"view",`
    <div class='release_wrapper {{# if(this.breakdown) }}extra-timings{{else}}simple-timings{{/ if}} px-2 flex gap-2'>
        {{# for(primaryIssue of this.primaryIssues) }}
            <div class='release_box grow'>
                <div 
                    on:click='this.showTooltip(scope.event, primaryIssue)'
                    class="pointer release_box_header_bubble color-text-and-bg-{{primaryIssue.dateData.rollup.status}} rounded-t {{this.fontSize(0)}}">
                        {{primaryIssue.Summary}}
                    </div>
                
                    {{# if(this.breakdown) }}

                            <div class="${vi} pt-1">
                                    <span class="release_box_subtitle_key color-text-and-bg-{{primaryIssue.dateData.dev.status}} font-mono px-px">Dev</span>
                                    <span class="release_box_subtitle_value">
                                        {{ this.prettyDate(primaryIssue.dateData.dev.due) }}{{this.wasReleaseDate(primaryIssue.dateData.dev) }}
                                    </span>
                            </div>
                            <div class="${vi}">
                                    <span class="release_box_subtitle_key color-text-and-bg-{{primaryIssue.dateData.qa.status}} font-mono px-px">QA&nbsp;</span>
                                    <span class="release_box_subtitle_value">
                                        {{ this.prettyDate(primaryIssue.dateData.qa.due) }}{{ this.wasReleaseDate(primaryIssue.dateData.qa) }}
                                    </span>
                            </div>
                            <div class="${vi}">
                                    <span class="release_box_subtitle_key color-text-and-bg-{{primaryIssue.dateData.uat.status}} font-mono px-px">UAT</span>
                                    <span class="release_box_subtitle_value">
                                        {{ this.prettyDate(primaryIssue.dateData.uat.due) }}{{ this.wasReleaseDate(primaryIssue.dateData.uat) }}
                                    </span>
                            </div>
                    {{ else }}
                        <div class="${vi} p-1">
                                <b>Target Delivery</b>
                                <span class="release_box_subtitle_value">
                                    <span class="nowrap">{{ this.prettyDate(primaryIssue.dateData.rollup.due) }}</span>
                                    <span class="nowrap">{{ this.wasReleaseDate(primaryIssue.dateData.rollup) }}</span>
                                </span>
                        </div>
                    {{/ if }}

                <ul class=" {{# if(this.breakdown) }}list-none{{else}}list-disc list-inside p-1{{/if}}">
                    {{# for(secondaryIssue of primaryIssue.dateData.children.issues) }}
                    <li class='font-sans {{this.fontSize(primaryIssue.dateData.children.issues.length)}} pointer' on:click='this.showTooltip(scope.event, secondaryIssue)'>
                        {{# if(this.breakdown) }}
                        <span class='text-xs font-mono px-px py-0 color-text-and-bg-{{secondaryIssue.dateData.dev.status}}'>D</span><span
                            class='text-xs font-mono px-px py-0 color-text-and-bg-{{secondaryIssue.dateData.qa.status}}'>Q</span><span
                            class='text-xs font-mono px-px py-0 color-text-and-bg-{{secondaryIssue.dateData.uat.status}}'>U</span>
                        {{/ if }}
                        <span class="{{# if(this.breakdown) }} color-text-black{{else}} color-text-{{secondaryIssue.dateData.rollup.status}} {{/ }}">{{secondaryIssue.Summary}}</span>
                    </li>
                    {{/ for}}
                </ul>
            </div>
        {{ else }}
        <div class='release_box'>
            <div class="release_box_header_bubble">
                Unable to find any issues.
            </div>
        </div>
        {{/ for }}
        {{# if(this.planningIssues.length) }}
            <div class='release_box grow'>
                <div class="release_box_header_bubble color-text-and-bg-unknown rounded-t">Planning</div>
                <ul class="list-disc list-inside p-1">
                {{# for(planningIssue of this.planningIssues)}}
                    <li class='font-sans {{this.fontSize(this.planningIssues.length)}} color-text-unknown pointer'
                         on:click='this.showTooltip(scope.event, planningIssue)'>
                        {{planningIssue.Summary}}
                    </li>

                {{/}}
                </ul>
            </div>
        {{/ }}
        
    </div>
    `);customElements.define("status-report",Av);const mx={Epic:1,Story:0,Initiative:2};function yx(e){return e.map(n=>({...n,fields:{...n,"Parent Link":{data:n["Parent Link"]},"Issue Type":{name:n["Issue Type"],hierarchyLevel:mx[n["Issue Type"]]}},key:n["Issue key"]}))}function xd(e){return e instanceof Promise?e:d.getValue(e)}function bx(e,t){let{rawIssuesRequestData:n,configurationPromise:r}=e,{listenTo:a,resolve:o}=t;const i=Rt.returnedBy(function(){if(n.value.issuesPromise&&r.value)return Promise.all([n.value.issuesPromise,r.value]).then(s=>{let[u,c]=s;return console.log({rawIssues:u}),u.map(l=>{const f=function(p){let{getIssueKey:v=_k,getParentKey:g=Mk,getConfidence:h=Lk,getDueDate:m=Ok,getHierarchyLevel:w=Pk,getStartDate:y=Ak,getStoryPoints:k=Vk,getStoryPointsMedian:E=Rk,getType:S=Kk,getTeamKey:I=jk,getUrl:V=qk,getVelocity:D=Bk,getDaysPerSprint:L=Ck,getParallelWorkLimit:_=zk,getSprints:A=Hk,getStatus:H=Uk,getLabels:te=Fk,getReleases:ae=Wk}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const ve=I(p),pe=D(ve),B=L(ve),le=_(ve),ge=pe/B,Me=ge/le;return{summary:p.fields.Summary,key:v(p),parentKey:g(p),confidence:h(p),dueDate:rd(m(p)),hierarchyLevel:w(p),startDate:rd(y(p)),storyPoints:k(p),storyPointsMedian:E(p),type:S(p),sprints:A(p),team:{name:ve,velocity:pe,daysPerSprint:B,parallelWorkLimit:le,totalPointsPerDay:ge,pointsPerDayPerTrack:Me},url:V(p),status:H(p),labels:te(p),releases:ae(p),issue:p}}(l,c);return $k(f,c)})});{const s=new Promise(()=>{});return s.__isAlwaysPending=!0,s}});a(i,s=>{o({issuesPromise:s,progressData:n.value.progressData})}),o({issuesPromise:i.value,progressData:n.value.progressData})}const Xn={parse:e=>({"":!0,true:!0,false:!1})[e],stringify:e=>""+e},Ed="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500";class Nu extends Ke{connected(){this.listenTo("percentComplete",()=>{})}updateCalculationType(t,n){const r=[...gr(this.primaryIssueType,this.allTimingCalculationOptions.map,this.timingCalculations)].slice(0,t+1);r[t].type=n,this.timingCalculations=r}updateCalculation(t,n){const r=[...gr(this.primaryIssueType,this.allTimingCalculationOptions.map,this.timingCalculations)].slice(0,t+1);r[t].calculation=n,this.timingCalculations=r}paddingClass(t){return"pl-"+2*t}}de(Nu,"view",`
        <p>
            Questions on the options? 
            <a class="link" href="https://github.com/bitovi/jira-timeline-report/tree/main?tab=readme-ov-file#getting-started">Read the guide</a>, or 
            <a class="link" href="https://github.com/bitovi/jira-timeline-report/tree/main?tab=readme-ov-file#need-help-or-have-questions">connect with us</a>.
        </p>  
        <h3 class="h3">Issue Source</h3>
        <p>Specify a JQL that loads all issues you want to report on and help determine the timeline of your report.</p>
        <p>
            {{# if(this.isLoggedIn) }}
            <input class="w-full-border-box mt-2 form-border p-1" value:bind='this.jql'/>
            {{ else }}
            <input class="w-full-border-box mt-2 form-border p-1 text-yellow-300" value="Sample data. Connect to Jira to specify." disabled/>
            {{/ if}}
        </p>
        {{# if(this.rawIssuesRequestData.issuesPromise.isPending) }}
            {{# if(this.rawIssuesRequestData.progressData.issuesRequested)}}
            <p class="text-xs text-right">Loaded {{this.rawIssuesRequestData.progressData.issuesReceived}} of {{this.rawIssuesRequestData.progressData.issuesRequested}} issues</p>
            {{ else }}
            <p class="text-xs text-right">Loading issues ...</p>
            {{/ if}}
        {{/ if }}
        {{# if(this.rawIssuesRequestData.issuesPromise.isRejected) }}
            <div class="border-solid-1px-slate-900 border-box block overflow-hidden color-text-and-bg-blocked p-1">
            <p>There was an error loading from Jira!</p>
            <p>Error message: {{this.rawIssuesRequestData.issuesPromise.reason.errorMessages[0]}}</p>
            <p>Please check your JQL is correct!</p>
            </div>
        {{/ if }}
        <div class="flex justify-between mt-1">

            <p class="text-xs"><input type='checkbox' 
            class='self-start align-middle' checked:bind='this.loadChildren'/> <span class="align-middle">Load all children of JQL specified issues</span>
            </p>
            
            {{# if(this.rawIssuesRequestData.issuesPromise.isResolved) }}
            <p class="text-xs">Loaded {{this.rawIssuesRequestData.issuesPromise.value.length}} issues</p>
            {{/ if }}
        </div>
        

        <h3 class="h3 mt-4">Primary Timeline</h3>
        <div class="flex mt-2 gap-2 flex-wrap">
            {{# if(this.allTimingCalculationOptions) }}
            <p>What Jira artifact do you want to report on?</p>
            <div class="shrink-0">
            {{# for(issueType of this.allTimingCalculationOptions.list) }}
            <label class="px-2"><input 
                type="radio" 
                name="primaryIssueType" 
                checked:from="eq(this.primaryIssueType, issueType.type)"
                on:change="this.primaryIssueType = issueType.type"/> {{issueType.plural}} </label>
            {{/ }}
            </div>
            {{/ if }}
            
            
        </div>

        <div class="flex mt-2 gap-2 flex-wrap">
            <p>What timing data do you want to report?</p>
            <div class="shrink-0">
            <label class="px-2"><input 
                type="radio" 
                name="primaryReportType"
                checked:from="eq(this.primaryReportType, 'start-due')"
                on:change="this.primaryReportType = 'start-due'"
                /> Start and due dates </label>
            <label class="px-2"><input 
                type="radio" 
                name="primaryReportType"
                checked:from="eq(this.primaryReportType, 'due')"
                on:change="this.primaryReportType = 'due'"
                /> Due dates only</label>
            <label class="px-2"><input 
                type="radio" 
                name="primaryReportType"
                checked:from="eq(this.primaryReportType, 'breakdown')"
                on:change="this.primaryReportType = 'breakdown'"
                /> Work breakdown</label>
            </div>
        </div>

        <div class="flex mt-2 gap-2 flex-wrap">
            <p>Do you want to report on completion percentage?</p>
            <input type='checkbox' 
                class='self-start mt-1.5'  checked:bind='this.showPercentComplete'/>
        </div>


        <h3 class="h3">Timing Calculation</h3>
        <div class="grid gap-2 my-2" style="grid-template-columns: auto auto auto;">
            <div class="text-sm py-1 text-slate-600 font-semibold" style="grid-column: 1 / span 1; grid-row: 1 / span 1;">Parent Type</div>
            <div class="text-sm py-1 text-slate-600 font-semibold" style="grid-column: 2 / span 1; grid-row: 1 / span 1;">Child Type</div>
            <div class="text-sm py-1 text-slate-600 font-semibold" style="grid-column: 3 / span 1; grid-row: 1 / span 1;">How is timing calculated between parent and child?</div>
            <div class="border-b-2 border-neutral-40" style="grid-column: 1 / span 3; grid-row: 1 / span 1;"></div>

            {{# for(timingLevel of this.timingLevels) }}

                <label class="pr-2 py-2 {{ this.paddingClass(scope.index) }}">{{timingLevel.type}}</label>
                {{# eq(timingLevel.types.length, 1) }}
                <span class="p-2">{{timingLevel.types[0].type}}</span>
                {{ else }}
                <select class="${Ed}" on:change="this.updateCalculationType(scope.index, scope.element.value)">
                    {{# for(type of timingLevel.types) }}
                    <option {{# if(type.selected) }}selected{{/ if }}>{{type.type}}</option>
                    {{/ for }}
                </select>
                {{/ eq}}

                <select class="${Ed}" on:change="this.updateCalculation(scope.index, scope.element.value)">
                {{# for(calculation of timingLevel.calculations) }}
                    <option {{# if(calculation.selected) }}selected{{/ if }} value="{{calculation.calculation}}">{{calculation.name}}</option>
                {{/ for }}
                </select>

            {{/ for }}
            
        </div>
        {{# if(this.primaryIssueType) }}
        <h3 class="h3">Filters</h3>

        <div class="grid gap-3" style="grid-template-columns: max-content max-content 1fr">

            <label class=''>Hide Unknown {{this.primaryIssueType}}s</label>
            <input type='checkbox' 
            class='self-start mt-1.5' checked:bind='this.hideUnknownInitiatives'/>
            <p class="m-0">Hide {{this.primaryIssueType}}s whose timing can't be determined.
            </p>

            <label>{{this.firstIssueTypeWithStatuses}} Statuses to Report</label>
            <status-filter 
                statuses:from="this.statuses"
                param:raw="statusesToShow"
                selectedStatuses:to="this.statusesToShow"
                style="max-width: 400px;">
            </status-filter>
            <p>Only include these statuses in the report</p>

            <label>{{this.firstIssueTypeWithStatuses}} Statuses to Ignore</label>
            <status-filter 
                statuses:from="this.statuses" 
                param:raw="statusesToRemove"
                selectedStatuses:to="this.statusesToRemove"
                style="max-width: 400px;">
                </status-filter>
            <p>Search for statuses to remove from the report</p>

            {{# eq(this.primaryIssueType, "Release") }}
            <label class=''>Show Only Semver Releases</label>
            <input type='checkbox' 
                class='self-start mt-1.5'  checked:bind='this.showOnlySemverReleases'/>
            <p class="m-0">This will only include releases that have a structure like <code>[NAME]_[D.D.D]</code>. Examples:
            <code>ACME_1.2.3</code>, <code>ACME_CHECKOUT_1</code>, <code>1.2</code>.
            </p>
            {{/ }}


        </div>
        {{/ if }}

        <h3 class="h3">Sorting</h3>
        <div class="grid gap-3" style="grid-template-columns: max-content max-content 1fr">
            <label class=''>Sort by Due Date</label>
            <input type='checkbox' 
                class='self-start mt-1.5' checked:bind='this.sortByDueDate'/>
            <p class="m-0">Instead of ordering initiatives based on the order defined in the JQL, 
            sort initiatives by their last epic's due date.
            </p>
        </div>

        <h3 class="h3">Secondary Status Report</h3>
        <div class="flex mt-2 gap-2 flex-wrap">
            <p>Secondary Report Type</p>
            <div class="shrink-0">
            <label class="px-2"><input 
                type="radio" 
                name="secondary" 
                checked:from="eq(this.secondaryReportType, 'none')"
                on:change="this.secondaryReportType = 'none'"
                /> None </label>
                
            <label class="px-2"><input 
                type="radio" 
                name="secondary" 
                checked:from="eq(this.secondaryReportType, 'status')"
                on:change="this.secondaryReportType = 'status'"
                /> {{this.secondaryIssueType}} status </label>
            
            {{# not(eq(this.secondaryIssueType, "Story") ) }}
            <label class="px-2"><input 
                type="radio" 
                name="secondary" 
                checked:from="eq(this.secondaryReportType, 'breakdown')"
                on:change="this.secondaryReportType = 'breakdown'"
                /> {{this.secondaryIssueType}} work breakdown </label>
            {{/ not }}
            </div>
        </div>
        {{# if(this.firstIssueTypeWithStatuses) }}
        <div class="flex gap-2 mt-1">
            <label>{{this.firstIssueTypeWithStatuses}} statuses to show as planning:</label>
            <status-filter 
            statuses:from="this.statuses" 
            param:raw="planningStatuses"
            selectedStatuses:to="this.planningStatuses"
            style="max-width: 400px;"></status-filter>
        </div>
        {{/ if}}`);de(Nu,"props",{jql:Nt("jql","",String,{parse:e=>""+e,stringify:e=>""+e}),loadChildren:Nt("loadChildren",!1,Boolean,Xn),secondaryReportType:Nt("secondaryReportType","none",String,{parse:e=>""+e,stringify:e=>""+e}),primaryReportType:Nt("primaryReportType","start-due",String,{parse:e=>""+e,stringify:e=>""+e}),showPercentComplete:Nt("showPercentComplete",!1,Boolean,Xn),sortByDueDate:Nt("sortByDueDate",!1,Boolean,Xn),hideUnknownInitiatives:Nt("hideUnknownInitiatives",!1,Boolean,Xn),rawIssuesRequestData:{value(e){let{listenTo:t,resolve:n}=e;return function(r,a){let{jql:o,isLoggedIn:i,loadChildren:s,jiraHelpers:u}=r,{listenTo:c,resolve:l}=a;const f=Rt.with(null),p=Rt.returnedBy(function(){return i.value!==!1&&o.value?(f.value=null,(s.value?u.fetchAllJiraIssuesAndDeepChildrenWithJQLAndFetchAllChangelogUsingNamedFields.bind(u):u.fetchAllJiraIssuesWithJQLAndFetchAllChangelogUsingNamedFields.bind(u))({jql:o.value,fields:["summary","Rank","Start date","Due date","Issue Type","Fix versions","Story points","Story points median","Confidence","Story points confidence","Product Target Release","Labels","Status","Sprint","Epic Link","Created","Parent"],expand:["changelog"]},v=>{f.value={...v}})):Iv(new Date).then(yx)});c(p,v=>{l({progressData:f,issuesPromise:v})}),l({progressData:f,issuesPromise:p.value})}({jql:Rt.from(this,"jql"),loadChildren:Rt.from(this,"loadChildren"),isLoggedIn:Rt.from(this,"isLoggedIn"),jiraHelpers:this.jiraHelpers},{listenTo:t,resolve:n})}},get serverInfoPromise(){return this.jiraHelpers.getServerInfo()},get configurationPromise(){return function(e){let{serverInfoPromise:t,teamConfigurationPromise:n}=e;const r=xd(t),a=xd(n);return r&&a?Promise.all([r,a]).then(o=>{let[i,s]=o;return{getConfidence:u=>{let{fields:c}=u;return c.Confidence},getStoryPointsMedian:u=>{let{fields:c}=u;return c["Story points median"]},getUrl:u=>{let{key:c}=u;return i.baseUrl+"/browse/"+c},getVelocity:u=>s.getVelocityForTeam(u),getDaysPerSprint:u=>s.getDaysPerSprintForTeam(u),getParallelWorkLimit:u=>s.getTracksForTeam(u)}}):new Promise(()=>{})}({teamConfigurationPromise:this.teamConfigurationPromise,serverInfoPromise:this.serverInfoPromise})},derivedIssuesRequestData:{value(e){let{listenTo:t,resolve:n}=e;return bx({rawIssuesRequestData:Rt.from(this,"rawIssuesRequestData"),configurationPromise:Rt.from(this,"configurationPromise")},{listenTo:t,resolve:n})}},get derivedIssuesPromise(){return this.derivedIssuesRequestData.issuesPromise},derivedIssues:{async(){return this.derivedIssuesRequestData.issuesPromise}},get statuses(){return this.derivedIssues?(console.log("here"),function(e){const t=e.map(n=>n.status);return[...new Set(t)].sort()}(this.derivedIssues)):[]},allTimingCalculationOptions:{async(e){if(this.derivedIssuesRequestData.issuesPromise)return this.derivedIssuesRequestData.issuesPromise.then(t=>rx(t))}},primaryIssueType:{value(e){let{resolve:t,lastSet:n,listenTo:r}=e,a=new URL(window.location).searchParams.get("primaryIssueType");function o(i,s){i&&i.list.length>1?i.map[s]?t(s):(Vn("primaryIssueType","",""),t(a=i.list[1].type)):t(void 0)}r("allTimingCalculationOptions",i=>{let{value:s}=i;o(s,a)}),r(n,i=>{(function(s){a=s,Vn("primaryIssueType",s,""),t(s)})(i)}),o(this.allTimingCalculationOptions,a)}},timingCalculations:{value(e){let{resolve:t,lastSet:n,listenTo:r}=e,a;function o(s){if(typeof s=="string")try{s=function(u){return u.split(",").map(c=>{const l=c.split(":");return{type:l[0],calculation:l[1]}}).flat()}(s)}catch{s=[]}else s||(s=[]);Vn("timingCalculations",i(s),i([])),a=s,t(a)}function i(s){return s.map(u=>u.type+":"+u.calculation).join(",")}o(new URL(window.location).searchParams.get("timingCalculations")),r(n,s=>{o(s)}),r("primaryIssueType",()=>{o([])})}},get firstIssueTypeWithStatuses(){if(this.primaryIssueType){if(this.primaryIssueType!=="Release")return this.primaryIssueType;{const e=gr(this.primaryIssueType,this.allTimingCalculationOptions.map,this.timingCalculations);return e[0].type!=="Release"?e[0].type:e[1].type}}},get secondaryIssueType(){if(this.primaryIssueType){const e=gr(this.primaryIssueType,this.allTimingCalculationOptions.map,this.timingCalculations);if(e.length)return e[0].type}},get timingCalculationMethods(){if(this.primaryIssueType)return gr(this.primaryIssueType,this.allTimingCalculationOptions.map,this.timingCalculations).map(e=>e.calculation)},get timingLevels(){if(this.primaryIssueType)return function(e,t,n){const r=e[t];let a=t,o=r.timingCalculations;const i=[],s=[...n];for(;o.length;){let u=s.shift()||{type:o[0].child,calculation:o[0].calculations[0].calculation},c=o.find(f=>u.type===f.child),l={type:a,types:o.map(f=>({type:f.child,selected:u?.type===f.child})),calculations:c.calculations.map(f=>({...f,selected:f.calculation===u.calculation}))};i.push(l),a=u.type,o=e[u.type].timingCalculations}return i}(this.allTimingCalculationOptions.map,this.primaryIssueType,this.timingCalculations)},showOnlySemverReleases:Nt("showOnlySemverReleases",!1,Boolean,Xn),planningStatuses:{get default(){return[]}},statusesToRemove:{get default(){return[]}},statusesToShow:{get default(){return[]}}});customElements.define("timeline-configuration",Nu);class Ru extends Ke{async connected(){lu()}get releasesAndInitiativesWithPriorTiming(){if(!this.csvIssues||!this.timingCalculationMethods)return{releases:[],initiatives:[]};let t=this.statusesToRemove,n=this.statusesToShow;const r=this.primaryIssueType==="Release"?this.secondaryIssueType:this.primaryIssueType,a=this.timingCalculationMethods;this.primaryIssueType==="Release"&&a.shift();const o={baseIssues:this.csvIssues,priorTime:new Date(new Date().getTime()-this.compareToTime.timePrior),reportedStatuses:function(c){return!(n&&n.length&&!n.includes(c))&&!t.includes(c)},getChildWorkBreakdown:wx,reportedIssueType:r,timingMethods:a},{releases:i,initiatives:s}=ix(o);function u(c){return c.dateData.rollup.start<c.dateData.rollup.due}return this.hideUnknownInitiatives?{initiatives:s.filter(u),releases:i.map(c=>({...c,initiatives:c.dateData.rollup.issues.filter(u)}))}:{releases:i,initiatives:s}}get initiativesWithAStartAndEndDate(){var t=this.releasesAndInitiativesWithPriorTiming.initiatives;return this.sortByDueDate&&(t=t.toSorted((n,r)=>n.dateData.rollup.due-r.dateData.rollup.due)),t}get sortedIncompleteReleasesInitiativesAndEpics(){const t=this.releasesAndInitiativesWithPriorTiming.releases;return this.showOnlySemverReleases?ax(t):t.map(n=>({...n,shortName:n.release,version:n.release,shortVersion:n.release})).sort((n,r)=>n.dateData.rollup.due-r.dateData.rollup.due)}get releases(){if(this.csvIssues)return this.sortedIncompleteReleasesInitiativesAndEpics}get primaryIssues(){return this.primaryIssueType==="Release"?this.releases:this.initiativesWithAStartAndEndDate}get planningIssues(){if(!this.csvIssues)return[];const t=this.primaryIssueType==="Release"?this.secondaryIssueType:this.primaryIssueType;return function(n,r,a){return n.filter(o=>o["Issue Type"]===r&&a.includes(o.Status))}(this.csvIssues,t,this.planningStatuses||[])}showDebug(t){this.showingDebugPanel=t}toggleConfiguration(){this.showingConfiguration=!this.showingConfiguration;const t=document.getElementById("configuration").clientWidth;document.querySelector(".left-config-width").style.left=t+16+"px"}}de(Ru,"view",`
      <div 
          class="drop-shadow-lg
          fixed left-0 z-50 overflow-auto
          top-fullish-vh height-fullish-vh 
          bg-white flex max-w-4xl" id="configuration">
        
        <timeline-configuration
          class="border-gray-100 p-4 relative {{# not(this.showingConfiguration) }}hidden{{/}} block" 
          style="border-top-width: 32px;overflow-y: auto"
          isLoggedIn:from="this.loginComponent.isLoggedIn"
          jiraHelpers:from="this.jiraHelpers"
          teamConfigurationPromise:from="this.velocitiesConfiguration.teamConfigurationPromise"

          jql:to="this.jql"
          derivedIssuesRequestData:to="this.derivedIssuesRequestData"

          showOnlySemverReleases:to="this.showOnlySemverReleases"
          statusesToRemove:to="this.statusesToRemove"
          statusesToShow:to="this.statusesToShow"

          secondaryReportType:to="this.secondaryReportType"
          timingCalculationMethods:to="this.timingCalculationMethods"
          primaryReportType:to="this.primaryReportType"
          secondaryReportType:to="this.secondaryReportType"

          primaryIssueType:to="this.primaryIssueType"
          secondaryIssueType:to="this.secondaryIssueType"
          hideUnknownInitiatives:to="this.hideUnknownInitiatives"
          sortByDueDate:to="this.sortByDueDate"
          showPercentComplete:to="this.showPercentComplete"
          ></timeline-configuration>

        <div on:click="this.toggleConfiguration()"
          class="w-8 hover:bg-gray-200 cursor-pointer bg-gray-100 ">
        
          {{#not(this.showingConfiguration)}}
            <p class="-rotate-90 w-40 absolute" style="top: 40%; left: -65px">Configure</p>

            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-8 h-8 mt-px">
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>

          {{ else }}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-8 h-8 mt-px">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
            </svg>
        
          {{/}}

        </div>

      </div>
        <div class="w-1280 fullish-vh pt-4 left-config-width {{#this.showingConfiguration}}relative {{else}}place-center{{/}}">

        {{# not(this.loginComponent.isLoggedIn) }}

          <div class="p-4 mb-4 drop-shadow-md hide-on-fullscreen bg-yellow-300">
            <p>The following is a sample report. Learn more about it in the 
              "<a class="text-blue-400" href="https://www.bitovi.com/academy/learn-agile-program-management-with-jira/reporting.html">Agile Program Management with Jira</a>" 
              training. Click "Connect to Jira" to load your own data.</p>
            <p class="mt-2">Checkout the following sample reports:</p>
            <ul class="list-disc list-inside ml-2">
              <li><a class="text-blue-400" href="?primaryIssueType=Release&hideUnknownInitiatives=true&primaryReportType=due&secondaryReportType=status">Release end dates with initiative status</a></li>
              <li><a class="text-blue-400" href="?primaryIssueType=Release&hideUnknownInitiatives=true&secondaryReportType=breakdown">Release timeline with iniative work breakdown</a></li>
              <li><a class="text-blue-400" href="?primaryIssueType=Initiative&hideUnknownInitiatives=true&statusesToShow=Development%2CReady&primaryReportType=breakdown">Ready and in-development initiative work breakdown</a></li>
            </ul>

          </div>
      {{/ not }}

          <div class='p-4 rounded-lg-gray-100-on-white mb-4 drop-shadow-md color-bg-white'>
            <p><label class="inline font-bold">Compare to {{this.compareToTime.text}}</label>
            - Specify what timepoint to use to determine if an initiative or release has fallen behind.</p>
            <input class="w-full-border-box" type='range' valueAsNumber:bind:on:input='this.timeSliderValue' min="0" max="100"/>
          </div>

          


          {{# and( not(this.jql), this.loginComponent.isLoggedIn  }}
            <div class="my-2 p-2 h-780 border-solid-1px-slate-900 border-box block overflow-hidden color-bg-white drop-shadow-md">Configure a JQL in the sidebar on the left to get started.</div>
          {{ /and }}

          {{# and(this.cvsIssuesPromise.value, this.releases) }}
            <div class="my-2  border-solid-1px-slate-900 border-box block overflow-hidden color-bg-white drop-shadow-md">
            
              {{# or( eq(this.primaryReportType, "start-due"), eq(this.primaryReportType, "breakdown") ) }}
                <gantt-grid 
                    issues:from="this.primaryIssues" 
                    derivedIssues:from="this.derivedIssues"
                    breakdown:from="eq(this.primaryReportType, 'breakdown')"
                    showPercentComplete:from="this.showPercentComplete"></gantt-grid>
              {{ else }}
                <gantt-timeline issues:from="this.primaryIssues"></gantt-timeline>
              {{/ or }}

              {{# or( eq(this.secondaryReportType, "status"), eq(this.secondaryReportType, "breakdown") ) }}
                <status-report primaryIssues:from="this.primaryIssues"
                  breakdown:from="eq(this.secondaryReportType, 'breakdown')"
                  planningIssues:from="this.planningIssues"></status-report>
              {{/ }}

              <div class='p-2'>
                <span class='color-text-and-bg-unknown p-2 inline-block'>Unknown</span>
                <span class='color-text-and-bg-new p-2 inline-block'>New</span>
                <span class='color-text-and-bg-notstarted p-2 inline-block'>Not Started</span>
                <span class='color-text-and-bg-ontrack p-2 inline-block'>On Track</span>
                <span class='color-text-and-bg-ahead p-2 inline-block'>Ahead</span>
                <span class='color-text-and-bg-behind p-2 inline-block'>Behind</span>
                <span class='color-text-and-bg-blocked p-2 inline-block'>Blocked</span>
                <span class='color-text-and-bg-complete p-2 inline-block'>Complete</span>
              </div>
            </div>
          {{/ and }}
          {{# if(this.cvsIssuesPromise.isPending) }}
            <div class="my-2 p-2 h-780 border-solid-1px-slate-900 border-box block overflow-hidden color-bg-white drop-shadow-md">
              <p>Loading ...<p>
              {{# if(this.derivedIssuesRequestData.progressData.issuesRequested)}}
                <p>Loaded {{this.derivedIssuesRequestData.progressData.issuesReceived}} of {{this.derivedIssuesRequestData.progressData.issuesRequested}} issues.</p>
              {{/ }}
            </div>
          {{/ if }}
          {{# if(this.cvsIssuesPromise.isRejected) }}
            <div class="my-2 p-2 h-780 border-solid-1px-slate-900 border-box block overflow-hidden color-text-and-bg-blocked drop-shadow-md">
              <p>There was an error loading from Jira!</p>
              <p>Error message: {{this.cvsIssuesPromise.reason.errorMessages[0]}}</p>
              <p>Please check your JQL is correct!</p>
            </div>
          {{/ if }}
        </div>
  `);de(Ru,"props",{timingCalculationMethods:F.Any,showingDebugPanel:{type:Boolean,default:!1},timeSliderValue:{type:F.convert(Number),default:25},defaultSearch:F.Any,get compareToTime(){if(this.timeSliderValue===0)return{timePrior:0,text:"now"};if(this.timeSliderValue===1)return{timePrior:3e4,text:"30 seconds ago"};if(this.timeSliderValue===2)return{timePrior:6e4,text:"1 minute ago"};if(this.timeSliderValue===3)return{timePrior:5*6e4,text:"5 minutes ago"};if(this.timeSliderValue===4)return{timePrior:6e5,text:"10 minutes ago"};if(this.timeSliderValue===5)return{timePrior:30*6e4,text:"30 minutes ago"};if(this.timeSliderValue===6)return{timePrior:36e5,text:"1 hour ago"};if(this.timeSliderValue===7)return{timePrior:3*36e5,text:"3 hours ago"};if(this.timeSliderValue===8)return{timePrior:6*36e5,text:"6 hours ago"};if(this.timeSliderValue===9)return{timePrior:12*36e5,text:"12 hours ago"};if(this.timeSliderValue===10)return{timePrior:864e5,text:"1 day ago"};{const r=this.timeSliderValue-10;return{timePrior:864e5*r,text:r+" days ago"}}},showingConfiguration:!1,get cvsIssuesPromise(){var e;return this.loginComponent.isLoggedIn===!1?Iv(new Date):(e=this.derivedIssuesRequestData)!==null&&e!==void 0&&e.issuesPromise?this.derivedIssuesRequestData.issuesPromise.then(t=>t.map(Yk)):void 0},csvIssues:{async(){return this.cvsIssuesPromise}},derivedIssues:{async(e){var t;(t=this.derivedIssuesRequestData)===null||t===void 0||t.issuesPromise.then(e)}}});function wx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(function(a){return dd(a,"QA")}(e)),n=new Set(function(a){return dd(a,"UAT")}(e)),r=e.filter(a=>!t.has(a)&&!n.has(a));return{qaWork:t,uatWork:n,devWork:r}}function lu(){const e=function(t){var n=t.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop;return{x:n.left+r,y:n.top+a}}(document.querySelector(".fullish-vh"));document.documentElement.style.setProperty("--fullish-document-top",`${e.y}px`)}customElements.define("timeline-report",Ru),window.addEventListener("load",lu),window.addEventListener("resize",lu);class qu extends Ke{showSavedReports(){document.createElement("div"),this.globalConfigurationsPromise.then(t=>{let{links:n,issue:r,serverInfo:a}=t,o="";o+=r?`
                <div class="divide-y divide-gray-100">
                    <div class="py-2">
                        ${n.map(i=>`
                                    <a href="${i.href}" class="${unescape(i.href)===unescape(window.location)?"":"link"} block py-1">${i.text}</a>
                                `).join("")}
                    </div>
                    <div class="py-2">
                        <a href="${a.baseUrl}/browse/${r.key}" class="link block">Update Saved Reports</a>
                    </div>
                </div>`:'<a href="https://github.com/bitovi/jira-timeline-report/blob/main/docs/saved-reports.md" class="link block">Create Saved Reports</a>',this.simpleTooltip.belowElementInScrollingContainer(this,o),setTimeout(()=>{const i=()=>{this.simpleTooltip.leftElement(),window.removeEventListener("click",i)};window.addEventListener("click",i)},13)})}connected(){const t=new Vr;this.parentNode.append(t),this.simpleTooltip=t}}de(qu,"view",`
        {{# if(this.canQuery) }}
            <button class="text-center inline-flex items-center mr-8 hover:bg-gray-200 bg-gray-100 rounded-lg pt-1 pr-1 pl-2 font-bitovipoppins font-lg"
                on:click="this.showSavedReports()">
                Saved Reports <svg class="w-2.5 h-2.5 ms-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                </svg>
            </button>
        {{/ if}}

    `);de(qu,"props",{jiraHelpers:F.Any,loginComponent:F.Any,get canQuery(){var e;return this.jiraHelpers&&((e=this.loginComponent)===null||e===void 0?void 0:e.isLoggedIn)},get globalConfigurationsPromise(){return this.canQuery?Promise.all([this.jiraHelpers.getServerInfo(),this.jiraHelpers.fetchJiraIssuesWithJQLWithNamedFields({jql:'summary ~ "Jira Timeline Report Configuration"',fields:["summary","Description"]})]).then(e=>{let[t,n]=e;const r=n.find(a=>a.fields.Summary==="Jira Timeline Report Configuration");return r?{issue:r,links:xx(r.fields.Description.content),serverInfo:t}:{links:[]}}):Promise.resolve([])}});function kx(e){if(e.type!=="text")return!1;const t=e?.marks||[],n=t.find(a=>a.type==="link"),r=t.find(a=>a.type==="strong");return n?{text:e.text,href:n.attrs.href,default:!!r}:void 0}function xx(e){return function(t,n){let r=[];function a(o){if(Array.isArray(o))for(const i of o)a(i);else if(typeof o=="object"&&o!==null){const i=n(o);if(i)r.push(i);else for(const s of Object.keys(o))a(o[s])}}return a(t),r}(e,kx)}customElements.define("saved-urls",qu);const Ex=Bn(`<div class="">
    {{# for(resource of this.resources) }}
        <button class="link block" on:click="this.setResource(resource)">{{resource.name}}</button>
    {{/ for }}
</div>`),Us="text-center inline-flex items-center mr-8 bg-gray-100 rounded-lg pt-1 pr-1 font-bitovipoppins font-lg";class ju extends Ke{showResources(){document.createElement("div"),this.alternateResources.then(t=>{this.simpleTooltip.belowElementInScrollingContainer(this,Ex({resources:t,setResource(n){localStorage.setItem("scopeId",n.id),window.location.reload()}})),setTimeout(()=>{const n=()=>{this.simpleTooltip.leftElement(),window.removeEventListener("click",n)};window.addEventListener("click",n)},13)})}connected(){const t=new Vr;this.parentNode.append(t),this.simpleTooltip=t}}de(ju,"view",`
        {{# if(this.alternateResources.isPending) }}
            <div class="${Us}"> ... </div>
        {{/ if }}
        {{# if(this.alternateResources.value.length)}}
            <button class="${Us} pl-2 hover:bg-gray-200"
                on:click="this.showResources()">
                {{# if(this.currentResource.value.name) }}<span>{{this.currentResource.value.name}}</span>{{/if}}
                <svg class="w-2.5 h-2.5 ms-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                </svg>
            </button>
        {{/ if }}
        {{# and(not(this.alternateResources.value.length), this.currentResource.value.name) }}
            <div class="${Us} pl-2">
                {{this.currentResource.value.name}}
            </div>
        {{/and}}

    `);de(ju,"props",{jiraHelpers:F.Any,loginComponent:F.Any,get canQuery(){var e;return this.jiraHelpers&&((e=this.loginComponent)===null||e===void 0?void 0:e.isLoggedIn)},get accessibleResources(){return this.canQuery?this.jiraHelpers.fetchAccessibleResources().then(e=>{const t=localStorage.getItem("scopeId");return e.map(n=>({...n,isCurrent:n.id===t}))}):Promise.resolve([])},get currentResource(){return this.accessibleResources.then(e=>e.find(t=>t.isCurrent))},get alternateResources(){return this.accessibleResources.then(e=>e.filter(t=>!t.isCurrent))}});customElements.define("select-cloud",ju);class Pr extends br{static getTeamConfiguration(t){const n=t.fetchJiraIssuesWithJQLWithNamedFields({jql:'summary ~ "Jira Auto Scheduler Configuration"',fields:["summary","Description"]});return Promise.all([t.getServerInfo(),n]).then(r=>{let[a,o]=r;const i=o.find(s=>s.fields.Summary==="Jira Auto Scheduler Configuration");return new Pr(i?{issue:{...i,url:a.baseUrl+"/browse/"+i.key}}:{issue:null})})}get _issueConfig(){if(this.issue){const t=function(n,r){let a=[];function o(i){if(Array.isArray(i))for(const s of i)o(s);else if(typeof i=="object"&&i!==null){const s=r(i);if(s)a.push(s);else for(const u of Object.keys(i))o(i[u])}}return o(n),a}(this.issue.fields.Description.content,Lx);if(t.length)return function(n){const r={};for(let a of n){const o={};for(let i in a){let s=i in Dd?Dd[i]:i;o[s]=Dx.includes(s)?+a[i]:a[i]}r[o.name]=o}return r}(t[0])}}getVelocityForTeam(t){var n,r,a;return(n=this.temporaryData)!==null&&n!==void 0&&(n=n[t])!==null&&n!==void 0&&n.velocity?this.temporaryData[t].velocity:(r=this._issueConfig)!==null&&r!==void 0&&(r=r[t])!==null&&r!==void 0&&r.velocity?(a=this._issueConfig)===null||a===void 0?void 0:a[t].velocity:21}setVelocityForTeam(t,n){this.temporaryData[t]?this.temporaryData[t]={...this.temporaryData[t],velocity:n}:this.temporaryData[t]={name:t,velocity:n}}updateConfiguration(){console.log("TODO",this.temporaryData,this._issueConfig)}getDaysPerSprintForTeam(t){return 10}getTracksForTeam(t){var n,r,a;return(n=this.temporaryData)!==null&&n!==void 0&&(n=n[t])!==null&&n!==void 0&&n.tracks?this.temporaryData[t].tracks:(r=this._issueConfig)!==null&&r!==void 0&&(r=r[t])!==null&&r!==void 0&&r.tracks?(a=this._issueConfig)===null||a===void 0?void 0:a[t].tracks:1}addTrackForTeam(t){const n=this.getTracksForTeam(t)+1;this.temporaryData[t]?this.temporaryData[t]={...this.temporaryData[t],tracks:n}:this.temporaryData[t]={name:t,tracks:n}}removeTrackForTeam(t){const n=Math.max(this.getTracksForTeam(t)-1,1);this.temporaryData[t]?this.temporaryData[t]={...this.temporaryData[t],tracks:n}:this.temporaryData[t]={name:t,tracks:n}}}de(Pr,"props",{temporaryData:{get default(){return new br}}});const Dd={velocities:"velocity",track:"tracks","parallel epics":"tracks","sprint length":"sprintLength","sprint days":"sprintLength",team:"name"},Dx=["velocity","tracks","sprint length"];class Ku extends Ke{connected(){}}de(Ku,"view",`
        {{# if(this.canQuery) }}
            <div class="mr-8 hover:bg-gray-200 bg-gray-100 rounded-lg font-bitovipoppins font-lg">
                {{# if(this.teamConfigurationPromise.isPending) }}
                    <span class="px-2 py-1">Loading ...</span>
                {{/ }}

                {{# if(this.teamConfigurationPromise.isResolved) }}
                    
                    {{# if(this.teamConfigurationPromise.value.issue) }}

                        <a class="px-2 py-1" href="{{this.teamConfigurationPromise.value.issue.url}}" target="_blank">
                            Configuration Issue
                        </a>
                    {{ else }}
                            <a class="px-2 py-1" href="https://github.com/bitovi/jira-auto-scheduler/blob/main/docs/saved-configuration.md" target="_blank">
                            Create Configuration
                            </a>
                    {{/ if }}

                {{/ }}
            </div>
        {{/ if}}

    `);de(Ku,"props",{jiraHelpers:F.Any,isLoggedIn:Boolean,get canQuery(){return this.jiraHelpers&&this.isLoggedIn},get teamConfigurationPromise(){return this.canQuery?Pr.getTeamConfiguration(this.jiraHelpers):Promise.resolve(new Pr({issue:null}))}});function Sx(e){return e.type==="paragraph"}function Tx(e){return e.content.filter(t=>t.type==="text").map(t=>t.text)}function Sd(e){return e.content.filter(Sx).map(Tx).flat().join(" ")}function Lx(e){if(e.type!=="table"||e.content[0].type!=="tableRow")return!1;const t=e.content[0].content.map(r=>Sd(r).toLowerCase());if(!t.includes("team"))return!1;const n=[];for(let r=1;r<e.content.length;r++){let a=e.content[r],o={};for(let i=0;i<a.content.length;i++){let s=t[i],u=a.content[i];o[s]=Sd(u)}n.push(o)}return n}customElements.define("velocities-from-issue",Ku);class Bu extends Ke{login(){this.isResolved=!1,this.isPending=!0,this.jiraHelpers.getAccessToken().then(()=>{this.isLoggedIn=!0,this.isResolved=!0,this.isPending=!1})}logout(){this.isPending=!0,this.jiraHelpers.clearAuthFromLocalStorage(),this.isLoggedIn=!1,this.isResolved=!1,this.isPending=!1}connected(){this.jiraHelpers.hasAccessToken()?this.jiraHelpers.hasValidAccessToken()?(this.isLoggedIn=!0,this.isResolved=!0,this.isPending=!1):this.jiraHelpers.getAccessToken().then(()=>{this.isLoggedIn=!0,this.isResolved=!0,this.isPending=!1}):(this.isLoggedIn=!1,this.isResolved=!0,this.isPending=!1)}}de(Bu,"view",`
    {{# if(this.isPending) }}
        <button
            class="p-1 block pointer bg-orange-400 text-white rounded-lg font-bitovipoppins font-lg font-bold"
            style="border: none">
            Connecting
        </button>
    {{ else }}
        {{# if(this.isLoggedIn) }}
            <button
                class="p-1 block pointer bg-orange-400 text-white rounded-lg font-bitovipoppins font-lg font-bold"
                style="border: none"
                on:click="this.logout()">
                Log Out
            </button>
        {{ else }}
            <button
                class="p-1 block pointer bg-orange-400 text-white rounded-lg font-bitovipoppins font-lg font-bold"
                style="border: none"
                on:click="this.login()">
                Connect to Jira
            </button>
        {{/ if }}
    {{/ if }}
    {{# not(this.isResolved) }}

    {{/ not}}

   
    `);de(Bu,"props",{jiraHelpers:F.Any,isLoggedIn:!1,isResolved:!1,isPending:!0});customElements.define("jira-login",Bu);
